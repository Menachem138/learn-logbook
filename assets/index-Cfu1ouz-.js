(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const CM="modulepreload",EM=function(t){return"/"+t},zv={},TM=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.allSettled(n.map(l=>{if(l=EM(l),l in zv)return;zv[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":CM,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var tk=t=>{throw TypeError(t)},a0=(t,e,n)=>e.has(t)||tk("Cannot "+n),O=(t,e,n)=>(a0(t,e,"read from private field"),n?n.call(t):e.get(t)),fe=(t,e,n)=>e.has(t)?tk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ee=(t,e,n,r)=>(a0(t,e,"write to private field"),e.set(t,n),n),Ee=(t,e,n)=>(a0(t,e,"access private method"),n),pm=(t,e,n,r)=>({set _(o){ee(t,e,o)},get _(){return O(t,e,r)}});function NM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var Fn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function MM(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var rk={exports:{}},jh={},ok={exports:{}},Me={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Kc=Symbol.for("react.element"),_M=Symbol.for("react.portal"),OM=Symbol.for("react.fragment"),jM=Symbol.for("react.strict_mode"),RM=Symbol.for("react.profiler"),PM=Symbol.for("react.provider"),AM=Symbol.for("react.context"),DM=Symbol.for("react.forward_ref"),IM=Symbol.for("react.suspense"),LM=Symbol.for("react.memo"),zM=Symbol.for("react.lazy"),$v=Symbol.iterator;function $M(t){return t===null||typeof t!="object"?null:(t=$v&&t[$v]||t["@@iterator"],typeof t=="function"?t:null)}var ik={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sk=Object.assign,ak={};function Ka(t,e,n){this.props=t,this.context=e,this.refs=ak,this.updater=n||ik}Ka.prototype.isReactComponent={};Ka.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ka.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lk(){}lk.prototype=Ka.prototype;function l0(t,e,n){this.props=t,this.context=e,this.refs=ak,this.updater=n||ik}var c0=l0.prototype=new lk;c0.constructor=l0;sk(c0,Ka.prototype);c0.isPureReactComponent=!0;var Fv=Array.isArray,ck=Object.prototype.hasOwnProperty,u0={current:null},uk={key:!0,ref:!0,__self:!0,__source:!0};function dk(t,e,n){var r,o={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)ck.call(e,r)&&!uk.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Kc,type:t,key:i,ref:s,props:o,_owner:u0.current}}function FM(t,e){return{$$typeof:Kc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function d0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kc}function BM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bv=/\/+/g;function Ip(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BM(""+t.key):e.toString(36)}function nd(t,e,n,r,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Kc:case _M:s=!0}}if(s)return s=t,o=o(s),t=r===""?"."+Ip(s,0):r,Fv(o)?(n="",t!=null&&(n=t.replace(Bv,"$&/")+"/"),nd(o,e,n,"",function(c){return c})):o!=null&&(d0(o)&&(o=FM(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(Bv,"$&/")+"/")+t)),e.push(o)),1;if(s=0,r=r===""?".":r+":",Fv(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ip(i,a);s+=nd(i,e,n,l,o)}else if(l=$M(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ip(i,a++),s+=nd(i,e,n,l,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function fu(t,e,n){if(t==null)return t;var r=[],o=0;return nd(t,r,"","",function(i){return e.call(n,i,o++)}),r}function VM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},rd={transition:null},UM={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:rd,ReactCurrentOwner:u0};function hk(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:fu,forEach:function(t,e,n){fu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fu(t,function(){e++}),e},toArray:function(t){return fu(t,function(e){return e})||[]},only:function(t){if(!d0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=Ka;Me.Fragment=OM;Me.Profiler=RM;Me.PureComponent=l0;Me.StrictMode=jM;Me.Suspense=IM;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UM;Me.act=hk;Me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sk({},t.props),o=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=u0.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ck.call(e,l)&&!uk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Kc,type:t.type,key:o,ref:i,props:r,_owner:s}};Me.createContext=function(t){return t={$$typeof:AM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PM,_context:t},t.Consumer=t};Me.createElement=dk;Me.createFactory=function(t){var e=dk.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:DM,render:t}};Me.isValidElement=d0;Me.lazy=function(t){return{$$typeof:zM,_payload:{_status:-1,_result:t},_init:VM}};Me.memo=function(t,e){return{$$typeof:LM,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=rd.transition;rd.transition={};try{t()}finally{rd.transition=e}};Me.unstable_act=hk;Me.useCallback=function(t,e){return Qt.current.useCallback(t,e)};Me.useContext=function(t){return Qt.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};Me.useEffect=function(t,e){return Qt.current.useEffect(t,e)};Me.useId=function(){return Qt.current.useId()};Me.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};Me.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return Qt.current.useMemo(t,e)};Me.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};Me.useRef=function(t){return Qt.current.useRef(t)};Me.useState=function(t){return Qt.current.useState(t)};Me.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};Me.useTransition=function(){return Qt.current.useTransition()};Me.version="18.3.1";ok.exports=Me;var v=ok.exports;const C=nk(v),pk=NM({__proto__:null,default:C},[v]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var HM=v,WM=Symbol.for("react.element"),qM=Symbol.for("react.fragment"),KM=Object.prototype.hasOwnProperty,JM=HM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GM={key:!0,ref:!0,__self:!0,__source:!0};function fk(t,e,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)KM.call(e,r)&&!GM.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:WM,type:t,key:i,ref:s,props:o,_owner:JM.current}}jh.Fragment=qM;jh.jsx=fk;jh.jsxs=fk;rk.exports=jh;var m=rk.exports,mk={exports:{}},Cn={},gk={exports:{}},yk={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e(z,A){var M=z.length;z.push(A);e:for(;0<M;){var N=M-1>>>1,$=z[N];if(0<o($,A))z[N]=A,z[M]=$,M=N;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var A=z[0],M=z.pop();if(M!==A){z[0]=M;e:for(var N=0,$=z.length,V=$>>>1;N<V;){var K=2*(N+1)-1,te=z[K],re=K+1,X=z[re];if(0>o(te,M))re<$&&0>o(X,te)?(z[N]=X,z[re]=M,N=re):(z[N]=te,z[K]=M,N=K);else if(re<$&&0>o(X,M))z[N]=X,z[re]=M,N=re;else break e}}return A}function o(z,A){var M=z.sortIndex-A.sortIndex;return M!==0?M:z.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var A=n(c);A!==null;){if(A.callback===null)r(c);else if(A.startTime<=z)r(c),A.sortIndex=A.expirationTime,e(l,A);else break;A=n(c)}}function k(z){if(g=!1,x(z),!f)if(n(l)!==null)f=!0,Y(S);else{var A=n(c);A!==null&&se(k,A.startTime-z)}}function S(z,A){f=!1,g&&(g=!1,b(j),j=-1),p=!0;var M=h;try{for(x(A),d=n(l);d!==null&&(!(d.expirationTime>A)||z&&!H());){var N=d.callback;if(typeof N=="function"){d.callback=null,h=d.priorityLevel;var $=N(d.expirationTime<=A);A=t.unstable_now(),typeof $=="function"?d.callback=$:d===n(l)&&r(l),x(A)}else r(l);d=n(l)}if(d!==null)var V=!0;else{var K=n(c);K!==null&&se(k,K.startTime-A),V=!1}return V}finally{d=null,h=M,p=!1}}var E=!1,T=null,j=-1,R=5,D=-1;function H(){return!(t.unstable_now()-D<R)}function L(){if(T!==null){var z=t.unstable_now();D=z;var A=!0;try{A=T(!0,z)}finally{A?G():(E=!1,T=null)}}else E=!1}var G;if(typeof w=="function")G=function(){w(L)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Q=F.port2;F.port1.onmessage=L,G=function(){Q.postMessage(null)}}else G=function(){y(L,0)};function Y(z){T=z,E||(E=!0,G())}function se(z,A){j=y(function(){z(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,Y(S))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var A=3;break;default:A=h}var M=h;h=A;try{return z()}finally{h=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,A){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var M=h;h=z;try{return A()}finally{h=M}},t.unstable_scheduleCallback=function(z,A,M){var N=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?N+M:N):M=N,z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=M+$,z={id:u++,callback:A,priorityLevel:z,startTime:M,expirationTime:$,sortIndex:-1},M>N?(z.sortIndex=M,e(c,z),n(l)===null&&z===n(c)&&(g?(b(j),j=-1):g=!0,se(k,M-N))):(z.sortIndex=$,e(l,z),f||p||(f=!0,Y(S))),z},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(z){var A=h;return function(){var M=h;h=A;try{return z.apply(this,arguments)}finally{h=M}}}})(yk);gk.exports=yk;var YM=gk.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var QM=v,Sn=YM;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vk=new Set,cc={};function xs(t,e){_a(t,e),_a(t+"Capture",e)}function _a(t,e){for(cc[t]=e,t=0;t<e.length;t++)vk.add(e[t])}var ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fm=Object.prototype.hasOwnProperty,XM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vv={},Uv={};function ZM(t){return fm.call(Uv,t)?!0:fm.call(Vv,t)?!1:XM.test(t)?Uv[t]=!0:(Vv[t]=!0,!1)}function e_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function t_(t,e,n,r){if(e===null||typeof e>"u"||e_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,r,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var h0=/[\-:]([a-z])/g;function p0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(h0,p0);jt[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(h0,p0);jt[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(h0,p0);jt[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function f0(t,e,n,r){var o=jt.hasOwnProperty(e)?jt[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(t_(e,n,o,r)&&(n=null),r||o===null?ZM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var po=QM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mu=Symbol.for("react.element"),Zs=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),m0=Symbol.for("react.strict_mode"),mm=Symbol.for("react.profiler"),bk=Symbol.for("react.provider"),wk=Symbol.for("react.context"),g0=Symbol.for("react.forward_ref"),gm=Symbol.for("react.suspense"),ym=Symbol.for("react.suspense_list"),y0=Symbol.for("react.memo"),_o=Symbol.for("react.lazy"),xk=Symbol.for("react.offscreen"),Hv=Symbol.iterator;function sl(t){return t===null||typeof t!="object"?null:(t=Hv&&t[Hv]||t["@@iterator"],typeof t=="function"?t:null)}var et=Object.assign,Lp;function Il(t){if(Lp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lp=e&&e[1]||""}return`
`+Lp+t}var zp=!1;function $p(t,e){if(!t||zp)return"";zp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var l=`
`+o[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{zp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Il(t):""}function n_(t){switch(t.tag){case 5:return Il(t.type);case 16:return Il("Lazy");case 13:return Il("Suspense");case 19:return Il("SuspenseList");case 0:case 2:case 15:return t=$p(t.type,!1),t;case 11:return t=$p(t.type.render,!1),t;case 1:return t=$p(t.type,!0),t;default:return""}}function vm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ea:return"Fragment";case Zs:return"Portal";case mm:return"Profiler";case m0:return"StrictMode";case gm:return"Suspense";case ym:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wk:return(t.displayName||"Context")+".Consumer";case bk:return(t._context.displayName||"Context")+".Provider";case g0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case y0:return e=t.displayName||null,e!==null?e:vm(t.type)||"Memo";case _o:e=t._payload,t=t._init;try{return vm(t(e))}catch{}}return null}function r_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vm(e);case 8:return e===m0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function o_(t){var e=kk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gu(t){t._valueTracker||(t._valueTracker=o_(t))}function Sk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Md(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bm(t,e){var n=e.checked;return et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=li(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ck(t,e){e=e.checked,e!=null&&f0(t,"checked",e,!1)}function wm(t,e){Ck(t,e);var n=li(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xm(t,e.type,n):e.hasOwnProperty("defaultValue")&&xm(t,e.type,li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xm(t,e,n){(e!=="number"||Md(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ll=Array.isArray;function fa(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+li(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function km(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Ll(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:li(n)}}function Ek(t,e){var n=li(e.value),r=li(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yu,Nk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yu=yu||document.createElement("div"),yu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i_=["Webkit","ms","Moz","O"];Object.keys(ql).forEach(function(t){i_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ql[e]=ql[t]})});function Mk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ql.hasOwnProperty(t)&&ql[t]?(""+e).trim():e+"px"}function _k(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Mk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var s_=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cm(t,e){if(e){if(s_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Em(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tm=null;function v0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nm=null,ma=null,ga=null;function Gv(t){if(t=Yc(t)){if(typeof Nm!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Ih(e),Nm(t.stateNode,t.type,e))}}function Ok(t){ma?ga?ga.push(t):ga=[t]:ma=t}function jk(){if(ma){var t=ma,e=ga;if(ga=ma=null,Gv(t),e)for(t=0;t<e.length;t++)Gv(e[t])}}function Rk(t,e){return t(e)}function Pk(){}var Fp=!1;function Ak(t,e,n){if(Fp)return t(e,n);Fp=!0;try{return Rk(t,e,n)}finally{Fp=!1,(ma!==null||ga!==null)&&(Pk(),jk())}}function dc(t,e){var n=t.stateNode;if(n===null)return null;var r=Ih(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Mm=!1;if(ro)try{var al={};Object.defineProperty(al,"passive",{get:function(){Mm=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{Mm=!1}function a_(t,e,n,r,o,i,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Kl=!1,_d=null,Od=!1,_m=null,l_={onError:function(t){Kl=!0,_d=t}};function c_(t,e,n,r,o,i,s,a,l){Kl=!1,_d=null,a_.apply(l_,arguments)}function u_(t,e,n,r,o,i,s,a,l){if(c_.apply(this,arguments),Kl){if(Kl){var c=_d;Kl=!1,_d=null}else throw Error(W(198));Od||(Od=!0,_m=c)}}function ks(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yv(t){if(ks(t)!==t)throw Error(W(188))}function d_(t){var e=t.alternate;if(!e){if(e=ks(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Yv(o),t;if(i===r)return Yv(o),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function Ik(t){return t=d_(t),t!==null?Lk(t):null}function Lk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lk(t);if(e!==null)return e;t=t.sibling}return null}var zk=Sn.unstable_scheduleCallback,Qv=Sn.unstable_cancelCallback,h_=Sn.unstable_shouldYield,p_=Sn.unstable_requestPaint,lt=Sn.unstable_now,f_=Sn.unstable_getCurrentPriorityLevel,b0=Sn.unstable_ImmediatePriority,$k=Sn.unstable_UserBlockingPriority,jd=Sn.unstable_NormalPriority,m_=Sn.unstable_LowPriority,Fk=Sn.unstable_IdlePriority,Rh=null,Sr=null;function g_(t){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(Rh,t,void 0,(t.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:b_,y_=Math.log,v_=Math.LN2;function b_(t){return t>>>=0,t===0?32:31-(y_(t)/v_|0)|0}var vu=64,bu=4194304;function zl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~o;a!==0?r=zl(a):(i&=s,i!==0&&(r=zl(i)))}else s=n&~o,s!==0?r=zl(s):i!==0&&(r=zl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rr(e),o=1<<n,r|=t[n],e&=~o;return r}function w_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-rr(i),a=1<<s,l=o[s];l===-1?(!(a&n)||a&r)&&(o[s]=w_(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Om(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bk(){var t=vu;return vu<<=1,!(vu&4194240)&&(vu=64),t}function Bp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rr(e),t[e]=n}function k_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-rr(n),i=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~i}}function w0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rr(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var De=0;function Vk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Uk,x0,Hk,Wk,qk,jm=!1,wu=[],qo=null,Ko=null,Jo=null,hc=new Map,pc=new Map,Ao=[],S_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xv(t,e){switch(t){case"focusin":case"focusout":qo=null;break;case"dragenter":case"dragleave":Ko=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":hc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(e.pointerId)}}function ll(t,e,n,r,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=Yc(e),e!==null&&x0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function C_(t,e,n,r,o){switch(e){case"focusin":return qo=ll(qo,t,e,n,r,o),!0;case"dragenter":return Ko=ll(Ko,t,e,n,r,o),!0;case"mouseover":return Jo=ll(Jo,t,e,n,r,o),!0;case"pointerover":var i=o.pointerId;return hc.set(i,ll(hc.get(i)||null,t,e,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,pc.set(i,ll(pc.get(i)||null,t,e,n,r,o)),!0}return!1}function Kk(t){var e=$i(t.target);if(e!==null){var n=ks(e);if(n!==null){if(e=n.tag,e===13){if(e=Dk(n),e!==null){t.blockedOn=e,qk(t.priority,function(){Hk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function od(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Tm=r,n.target.dispatchEvent(r),Tm=null}else return e=Yc(n),e!==null&&x0(e),t.blockedOn=n,!1;e.shift()}return!0}function Zv(t,e,n){od(t)&&n.delete(e)}function E_(){jm=!1,qo!==null&&od(qo)&&(qo=null),Ko!==null&&od(Ko)&&(Ko=null),Jo!==null&&od(Jo)&&(Jo=null),hc.forEach(Zv),pc.forEach(Zv)}function cl(t,e){t.blockedOn===e&&(t.blockedOn=null,jm||(jm=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,E_)))}function fc(t){function e(o){return cl(o,t)}if(0<wu.length){cl(wu[0],t);for(var n=1;n<wu.length;n++){var r=wu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qo!==null&&cl(qo,t),Ko!==null&&cl(Ko,t),Jo!==null&&cl(Jo,t),hc.forEach(e),pc.forEach(e),n=0;n<Ao.length;n++)r=Ao[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ao.length&&(n=Ao[0],n.blockedOn===null);)Kk(n),n.blockedOn===null&&Ao.shift()}var ya=po.ReactCurrentBatchConfig,Pd=!0;function T_(t,e,n,r){var o=De,i=ya.transition;ya.transition=null;try{De=1,k0(t,e,n,r)}finally{De=o,ya.transition=i}}function N_(t,e,n,r){var o=De,i=ya.transition;ya.transition=null;try{De=4,k0(t,e,n,r)}finally{De=o,ya.transition=i}}function k0(t,e,n,r){if(Pd){var o=Rm(t,e,n,r);if(o===null)Qp(t,e,r,Ad,n),Xv(t,r);else if(C_(o,t,e,n,r))r.stopPropagation();else if(Xv(t,r),e&4&&-1<S_.indexOf(t)){for(;o!==null;){var i=Yc(o);if(i!==null&&Uk(i),i=Rm(t,e,n,r),i===null&&Qp(t,e,r,Ad,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Qp(t,e,r,null,n)}}var Ad=null;function Rm(t,e,n,r){if(Ad=null,t=v0(r),t=$i(t),t!==null)if(e=ks(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ad=t,null}function Jk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(f_()){case b0:return 1;case $k:return 4;case jd:case m_:return 16;case Fk:return 536870912;default:return 16}default:return 16}}var $o=null,S0=null,id=null;function Gk(){if(id)return id;var t,e=S0,n=e.length,r,o="value"in $o?$o.value:$o.textContent,i=o.length;for(t=0;t<n&&e[t]===o[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===o[i-r];r++);return id=o.slice(t,1<r?1-r:void 0)}function sd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xu(){return!0}function e1(){return!1}function En(t){function e(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xu:e1,this.isPropagationStopped=e1,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xu)},persist:function(){},isPersistent:xu}),e}var Ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},C0=En(Ja),Gc=et({},Ja,{view:0,detail:0}),M_=En(Gc),Vp,Up,ul,Ph=et({},Gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:E0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ul&&(ul&&t.type==="mousemove"?(Vp=t.screenX-ul.screenX,Up=t.screenY-ul.screenY):Up=Vp=0,ul=t),Vp)},movementY:function(t){return"movementY"in t?t.movementY:Up}}),t1=En(Ph),__=et({},Ph,{dataTransfer:0}),O_=En(__),j_=et({},Gc,{relatedTarget:0}),Hp=En(j_),R_=et({},Ja,{animationName:0,elapsedTime:0,pseudoElement:0}),P_=En(R_),A_=et({},Ja,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),D_=En(A_),I_=et({},Ja,{data:0}),n1=En(I_),L_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$_[t])?!!e[t]:!1}function E0(){return F_}var B_=et({},Gc,{key:function(t){if(t.key){var e=L_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?z_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:E0,charCode:function(t){return t.type==="keypress"?sd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),V_=En(B_),U_=et({},Ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r1=En(U_),H_=et({},Gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:E0}),W_=En(H_),q_=et({},Ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),K_=En(q_),J_=et({},Ph,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G_=En(J_),Y_=[9,13,27,32],T0=ro&&"CompositionEvent"in window,Jl=null;ro&&"documentMode"in document&&(Jl=document.documentMode);var Q_=ro&&"TextEvent"in window&&!Jl,Yk=ro&&(!T0||Jl&&8<Jl&&11>=Jl),o1=" ",i1=!1;function Qk(t,e){switch(t){case"keyup":return Y_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ta=!1;function X_(t,e){switch(t){case"compositionend":return Xk(e);case"keypress":return e.which!==32?null:(i1=!0,o1);case"textInput":return t=e.data,t===o1&&i1?null:t;default:return null}}function Z_(t,e){if(ta)return t==="compositionend"||!T0&&Qk(t,e)?(t=Gk(),id=S0=$o=null,ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yk&&e.locale!=="ko"?null:e.data;default:return null}}var eO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eO[t.type]:e==="textarea"}function Zk(t,e,n,r){Ok(r),e=Dd(e,"onChange"),0<e.length&&(n=new C0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gl=null,mc=null;function tO(t){u2(t,0)}function Ah(t){var e=oa(t);if(Sk(e))return t}function nO(t,e){if(t==="change")return e}var e2=!1;if(ro){var Wp;if(ro){var qp="oninput"in document;if(!qp){var a1=document.createElement("div");a1.setAttribute("oninput","return;"),qp=typeof a1.oninput=="function"}Wp=qp}else Wp=!1;e2=Wp&&(!document.documentMode||9<document.documentMode)}function l1(){Gl&&(Gl.detachEvent("onpropertychange",t2),mc=Gl=null)}function t2(t){if(t.propertyName==="value"&&Ah(mc)){var e=[];Zk(e,mc,t,v0(t)),Ak(tO,e)}}function rO(t,e,n){t==="focusin"?(l1(),Gl=e,mc=n,Gl.attachEvent("onpropertychange",t2)):t==="focusout"&&l1()}function oO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ah(mc)}function iO(t,e){if(t==="click")return Ah(e)}function sO(t,e){if(t==="input"||t==="change")return Ah(e)}function aO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sr=typeof Object.is=="function"?Object.is:aO;function gc(t,e){if(sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!fm.call(e,o)||!sr(t[o],e[o]))return!1}return!0}function c1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function u1(t,e){var n=c1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=c1(n)}}function n2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?n2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function r2(){for(var t=window,e=Md();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Md(t.document)}return e}function N0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lO(t){var e=r2(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&n2(n.ownerDocument.documentElement,n)){if(r!==null&&N0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!t.extend&&i>r&&(o=r,r=i,i=o),o=u1(n,i);var s=u1(n,r);o&&s&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cO=ro&&"documentMode"in document&&11>=document.documentMode,na=null,Pm=null,Yl=null,Am=!1;function d1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Am||na==null||na!==Md(r)||(r=na,"selectionStart"in r&&N0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yl&&gc(Yl,r)||(Yl=r,r=Dd(Pm,"onSelect"),0<r.length&&(e=new C0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=na)))}function ku(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ra={animationend:ku("Animation","AnimationEnd"),animationiteration:ku("Animation","AnimationIteration"),animationstart:ku("Animation","AnimationStart"),transitionend:ku("Transition","TransitionEnd")},Kp={},o2={};ro&&(o2=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Dh(t){if(Kp[t])return Kp[t];if(!ra[t])return t;var e=ra[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in o2)return Kp[t]=e[n];return t}var i2=Dh("animationend"),s2=Dh("animationiteration"),a2=Dh("animationstart"),l2=Dh("transitionend"),c2=new Map,h1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mi(t,e){c2.set(t,e),xs(e,[t])}for(var Jp=0;Jp<h1.length;Jp++){var Gp=h1[Jp],uO=Gp.toLowerCase(),dO=Gp[0].toUpperCase()+Gp.slice(1);mi(uO,"on"+dO)}mi(i2,"onAnimationEnd");mi(s2,"onAnimationIteration");mi(a2,"onAnimationStart");mi("dblclick","onDoubleClick");mi("focusin","onFocus");mi("focusout","onBlur");mi(l2,"onTransitionEnd");_a("onMouseEnter",["mouseout","mouseover"]);_a("onMouseLeave",["mouseout","mouseover"]);_a("onPointerEnter",["pointerout","pointerover"]);_a("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hO=new Set("cancel close invalid load scroll toggle".split(" ").concat($l));function p1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,u_(r,e,void 0,t),t.currentTarget=null}function u2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;p1(o,a,c),i=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;p1(o,a,c),i=l}}}if(Od)throw t=_m,Od=!1,_m=null,t}function qe(t,e){var n=e[$m];n===void 0&&(n=e[$m]=new Set);var r=t+"__bubble";n.has(r)||(d2(e,t,2,!1),n.add(r))}function Yp(t,e,n){var r=0;e&&(r|=4),d2(n,t,r,e)}var Su="_reactListening"+Math.random().toString(36).slice(2);function yc(t){if(!t[Su]){t[Su]=!0,vk.forEach(function(n){n!=="selectionchange"&&(hO.has(n)||Yp(n,!1,t),Yp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Su]||(e[Su]=!0,Yp("selectionchange",!1,e))}}function d2(t,e,n,r){switch(Jk(e)){case 1:var o=T_;break;case 4:o=N_;break;default:o=k0}n=o.bind(null,e,n,t),o=void 0,!Mm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Qp(t,e,n,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;s=s.return}for(;a!==null;){if(s=$i(a),s===null)return;if(l=s.tag,l===5||l===6){r=i=s;continue e}a=a.parentNode}}r=r.return}Ak(function(){var c=i,u=v0(n),d=[];e:{var h=c2.get(t);if(h!==void 0){var p=C0,f=t;switch(t){case"keypress":if(sd(n)===0)break e;case"keydown":case"keyup":p=V_;break;case"focusin":f="focus",p=Hp;break;case"focusout":f="blur",p=Hp;break;case"beforeblur":case"afterblur":p=Hp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=t1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=O_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=W_;break;case i2:case s2:case a2:p=P_;break;case l2:p=K_;break;case"scroll":p=M_;break;case"wheel":p=G_;break;case"copy":case"cut":case"paste":p=D_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=r1}var g=(e&4)!==0,y=!g&&t==="scroll",b=g?h!==null?h+"Capture":null:h;g=[];for(var w=c,x;w!==null;){x=w;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,b!==null&&(k=dc(w,b),k!=null&&g.push(vc(w,k,x)))),y)break;w=w.return}0<g.length&&(h=new p(h,f,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==Tm&&(f=n.relatedTarget||n.fromElement)&&($i(f)||f[oo]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(f=n.relatedTarget||n.toElement,p=c,f=f?$i(f):null,f!==null&&(y=ks(f),f!==y||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=c),p!==f)){if(g=t1,k="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=r1,k="onPointerLeave",b="onPointerEnter",w="pointer"),y=p==null?h:oa(p),x=f==null?h:oa(f),h=new g(k,w+"leave",p,n,u),h.target=y,h.relatedTarget=x,k=null,$i(u)===c&&(g=new g(b,w+"enter",f,n,u),g.target=x,g.relatedTarget=y,k=g),y=k,p&&f)t:{for(g=p,b=f,w=0,x=g;x;x=Ps(x))w++;for(x=0,k=b;k;k=Ps(k))x++;for(;0<w-x;)g=Ps(g),w--;for(;0<x-w;)b=Ps(b),x--;for(;w--;){if(g===b||b!==null&&g===b.alternate)break t;g=Ps(g),b=Ps(b)}g=null}else g=null;p!==null&&f1(d,h,p,g,!1),f!==null&&y!==null&&f1(d,y,f,g,!0)}}e:{if(h=c?oa(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=nO;else if(s1(h))if(e2)S=sO;else{S=oO;var E=rO}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=iO);if(S&&(S=S(t,c))){Zk(d,S,n,u);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&xm(h,"number",h.value)}switch(E=c?oa(c):window,t){case"focusin":(s1(E)||E.contentEditable==="true")&&(na=E,Pm=c,Yl=null);break;case"focusout":Yl=Pm=na=null;break;case"mousedown":Am=!0;break;case"contextmenu":case"mouseup":case"dragend":Am=!1,d1(d,n,u);break;case"selectionchange":if(cO)break;case"keydown":case"keyup":d1(d,n,u)}var T;if(T0)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else ta?Qk(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(Yk&&n.locale!=="ko"&&(ta||j!=="onCompositionStart"?j==="onCompositionEnd"&&ta&&(T=Gk()):($o=u,S0="value"in $o?$o.value:$o.textContent,ta=!0)),E=Dd(c,j),0<E.length&&(j=new n1(j,t,null,n,u),d.push({event:j,listeners:E}),T?j.data=T:(T=Xk(n),T!==null&&(j.data=T)))),(T=Q_?X_(t,n):Z_(t,n))&&(c=Dd(c,"onBeforeInput"),0<c.length&&(u=new n1("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=T))}u2(d,e)})}function vc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dd(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=dc(t,n),i!=null&&r.unshift(vc(t,i,o)),i=dc(t,e),i!=null&&r.push(vc(t,i,o))),t=t.return}return r}function Ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function f1(t,e,n,r,o){for(var i=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=dc(n,i),l!=null&&s.unshift(vc(n,l,a))):o||(l=dc(n,i),l!=null&&s.push(vc(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var pO=/\r\n?/g,fO=/\u0000|\uFFFD/g;function m1(t){return(typeof t=="string"?t:""+t).replace(pO,`
`).replace(fO,"")}function Cu(t,e,n){if(e=m1(e),m1(t)!==e&&n)throw Error(W(425))}function Id(){}var Dm=null,Im=null;function Lm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zm=typeof setTimeout=="function"?setTimeout:void 0,mO=typeof clearTimeout=="function"?clearTimeout:void 0,g1=typeof Promise=="function"?Promise:void 0,gO=typeof queueMicrotask=="function"?queueMicrotask:typeof g1<"u"?function(t){return g1.resolve(null).then(t).catch(yO)}:zm;function yO(t){setTimeout(function(){throw t})}function Xp(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),fc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);fc(e)}function Go(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function y1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ga=Math.random().toString(36).slice(2),vr="__reactFiber$"+Ga,bc="__reactProps$"+Ga,oo="__reactContainer$"+Ga,$m="__reactEvents$"+Ga,vO="__reactListeners$"+Ga,bO="__reactHandles$"+Ga;function $i(t){var e=t[vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[oo]||n[vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=y1(t);t!==null;){if(n=t[vr])return n;t=y1(t)}return e}t=n,n=t.parentNode}return null}function Yc(t){return t=t[vr]||t[oo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Ih(t){return t[bc]||null}var Fm=[],ia=-1;function gi(t){return{current:t}}function Je(t){0>ia||(t.current=Fm[ia],Fm[ia]=null,ia--)}function He(t,e){ia++,Fm[ia]=t.current,t.current=e}var ci={},$t=gi(ci),ln=gi(!1),is=ci;function Oa(t,e){var n=t.type.contextTypes;if(!n)return ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function cn(t){return t=t.childContextTypes,t!=null}function Ld(){Je(ln),Je($t)}function v1(t,e,n){if($t.current!==ci)throw Error(W(168));He($t,e),He(ln,n)}function h2(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(W(108,r_(t)||"Unknown",o));return et({},n,r)}function zd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,is=$t.current,He($t,t),He(ln,ln.current),!0}function b1(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=h2(t,e,is),r.__reactInternalMemoizedMergedChildContext=t,Je(ln),Je($t),He($t,t)):Je(ln),He(ln,n)}var Gr=null,Lh=!1,Zp=!1;function p2(t){Gr===null?Gr=[t]:Gr.push(t)}function wO(t){Lh=!0,p2(t)}function yi(){if(!Zp&&Gr!==null){Zp=!0;var t=0,e=De;try{var n=Gr;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gr=null,Lh=!1}catch(o){throw Gr!==null&&(Gr=Gr.slice(t+1)),zk(b0,yi),o}finally{De=e,Zp=!1}}return null}var sa=[],aa=0,$d=null,Fd=0,Rn=[],Pn=0,ss=null,Yr=1,Qr="";function Pi(t,e){sa[aa++]=Fd,sa[aa++]=$d,$d=t,Fd=e}function f2(t,e,n){Rn[Pn++]=Yr,Rn[Pn++]=Qr,Rn[Pn++]=ss,ss=t;var r=Yr;t=Qr;var o=32-rr(r)-1;r&=~(1<<o),n+=1;var i=32-rr(e)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Yr=1<<32-rr(e)+o|n<<o|r,Qr=i+t}else Yr=1<<i|n<<o|r,Qr=t}function M0(t){t.return!==null&&(Pi(t,1),f2(t,1,0))}function _0(t){for(;t===$d;)$d=sa[--aa],sa[aa]=null,Fd=sa[--aa],sa[aa]=null;for(;t===ss;)ss=Rn[--Pn],Rn[Pn]=null,Qr=Rn[--Pn],Rn[Pn]=null,Yr=Rn[--Pn],Rn[Pn]=null}var xn=null,wn=null,Qe=!1,Zn=null;function m2(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function w1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xn=t,wn=Go(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xn=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ss!==null?{id:Yr,overflow:Qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xn=t,wn=null,!0):!1;default:return!1}}function Bm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vm(t){if(Qe){var e=wn;if(e){var n=e;if(!w1(t,e)){if(Bm(t))throw Error(W(418));e=Go(n.nextSibling);var r=xn;e&&w1(t,e)?m2(r,n):(t.flags=t.flags&-4097|2,Qe=!1,xn=t)}}else{if(Bm(t))throw Error(W(418));t.flags=t.flags&-4097|2,Qe=!1,xn=t}}}function x1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xn=t}function Eu(t){if(t!==xn)return!1;if(!Qe)return x1(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lm(t.type,t.memoizedProps)),e&&(e=wn)){if(Bm(t))throw g2(),Error(W(418));for(;e;)m2(t,e),e=Go(e.nextSibling)}if(x1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Go(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=xn?Go(t.stateNode.nextSibling):null;return!0}function g2(){for(var t=wn;t;)t=Go(t.nextSibling)}function ja(){wn=xn=null,Qe=!1}function O0(t){Zn===null?Zn=[t]:Zn.push(t)}var xO=po.ReactCurrentBatchConfig;function dl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var o=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var a=o.refs;s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Tu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function k1(t){var e=t._init;return e(t._payload)}function y2(t){function e(b,w){if(t){var x=b.deletions;x===null?(b.deletions=[w],b.flags|=16):x.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function o(b,w){return b=Zo(b,w),b.index=0,b.sibling=null,b}function i(b,w,x){return b.index=x,t?(x=b.alternate,x!==null?(x=x.index,x<w?(b.flags|=2,w):x):(b.flags|=2,w)):(b.flags|=1048576,w)}function s(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,w,x,k){return w===null||w.tag!==6?(w=af(x,b.mode,k),w.return=b,w):(w=o(w,x),w.return=b,w)}function l(b,w,x,k){var S=x.type;return S===ea?u(b,w,x.props.children,k,x.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===_o&&k1(S)===w.type)?(k=o(w,x.props),k.ref=dl(b,w,x),k.return=b,k):(k=pd(x.type,x.key,x.props,null,b.mode,k),k.ref=dl(b,w,x),k.return=b,k)}function c(b,w,x,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=lf(x,b.mode,k),w.return=b,w):(w=o(w,x.children||[]),w.return=b,w)}function u(b,w,x,k,S){return w===null||w.tag!==7?(w=Yi(x,b.mode,k,S),w.return=b,w):(w=o(w,x),w.return=b,w)}function d(b,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=af(""+w,b.mode,x),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case mu:return x=pd(w.type,w.key,w.props,null,b.mode,x),x.ref=dl(b,null,w),x.return=b,x;case Zs:return w=lf(w,b.mode,x),w.return=b,w;case _o:var k=w._init;return d(b,k(w._payload),x)}if(Ll(w)||sl(w))return w=Yi(w,b.mode,x,null),w.return=b,w;Tu(b,w)}return null}function h(b,w,x,k){var S=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:a(b,w,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case mu:return x.key===S?l(b,w,x,k):null;case Zs:return x.key===S?c(b,w,x,k):null;case _o:return S=x._init,h(b,w,S(x._payload),k)}if(Ll(x)||sl(x))return S!==null?null:u(b,w,x,k,null);Tu(b,x)}return null}function p(b,w,x,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return b=b.get(x)||null,a(w,b,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case mu:return b=b.get(k.key===null?x:k.key)||null,l(w,b,k,S);case Zs:return b=b.get(k.key===null?x:k.key)||null,c(w,b,k,S);case _o:var E=k._init;return p(b,w,x,E(k._payload),S)}if(Ll(k)||sl(k))return b=b.get(x)||null,u(w,b,k,S,null);Tu(w,k)}return null}function f(b,w,x,k){for(var S=null,E=null,T=w,j=w=0,R=null;T!==null&&j<x.length;j++){T.index>j?(R=T,T=null):R=T.sibling;var D=h(b,T,x[j],k);if(D===null){T===null&&(T=R);break}t&&T&&D.alternate===null&&e(b,T),w=i(D,w,j),E===null?S=D:E.sibling=D,E=D,T=R}if(j===x.length)return n(b,T),Qe&&Pi(b,j),S;if(T===null){for(;j<x.length;j++)T=d(b,x[j],k),T!==null&&(w=i(T,w,j),E===null?S=T:E.sibling=T,E=T);return Qe&&Pi(b,j),S}for(T=r(b,T);j<x.length;j++)R=p(T,b,j,x[j],k),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?j:R.key),w=i(R,w,j),E===null?S=R:E.sibling=R,E=R);return t&&T.forEach(function(H){return e(b,H)}),Qe&&Pi(b,j),S}function g(b,w,x,k){var S=sl(x);if(typeof S!="function")throw Error(W(150));if(x=S.call(x),x==null)throw Error(W(151));for(var E=S=null,T=w,j=w=0,R=null,D=x.next();T!==null&&!D.done;j++,D=x.next()){T.index>j?(R=T,T=null):R=T.sibling;var H=h(b,T,D.value,k);if(H===null){T===null&&(T=R);break}t&&T&&H.alternate===null&&e(b,T),w=i(H,w,j),E===null?S=H:E.sibling=H,E=H,T=R}if(D.done)return n(b,T),Qe&&Pi(b,j),S;if(T===null){for(;!D.done;j++,D=x.next())D=d(b,D.value,k),D!==null&&(w=i(D,w,j),E===null?S=D:E.sibling=D,E=D);return Qe&&Pi(b,j),S}for(T=r(b,T);!D.done;j++,D=x.next())D=p(T,b,j,D.value,k),D!==null&&(t&&D.alternate!==null&&T.delete(D.key===null?j:D.key),w=i(D,w,j),E===null?S=D:E.sibling=D,E=D);return t&&T.forEach(function(L){return e(b,L)}),Qe&&Pi(b,j),S}function y(b,w,x,k){if(typeof x=="object"&&x!==null&&x.type===ea&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case mu:e:{for(var S=x.key,E=w;E!==null;){if(E.key===S){if(S=x.type,S===ea){if(E.tag===7){n(b,E.sibling),w=o(E,x.props.children),w.return=b,b=w;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===_o&&k1(S)===E.type){n(b,E.sibling),w=o(E,x.props),w.ref=dl(b,E,x),w.return=b,b=w;break e}n(b,E);break}else e(b,E);E=E.sibling}x.type===ea?(w=Yi(x.props.children,b.mode,k,x.key),w.return=b,b=w):(k=pd(x.type,x.key,x.props,null,b.mode,k),k.ref=dl(b,w,x),k.return=b,b=k)}return s(b);case Zs:e:{for(E=x.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(b,w.sibling),w=o(w,x.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=lf(x,b.mode,k),w.return=b,b=w}return s(b);case _o:return E=x._init,y(b,w,E(x._payload),k)}if(Ll(x))return f(b,w,x,k);if(sl(x))return g(b,w,x,k);Tu(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(b,w.sibling),w=o(w,x),w.return=b,b=w):(n(b,w),w=af(x,b.mode,k),w.return=b,b=w),s(b)):n(b,w)}return y}var Ra=y2(!0),v2=y2(!1),Bd=gi(null),Vd=null,la=null,j0=null;function R0(){j0=la=Vd=null}function P0(t){var e=Bd.current;Je(Bd),t._currentValue=e}function Um(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function va(t,e){Vd=t,j0=la=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function Bn(t){var e=t._currentValue;if(j0!==t)if(t={context:t,memoizedValue:e,next:null},la===null){if(Vd===null)throw Error(W(308));la=t,Vd.dependencies={lanes:0,firstContext:t}}else la=la.next=t;return e}var Fi=null;function A0(t){Fi===null?Fi=[t]:Fi.push(t)}function b2(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,A0(e)):(n.next=o.next,o.next=n),e.interleaved=n,io(t,r)}function io(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oo=!1;function D0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,io(t,n)}return o=r.interleaved,o===null?(e.next=e,A0(r)):(e.next=o.next,o.next=e),r.interleaved=e,io(t,n)}function ad(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,w0(t,n)}}function S1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=e:i=i.next=e}else o=i=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ud(t,e,n,r){var o=t.updateQueue;Oo=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?i=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=o.baseState;s=0,u=c=l=null,a=i;do{var h=a.lane,p=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=t,g=a;switch(h=e,p=n,g.tag){case 1:if(f=g.payload,typeof f=="function"){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=g.payload,h=typeof f=="function"?f.call(p,d,h):f,h==null)break e;d=et({},d,h);break e;case 2:Oo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,s|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(u===null&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);ls|=s,t.lanes=s,t.memoizedState=d}}function C1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(W(191,o));o.call(r)}}}var Qc={},Cr=gi(Qc),wc=gi(Qc),xc=gi(Qc);function Bi(t){if(t===Qc)throw Error(W(174));return t}function I0(t,e){switch(He(xc,e),He(wc,t),He(Cr,Qc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sm(e,t)}Je(Cr),He(Cr,e)}function Pa(){Je(Cr),Je(wc),Je(xc)}function x2(t){Bi(xc.current);var e=Bi(Cr.current),n=Sm(e,t.type);e!==n&&(He(wc,t),He(Cr,n))}function L0(t){wc.current===t&&(Je(Cr),Je(wc))}var Xe=gi(0);function Hd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ef=[];function z0(){for(var t=0;t<ef.length;t++)ef[t]._workInProgressVersionPrimary=null;ef.length=0}var ld=po.ReactCurrentDispatcher,tf=po.ReactCurrentBatchConfig,as=0,Ze=null,mt=null,wt=null,Wd=!1,Ql=!1,kc=0,kO=0;function At(){throw Error(W(321))}function $0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function F0(t,e,n,r,o,i){if(as=i,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ld.current=t===null||t.memoizedState===null?TO:NO,t=n(r,o),Ql){i=0;do{if(Ql=!1,kc=0,25<=i)throw Error(W(301));i+=1,wt=mt=null,e.updateQueue=null,ld.current=MO,t=n(r,o)}while(Ql)}if(ld.current=qd,e=mt!==null&&mt.next!==null,as=0,wt=mt=Ze=null,Wd=!1,e)throw Error(W(300));return t}function B0(){var t=kc!==0;return kc=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ze.memoizedState=wt=t:wt=wt.next=t,wt}function Vn(){if(mt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=wt===null?Ze.memoizedState:wt.next;if(e!==null)wt=e,mt=t;else{if(t===null)throw Error(W(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},wt===null?Ze.memoizedState=wt=t:wt=wt.next=t}return wt}function Sc(t,e){return typeof e=="function"?e(t):e}function nf(t){var e=Vn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=mt,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=s=null,l=null,c=i;do{var u=c.lane;if((as&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Ze.lanes|=u,ls|=u}c=c.next}while(c!==null&&c!==i);l===null?s=r:l.next=a,sr(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do i=o.lane,Ze.lanes|=i,ls|=i,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rf(t){var e=Vn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,i=e.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=t(i,s.action),s=s.next;while(s!==o);sr(i,e.memoizedState)||(an=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function k2(){}function S2(t,e){var n=Ze,r=Vn(),o=e(),i=!sr(r.memoizedState,o);if(i&&(r.memoizedState=o,an=!0),r=r.queue,V0(T2.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,Cc(9,E2.bind(null,n,r,o,e),void 0,null),kt===null)throw Error(W(349));as&30||C2(n,e,o)}return o}function C2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function E2(t,e,n,r){e.value=n,e.getSnapshot=r,N2(e)&&M2(t)}function T2(t,e,n){return n(function(){N2(e)&&M2(t)})}function N2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch{return!0}}function M2(t){var e=io(t,1);e!==null&&or(e,t,1,-1)}function E1(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sc,lastRenderedState:t},e.queue=t,t=t.dispatch=EO.bind(null,Ze,t),[e.memoizedState,t]}function Cc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _2(){return Vn().memoizedState}function cd(t,e,n,r){var o=mr();Ze.flags|=t,o.memoizedState=Cc(1|e,n,void 0,r===void 0?null:r)}function zh(t,e,n,r){var o=Vn();r=r===void 0?null:r;var i=void 0;if(mt!==null){var s=mt.memoizedState;if(i=s.destroy,r!==null&&$0(r,s.deps)){o.memoizedState=Cc(e,n,i,r);return}}Ze.flags|=t,o.memoizedState=Cc(1|e,n,i,r)}function T1(t,e){return cd(8390656,8,t,e)}function V0(t,e){return zh(2048,8,t,e)}function O2(t,e){return zh(4,2,t,e)}function j2(t,e){return zh(4,4,t,e)}function R2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function P2(t,e,n){return n=n!=null?n.concat([t]):null,zh(4,4,R2.bind(null,e,t),n)}function U0(){}function A2(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function D2(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function I2(t,e,n){return as&21?(sr(n,e)||(n=Bk(),Ze.lanes|=n,ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function SO(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=tf.transition;tf.transition={};try{t(!1),e()}finally{De=n,tf.transition=r}}function L2(){return Vn().memoizedState}function CO(t,e,n){var r=Xo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},z2(t))$2(e,n);else if(n=b2(t,e,n,r),n!==null){var o=Kt();or(n,t,r,o),F2(n,e,r)}}function EO(t,e,n){var r=Xo(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(z2(t))$2(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,sr(a,s)){var l=e.interleaved;l===null?(o.next=o,A0(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=b2(t,e,o,r),n!==null&&(o=Kt(),or(n,t,r,o),F2(n,e,r))}}function z2(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function $2(t,e){Ql=Wd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function F2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,w0(t,n)}}var qd={readContext:Bn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},TO={readContext:Bn,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:Bn,useEffect:T1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cd(4194308,4,R2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cd(4194308,4,t,e)},useInsertionEffect:function(t,e){return cd(4,2,t,e)},useMemo:function(t,e){var n=mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CO.bind(null,Ze,t),[r.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:E1,useDebugValue:U0,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=E1(!1),e=t[0];return t=SO.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ze,o=mr();if(Qe){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),kt===null)throw Error(W(349));as&30||C2(r,e,n)}o.memoizedState=n;var i={value:n,getSnapshot:e};return o.queue=i,T1(T2.bind(null,r,i,t),[t]),r.flags|=2048,Cc(9,E2.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mr(),e=kt.identifierPrefix;if(Qe){var n=Qr,r=Yr;n=(r&~(1<<32-rr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=kc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NO={readContext:Bn,useCallback:A2,useContext:Bn,useEffect:V0,useImperativeHandle:P2,useInsertionEffect:O2,useLayoutEffect:j2,useMemo:D2,useReducer:nf,useRef:_2,useState:function(){return nf(Sc)},useDebugValue:U0,useDeferredValue:function(t){var e=Vn();return I2(e,mt.memoizedState,t)},useTransition:function(){var t=nf(Sc)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:k2,useSyncExternalStore:S2,useId:L2,unstable_isNewReconciler:!1},MO={readContext:Bn,useCallback:A2,useContext:Bn,useEffect:V0,useImperativeHandle:P2,useInsertionEffect:O2,useLayoutEffect:j2,useMemo:D2,useReducer:rf,useRef:_2,useState:function(){return rf(Sc)},useDebugValue:U0,useDeferredValue:function(t){var e=Vn();return mt===null?e.memoizedState=t:I2(e,mt.memoizedState,t)},useTransition:function(){var t=rf(Sc)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:k2,useSyncExternalStore:S2,useId:L2,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $h={isMounted:function(t){return(t=t._reactInternals)?ks(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),o=Xo(t),i=Zr(r,o);i.payload=e,n!=null&&(i.callback=n),e=Yo(t,i,o),e!==null&&(or(e,t,o,r),ad(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),o=Xo(t),i=Zr(r,o);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Yo(t,i,o),e!==null&&(or(e,t,o,r),ad(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=Xo(t),o=Zr(n,r);o.tag=2,e!=null&&(o.callback=e),e=Yo(t,o,r),e!==null&&(or(e,t,r,n),ad(e,t,r))}};function N1(t,e,n,r,o,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!gc(n,r)||!gc(o,i):!0}function B2(t,e,n){var r=!1,o=ci,i=e.contextType;return typeof i=="object"&&i!==null?i=Bn(i):(o=cn(e)?is:$t.current,r=e.contextTypes,i=(r=r!=null)?Oa(t,o):ci),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$h,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function M1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$h.enqueueReplaceState(e,e.state,null)}function Wm(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},D0(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=Bn(i):(i=cn(e)?is:$t.current,o.context=Oa(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Hm(t,e,i,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&$h.enqueueReplaceState(o,o.state,null),Ud(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Aa(t,e){try{var n="",r=e;do n+=n_(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function of(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _O=typeof WeakMap=="function"?WeakMap:Map;function V2(t,e,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jd||(Jd=!0,tg=r),qm(t,e)},n}function U2(t,e,n){n=Zr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){qm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qm(t,e),typeof r!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function _1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _O;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=UO.bind(null,t,e,n),e.then(t,t))}function O1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function j1(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zr(-1,1),e.tag=2,Yo(n,e,1))),n.lanes|=1),t)}var OO=po.ReactCurrentOwner,an=!1;function Wt(t,e,n,r){e.child=t===null?v2(e,null,n,r):Ra(e,t.child,n,r)}function R1(t,e,n,r,o){n=n.render;var i=e.ref;return va(e,o),r=F0(t,e,n,r,i,o),n=B0(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,so(t,e,o)):(Qe&&n&&M0(e),e.flags|=1,Wt(t,e,r,o),e.child)}function P1(t,e,n,r,o){if(t===null){var i=n.type;return typeof i=="function"&&!Q0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,H2(t,e,i,r,o)):(t=pd(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:gc,n(s,r)&&t.ref===e.ref)return so(t,e,o)}return e.flags|=1,t=Zo(i,r),t.ref=e.ref,t.return=e,e.child=t}function H2(t,e,n,r,o){if(t!==null){var i=t.memoizedProps;if(gc(i,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=i,(t.lanes&o)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,so(t,e,o)}return Km(t,e,n,r,o)}function W2(t,e,n){var r=e.pendingProps,o=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(ua,yn),yn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(ua,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,He(ua,yn),yn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,He(ua,yn),yn|=r;return Wt(t,e,o,n),e.child}function q2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Km(t,e,n,r,o){var i=cn(n)?is:$t.current;return i=Oa(e,i),va(e,o),n=F0(t,e,n,r,i,o),r=B0(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,so(t,e,o)):(Qe&&r&&M0(e),e.flags|=1,Wt(t,e,n,o),e.child)}function A1(t,e,n,r,o){if(cn(n)){var i=!0;zd(e)}else i=!1;if(va(e,o),e.stateNode===null)ud(t,e),B2(e,n,r),Wm(e,n,r,o),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Bn(c):(c=cn(n)?is:$t.current,c=Oa(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&M1(e,s,r,c),Oo=!1;var h=e.memoizedState;s.state=h,Ud(e,r,s,o),l=e.memoizedState,a!==r||h!==l||ln.current||Oo?(typeof u=="function"&&(Hm(e,n,u,r),l=e.memoizedState),(a=Oo||N1(e,n,a,r,h,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,w2(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Yn(e.type,a),s.props=c,d=e.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Bn(l):(l=cn(n)?is:$t.current,l=Oa(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==l)&&M1(e,s,r,l),Oo=!1,h=e.memoizedState,s.state=h,Ud(e,r,s,o);var f=e.memoizedState;a!==d||h!==f||ln.current||Oo?(typeof p=="function"&&(Hm(e,n,p,r),f=e.memoizedState),(c=Oo||N1(e,n,c,r,h,f,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,f,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,f,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Jm(t,e,n,r,i,o)}function Jm(t,e,n,r,o,i){q2(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return o&&b1(e,n,!1),so(t,e,i);r=e.stateNode,OO.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ra(e,t.child,null,i),e.child=Ra(e,null,a,i)):Wt(t,e,a,i),e.memoizedState=r.state,o&&b1(e,n,!0),e.child}function K2(t){var e=t.stateNode;e.pendingContext?v1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&v1(t,e.context,!1),I0(t,e.containerInfo)}function D1(t,e,n,r,o){return ja(),O0(o),e.flags|=256,Wt(t,e,n,r),e.child}var Gm={dehydrated:null,treeContext:null,retryLane:0};function Ym(t){return{baseLanes:t,cachePool:null,transitions:null}}function J2(t,e,n){var r=e.pendingProps,o=Xe.current,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),He(Xe,o&1),t===null)return Vm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,i?(r=e.mode,i=e.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Vh(s,r,0,null),t=Yi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ym(n),e.memoizedState=Gm,t):H0(e,s));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return jO(t,e,s,r,a,o,n);if(i){i=r.fallback,s=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Zo(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=Zo(a,i):(i=Yi(i,s,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,s=t.child.memoizedState,s=s===null?Ym(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=Gm,r}return i=t.child,t=i.sibling,r=Zo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function H0(t,e){return e=Vh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nu(t,e,n,r){return r!==null&&O0(r),Ra(e,t.child,null,n),t=H0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jO(t,e,n,r,o,i,s){if(n)return e.flags&256?(e.flags&=-257,r=of(Error(W(422))),Nu(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=Vh({mode:"visible",children:r.children},o,0,null),i=Yi(i,o,s,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ra(e,t.child,null,s),e.child.memoizedState=Ym(s),e.memoizedState=Gm,i);if(!(e.mode&1))return Nu(t,e,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(W(419)),r=of(i,r,void 0),Nu(t,e,s,r)}if(a=(s&t.childLanes)!==0,an||a){if(r=kt,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,io(t,o),or(r,t,o,-1))}return Y0(),r=of(Error(W(421))),Nu(t,e,s,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=HO.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,wn=Go(o.nextSibling),xn=e,Qe=!0,Zn=null,t!==null&&(Rn[Pn++]=Yr,Rn[Pn++]=Qr,Rn[Pn++]=ss,Yr=t.id,Qr=t.overflow,ss=e),e=H0(e,r.children),e.flags|=4096,e)}function I1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Um(t.return,e,n)}function sf(t,e,n,r,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function G2(t,e,n){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(Wt(t,e,r.children,n),r=Xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&I1(t,n,e);else if(t.tag===19)I1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(Xe,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Hd(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),sf(e,!1,o,n,i);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Hd(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}sf(e,!0,n,null,i);break;case"together":sf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ud(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function so(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Zo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RO(t,e,n){switch(e.tag){case 3:K2(e),ja();break;case 5:x2(e);break;case 1:cn(e.type)&&zd(e);break;case 4:I0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;He(Bd,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(Xe,Xe.current&1),e.flags|=128,null):n&e.child.childLanes?J2(t,e,n):(He(Xe,Xe.current&1),t=so(t,e,n),t!==null?t.sibling:null);He(Xe,Xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return G2(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),He(Xe,Xe.current),r)break;return null;case 22:case 23:return e.lanes=0,W2(t,e,n)}return so(t,e,n)}var Y2,Qm,Q2,X2;Y2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qm=function(){};Q2=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Bi(Cr.current);var i=null;switch(n){case"input":o=bm(t,o),r=bm(t,r),i=[];break;case"select":o=et({},o,{value:void 0}),r=et({},r,{value:void 0}),i=[];break;case"textarea":o=km(t,o),r=km(t,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Id)}Cm(n,r);var s;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(cc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(cc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};X2=function(t,e,n,r){n!==r&&(e.flags|=4)};function hl(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function PO(t,e,n){var r=e.pendingProps;switch(_0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return cn(e.type)&&Ld(),Dt(e),null;case 3:return r=e.stateNode,Pa(),Je(ln),Je($t),z0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zn!==null&&(og(Zn),Zn=null))),Qm(t,e),Dt(e),null;case 5:L0(e);var o=Bi(xc.current);if(n=e.type,t!==null&&e.stateNode!=null)Q2(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Dt(e),null}if(t=Bi(Cr.current),Eu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[vr]=e,r[bc]=i,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(o=0;o<$l.length;o++)qe($l[o],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":Wv(r,i),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},qe("invalid",r);break;case"textarea":Kv(r,i),qe("invalid",r)}Cm(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Cu(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Cu(r.textContent,a,t),o=["children",""+a]):cc.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&qe("scroll",r)}switch(n){case"input":gu(r),qv(r,i,!0);break;case"textarea":gu(r),Jv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Id)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[vr]=e,t[bc]=r,Y2(t,e,!1,!1),e.stateNode=t;e:{switch(s=Em(n,r),n){case"dialog":qe("cancel",t),qe("close",t),o=r;break;case"iframe":case"object":case"embed":qe("load",t),o=r;break;case"video":case"audio":for(o=0;o<$l.length;o++)qe($l[o],t);o=r;break;case"source":qe("error",t),o=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),o=r;break;case"details":qe("toggle",t),o=r;break;case"input":Wv(t,r),o=bm(t,r),qe("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=et({},r,{value:void 0}),qe("invalid",t);break;case"textarea":Kv(t,r),o=km(t,r),qe("invalid",t);break;default:o=r}Cm(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?_k(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Nk(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&uc(t,l):typeof l=="number"&&uc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(cc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&qe("scroll",t):l!=null&&f0(t,i,l,s))}switch(n){case"input":gu(t),qv(t,r,!1);break;case"textarea":gu(t),Jv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+li(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?fa(t,!!r.multiple,i,!1):r.defaultValue!=null&&fa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Id)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)X2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Bi(xc.current),Bi(Cr.current),Eu(e)){if(r=e.stateNode,n=e.memoizedProps,r[vr]=e,(i=r.nodeValue!==n)&&(t=xn,t!==null))switch(t.tag){case 3:Cu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vr]=e,e.stateNode=r}return Dt(e),null;case 13:if(Je(Xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&wn!==null&&e.mode&1&&!(e.flags&128))g2(),ja(),e.flags|=98560,i=!1;else if(i=Eu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[vr]=e}else ja(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else Zn!==null&&(og(Zn),Zn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Xe.current&1?vt===0&&(vt=3):Y0())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Pa(),Qm(t,e),t===null&&yc(e.stateNode.containerInfo),Dt(e),null;case 10:return P0(e.type._context),Dt(e),null;case 17:return cn(e.type)&&Ld(),Dt(e),null;case 19:if(Je(Xe),i=e.memoizedState,i===null)return Dt(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)hl(i,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Hd(t),s!==null){for(e.flags|=128,hl(i,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(Xe,Xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&lt()>Da&&(e.flags|=128,r=!0,hl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Hd(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Qe)return Dt(e),null}else 2*lt()-i.renderingStartTime>Da&&n!==1073741824&&(e.flags|=128,r=!0,hl(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=lt(),e.sibling=null,n=Xe.current,He(Xe,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return G0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function AO(t,e){switch(_0(e),e.tag){case 1:return cn(e.type)&&Ld(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pa(),Je(ln),Je($t),z0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return L0(e),null;case 13:if(Je(Xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));ja()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(Xe),null;case 4:return Pa(),null;case 10:return P0(e.type._context),null;case 22:case 23:return G0(),null;case 24:return null;default:return null}}var Mu=!1,Lt=!1,DO=typeof WeakSet=="function"?WeakSet:Set,ne=null;function ca(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function Z2(t,e,n){try{n()}catch(r){nt(t,e,r)}}var L1=!1;function IO(t,e){if(Dm=Pd,t=r2(),N0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var p;d!==n||o!==0&&d.nodeType!==3||(a=s+o),d!==i||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===n&&++c===o&&(a=s),h===i&&++u===r&&(l=s),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Im={focusedElem:t,selectionRange:n},Pd=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var g=f.memoizedProps,y=f.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?g:Yn(e.type,g),y);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(k){nt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return f=L1,L1=!1,f}function Xl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&Z2(e,n,i)}o=o.next}while(o!==r)}}function Fh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eS(t){var e=t.alternate;e!==null&&(t.alternate=null,eS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vr],delete e[bc],delete e[$m],delete e[vO],delete e[bO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tS(t){return t.tag===5||t.tag===3||t.tag===4}function z1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Id));else if(r!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}function eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}var Tt=null,Qn=!1;function wo(t,e,n){for(n=n.child;n!==null;)nS(t,e,n),n=n.sibling}function nS(t,e,n){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(Rh,n)}catch{}switch(n.tag){case 5:Lt||ca(n,e);case 6:var r=Tt,o=Qn;Tt=null,wo(t,e,n),Tt=r,Qn=o,Tt!==null&&(Qn?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(Qn?(t=Tt,n=n.stateNode,t.nodeType===8?Xp(t.parentNode,n):t.nodeType===1&&Xp(t,n),fc(t)):Xp(Tt,n.stateNode));break;case 4:r=Tt,o=Qn,Tt=n.stateNode.containerInfo,Qn=!0,wo(t,e,n),Tt=r,Qn=o;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Z2(n,e,s),o=o.next}while(o!==r)}wo(t,e,n);break;case 1:if(!Lt&&(ca(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){nt(n,e,a)}wo(t,e,n);break;case 21:wo(t,e,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,wo(t,e,n),Lt=r):wo(t,e,n);break;default:wo(t,e,n)}}function $1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DO),e.forEach(function(r){var o=WO.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Tt=a.stateNode,Qn=!1;break e;case 3:Tt=a.stateNode.containerInfo,Qn=!0;break e;case 4:Tt=a.stateNode.containerInfo,Qn=!0;break e}a=a.return}if(Tt===null)throw Error(W(160));nS(i,s,o),Tt=null,Qn=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){nt(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rS(e,t),e=e.sibling}function rS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),pr(t),r&4){try{Xl(3,t,t.return),Fh(3,t)}catch(g){nt(t,t.return,g)}try{Xl(5,t,t.return)}catch(g){nt(t,t.return,g)}}break;case 1:Kn(e,t),pr(t),r&512&&n!==null&&ca(n,n.return);break;case 5:if(Kn(e,t),pr(t),r&512&&n!==null&&ca(n,n.return),t.flags&32){var o=t.stateNode;try{uc(o,"")}catch(g){nt(t,t.return,g)}}if(r&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ck(o,i),Em(a,s);var c=Em(a,i);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?_k(o,d):u==="dangerouslySetInnerHTML"?Nk(o,d):u==="children"?uc(o,d):f0(o,u,d,c)}switch(a){case"input":wm(o,i);break;case"textarea":Ek(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?fa(o,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?fa(o,!!i.multiple,i.defaultValue,!0):fa(o,!!i.multiple,i.multiple?[]:"",!1))}o[bc]=i}catch(g){nt(t,t.return,g)}}break;case 6:if(Kn(e,t),pr(t),r&4){if(t.stateNode===null)throw Error(W(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(g){nt(t,t.return,g)}}break;case 3:if(Kn(e,t),pr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fc(e.containerInfo)}catch(g){nt(t,t.return,g)}break;case 4:Kn(e,t),pr(t);break;case 13:Kn(e,t),pr(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(K0=lt())),r&4&&$1(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(c=Lt)||u,Kn(e,t),Lt=c):Kn(e,t),pr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ne=t,u=t.child;u!==null;){for(d=ne=u;ne!==null;){switch(h=ne,p=h.child,h.tag){case 0:case 11:case 14:case 15:Xl(4,h,h.return);break;case 1:ca(h,h.return);var f=h.stateNode;if(typeof f.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(g){nt(r,n,g)}}break;case 5:ca(h,h.return);break;case 22:if(h.memoizedState!==null){B1(d);continue}}p!==null?(p.return=h,ne=p):B1(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{o=d.stateNode,c?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Mk("display",s))}catch(g){nt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){nt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Kn(e,t),pr(t),r&4&&$1(t);break;case 21:break;default:Kn(e,t),pr(t)}}function pr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tS(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(uc(o,""),r.flags&=-33);var i=z1(t);eg(t,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,a=z1(t);Zm(t,a,s);break;default:throw Error(W(161))}}catch(l){nt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LO(t,e,n){ne=t,oS(t)}function oS(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var o=ne,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Mu;if(!s){var a=o.alternate,l=a!==null&&a.memoizedState!==null||Lt;a=Mu;var c=Lt;if(Mu=s,(Lt=l)&&!c)for(ne=o;ne!==null;)s=ne,l=s.child,s.tag===22&&s.memoizedState!==null?V1(o):l!==null?(l.return=s,ne=l):V1(o);for(;i!==null;)ne=i,oS(i),i=i.sibling;ne=o,Mu=a,Lt=c}F1(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,ne=i):F1(t)}}function F1(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||Fh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&C1(e,i,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}C1(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&fc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Lt||e.flags&512&&Xm(e)}catch(h){nt(e,e.return,h)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function B1(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function V1(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fh(4,e)}catch(l){nt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(l){nt(e,o,l)}}var i=e.return;try{Xm(e)}catch(l){nt(e,i,l)}break;case 5:var s=e.return;try{Xm(e)}catch(l){nt(e,s,l)}}}catch(l){nt(e,e.return,l)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var zO=Math.ceil,Kd=po.ReactCurrentDispatcher,W0=po.ReactCurrentOwner,Ln=po.ReactCurrentBatchConfig,Pe=0,kt=null,dt=null,Ot=0,yn=0,ua=gi(0),vt=0,Ec=null,ls=0,Bh=0,q0=0,Zl=null,on=null,K0=0,Da=1/0,qr=null,Jd=!1,tg=null,Qo=null,_u=!1,Fo=null,Gd=0,ec=0,ng=null,dd=-1,hd=0;function Kt(){return Pe&6?lt():dd!==-1?dd:dd=lt()}function Xo(t){return t.mode&1?Pe&2&&Ot!==0?Ot&-Ot:xO.transition!==null?(hd===0&&(hd=Bk()),hd):(t=De,t!==0||(t=window.event,t=t===void 0?16:Jk(t.type)),t):1}function or(t,e,n,r){if(50<ec)throw ec=0,ng=null,Error(W(185));Jc(t,n,r),(!(Pe&2)||t!==kt)&&(t===kt&&(!(Pe&2)&&(Bh|=n),vt===4&&Do(t,Ot)),un(t,r),n===1&&Pe===0&&!(e.mode&1)&&(Da=lt()+500,Lh&&yi()))}function un(t,e){var n=t.callbackNode;x_(t,e);var r=Rd(t,t===kt?Ot:0);if(r===0)n!==null&&Qv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qv(n),e===1)t.tag===0?wO(U1.bind(null,t)):p2(U1.bind(null,t)),gO(function(){!(Pe&6)&&yi()}),n=null;else{switch(Vk(r)){case 1:n=b0;break;case 4:n=$k;break;case 16:n=jd;break;case 536870912:n=Fk;break;default:n=jd}n=hS(n,iS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iS(t,e){if(dd=-1,hd=0,Pe&6)throw Error(W(327));var n=t.callbackNode;if(ba()&&t.callbackNode!==n)return null;var r=Rd(t,t===kt?Ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yd(t,r);else{e=r;var o=Pe;Pe|=2;var i=aS();(kt!==t||Ot!==e)&&(qr=null,Da=lt()+500,Gi(t,e));do try{BO();break}catch(a){sS(t,a)}while(!0);R0(),Kd.current=i,Pe=o,dt!==null?e=0:(kt=null,Ot=0,e=vt)}if(e!==0){if(e===2&&(o=Om(t),o!==0&&(r=o,e=rg(t,o))),e===1)throw n=Ec,Gi(t,0),Do(t,r),un(t,lt()),n;if(e===6)Do(t,r);else{if(o=t.current.alternate,!(r&30)&&!$O(o)&&(e=Yd(t,r),e===2&&(i=Om(t),i!==0&&(r=i,e=rg(t,i))),e===1))throw n=Ec,Gi(t,0),Do(t,r),un(t,lt()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Ai(t,on,qr);break;case 3:if(Do(t,r),(r&130023424)===r&&(e=K0+500-lt(),10<e)){if(Rd(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=zm(Ai.bind(null,t,on,qr),e);break}Ai(t,on,qr);break;case 4:if(Do(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var s=31-rr(r);i=1<<s,s=e[s],s>o&&(o=s),r&=~i}if(r=o,r=lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zO(r/1960))-r,10<r){t.timeoutHandle=zm(Ai.bind(null,t,on,qr),r);break}Ai(t,on,qr);break;case 5:Ai(t,on,qr);break;default:throw Error(W(329))}}}return un(t,lt()),t.callbackNode===n?iS.bind(null,t):null}function rg(t,e){var n=Zl;return t.current.memoizedState.isDehydrated&&(Gi(t,e).flags|=256),t=Yd(t,e),t!==2&&(e=on,on=n,e!==null&&og(e)),t}function og(t){on===null?on=t:on.push.apply(on,t)}function $O(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Do(t,e){for(e&=~q0,e&=~Bh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rr(e),r=1<<n;t[n]=-1,e&=~r}}function U1(t){if(Pe&6)throw Error(W(327));ba();var e=Rd(t,0);if(!(e&1))return un(t,lt()),null;var n=Yd(t,e);if(t.tag!==0&&n===2){var r=Om(t);r!==0&&(e=r,n=rg(t,r))}if(n===1)throw n=Ec,Gi(t,0),Do(t,e),un(t,lt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ai(t,on,qr),un(t,lt()),null}function J0(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(Da=lt()+500,Lh&&yi())}}function cs(t){Fo!==null&&Fo.tag===0&&!(Pe&6)&&ba();var e=Pe;Pe|=1;var n=Ln.transition,r=De;try{if(Ln.transition=null,De=1,t)return t()}finally{De=r,Ln.transition=n,Pe=e,!(Pe&6)&&yi()}}function G0(){yn=ua.current,Je(ua)}function Gi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mO(n)),dt!==null)for(n=dt.return;n!==null;){var r=n;switch(_0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ld();break;case 3:Pa(),Je(ln),Je($t),z0();break;case 5:L0(r);break;case 4:Pa();break;case 13:Je(Xe);break;case 19:Je(Xe);break;case 10:P0(r.type._context);break;case 22:case 23:G0()}n=n.return}if(kt=t,dt=t=Zo(t.current,null),Ot=yn=e,vt=0,Ec=null,q0=Bh=ls=0,on=Zl=null,Fi!==null){for(e=0;e<Fi.length;e++)if(n=Fi[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}Fi=null}return t}function sS(t,e){do{var n=dt;try{if(R0(),ld.current=qd,Wd){for(var r=Ze.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Wd=!1}if(as=0,wt=mt=Ze=null,Ql=!1,kc=0,W0.current=null,n===null||n.return===null){vt=1,Ec=e,dt=null;break}e:{var i=t,s=n.return,a=n,l=e;if(e=Ot,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=O1(s);if(p!==null){p.flags&=-257,j1(p,s,a,i,e),p.mode&1&&_1(i,c,e),e=p,l=c;var f=e.updateQueue;if(f===null){var g=new Set;g.add(l),e.updateQueue=g}else f.add(l);break e}else{if(!(e&1)){_1(i,c,e),Y0();break e}l=Error(W(426))}}else if(Qe&&a.mode&1){var y=O1(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),j1(y,s,a,i,e),O0(Aa(l,a));break e}}i=l=Aa(l,a),vt!==4&&(vt=2),Zl===null?Zl=[i]:Zl.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=V2(i,l,e);S1(i,b);break e;case 1:a=l;var w=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Qo===null||!Qo.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=U2(i,a,e);S1(i,k);break e}}i=i.return}while(i!==null)}cS(n)}catch(S){e=S,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(!0)}function aS(){var t=Kd.current;return Kd.current=qd,t===null?qd:t}function Y0(){(vt===0||vt===3||vt===2)&&(vt=4),kt===null||!(ls&268435455)&&!(Bh&268435455)||Do(kt,Ot)}function Yd(t,e){var n=Pe;Pe|=2;var r=aS();(kt!==t||Ot!==e)&&(qr=null,Gi(t,e));do try{FO();break}catch(o){sS(t,o)}while(!0);if(R0(),Pe=n,Kd.current=r,dt!==null)throw Error(W(261));return kt=null,Ot=0,vt}function FO(){for(;dt!==null;)lS(dt)}function BO(){for(;dt!==null&&!h_();)lS(dt)}function lS(t){var e=dS(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?cS(t):dt=e,W0.current=null}function cS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AO(n,e),n!==null){n.flags&=32767,dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,dt=null;return}}else if(n=PO(n,e,yn),n!==null){dt=n;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);vt===0&&(vt=5)}function Ai(t,e,n){var r=De,o=Ln.transition;try{Ln.transition=null,De=1,VO(t,e,n,r)}finally{Ln.transition=o,De=r}return null}function VO(t,e,n,r){do ba();while(Fo!==null);if(Pe&6)throw Error(W(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(k_(t,i),t===kt&&(dt=kt=null,Ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_u||(_u=!0,hS(jd,function(){return ba(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ln.transition,Ln.transition=null;var s=De;De=1;var a=Pe;Pe|=4,W0.current=null,IO(t,n),rS(n,t),lO(Im),Pd=!!Dm,Im=Dm=null,t.current=n,LO(n),p_(),Pe=a,De=s,Ln.transition=i}else t.current=n;if(_u&&(_u=!1,Fo=t,Gd=o),i=t.pendingLanes,i===0&&(Qo=null),g_(n.stateNode),un(t,lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Jd)throw Jd=!1,t=tg,tg=null,t;return Gd&1&&t.tag!==0&&ba(),i=t.pendingLanes,i&1?t===ng?ec++:(ec=0,ng=t):ec=0,yi(),null}function ba(){if(Fo!==null){var t=Vk(Gd),e=Ln.transition,n=De;try{if(Ln.transition=null,De=16>t?16:t,Fo===null)var r=!1;else{if(t=Fo,Fo=null,Gd=0,Pe&6)throw Error(W(331));var o=Pe;for(Pe|=4,ne=t.current;ne!==null;){var i=ne,s=i.child;if(ne.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ne=c;ne!==null;){var u=ne;switch(u.tag){case 0:case 11:case 15:Xl(8,u,i)}var d=u.child;if(d!==null)d.return=u,ne=d;else for(;ne!==null;){u=ne;var h=u.sibling,p=u.return;if(eS(u),u===c){ne=null;break}if(h!==null){h.return=p,ne=h;break}ne=p}}}var f=i.alternate;if(f!==null){var g=f.child;if(g!==null){f.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}ne=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,ne=s;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xl(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ne=b;break e}ne=i.return}}var w=t.current;for(ne=w;ne!==null;){s=ne;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,ne=x;else e:for(s=w;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fh(9,a)}}catch(S){nt(a,a.return,S)}if(a===s){ne=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,ne=k;break e}ne=a.return}}if(Pe=o,yi(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(Rh,t)}catch{}r=!0}return r}finally{De=n,Ln.transition=e}}return!1}function H1(t,e,n){e=Aa(n,e),e=V2(t,e,1),t=Yo(t,e,1),e=Kt(),t!==null&&(Jc(t,1,e),un(t,e))}function nt(t,e,n){if(t.tag===3)H1(t,t,n);else for(;e!==null;){if(e.tag===3){H1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qo===null||!Qo.has(r))){t=Aa(n,t),t=U2(e,t,1),e=Yo(e,t,1),t=Kt(),e!==null&&(Jc(e,1,t),un(e,t));break}}e=e.return}}function UO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,kt===t&&(Ot&n)===n&&(vt===4||vt===3&&(Ot&130023424)===Ot&&500>lt()-K0?Gi(t,0):q0|=n),un(t,e)}function uS(t,e){e===0&&(t.mode&1?(e=bu,bu<<=1,!(bu&130023424)&&(bu=4194304)):e=1);var n=Kt();t=io(t,e),t!==null&&(Jc(t,e,n),un(t,n))}function HO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uS(t,n)}function WO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),uS(t,n)}var dS;dS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ln.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,RO(t,e,n);an=!!(t.flags&131072)}else an=!1,Qe&&e.flags&1048576&&f2(e,Fd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ud(t,e),t=e.pendingProps;var o=Oa(e,$t.current);va(e,n),o=F0(null,e,r,t,o,n);var i=B0();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(r)?(i=!0,zd(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,D0(e),o.updater=$h,e.stateNode=o,o._reactInternals=e,Wm(e,r,t,n),e=Jm(null,e,r,!0,i,n)):(e.tag=0,Qe&&i&&M0(e),Wt(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ud(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=KO(r),t=Yn(r,t),o){case 0:e=Km(null,e,r,t,n);break e;case 1:e=A1(null,e,r,t,n);break e;case 11:e=R1(null,e,r,t,n);break e;case 14:e=P1(null,e,r,Yn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Yn(r,o),Km(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Yn(r,o),A1(t,e,r,o,n);case 3:e:{if(K2(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,o=i.element,w2(t,e),Ud(e,r,null,n);var s=e.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=Aa(Error(W(423)),e),e=D1(t,e,r,n,o);break e}else if(r!==o){o=Aa(Error(W(424)),e),e=D1(t,e,r,n,o);break e}else for(wn=Go(e.stateNode.containerInfo.firstChild),xn=e,Qe=!0,Zn=null,n=v2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ja(),r===o){e=so(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return x2(e),t===null&&Vm(e),r=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,s=o.children,Lm(r,o)?s=null:i!==null&&Lm(r,i)&&(e.flags|=32),q2(t,e),Wt(t,e,s,n),e.child;case 6:return t===null&&Vm(e),null;case 13:return J2(t,e,n);case 4:return I0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ra(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Yn(r,o),R1(t,e,r,o,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,He(Bd,r._currentValue),r._currentValue=s,i!==null)if(sr(i.value,s)){if(i.children===o.children&&!ln.current){e=so(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Zr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Um(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(W(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Um(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Wt(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,va(e,n),o=Bn(o),r=r(o),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,o=Yn(r,e.pendingProps),o=Yn(r.type,o),P1(t,e,r,o,n);case 15:return H2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Yn(r,o),ud(t,e),e.tag=1,cn(r)?(t=!0,zd(e)):t=!1,va(e,n),B2(e,r,o),Wm(e,r,o,n),Jm(null,e,r,!0,t,n);case 19:return G2(t,e,n);case 22:return W2(t,e,n)}throw Error(W(156,e.tag))};function hS(t,e){return zk(t,e)}function qO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,r){return new qO(t,e,n,r)}function Q0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KO(t){if(typeof t=="function")return Q0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===g0)return 11;if(t===y0)return 14}return 2}function Zo(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pd(t,e,n,r,o,i){var s=2;if(r=t,typeof t=="function")Q0(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ea:return Yi(n.children,o,i,e);case m0:s=8,o|=8;break;case mm:return t=Dn(12,n,e,o|2),t.elementType=mm,t.lanes=i,t;case gm:return t=Dn(13,n,e,o),t.elementType=gm,t.lanes=i,t;case ym:return t=Dn(19,n,e,o),t.elementType=ym,t.lanes=i,t;case xk:return Vh(n,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bk:s=10;break e;case wk:s=9;break e;case g0:s=11;break e;case y0:s=14;break e;case _o:s=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Dn(s,n,e,o),e.elementType=t,e.type=r,e.lanes=i,e}function Yi(t,e,n,r){return t=Dn(7,t,r,e),t.lanes=n,t}function Vh(t,e,n,r){return t=Dn(22,t,r,e),t.elementType=xk,t.lanes=n,t.stateNode={isHidden:!1},t}function af(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function lf(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JO(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bp(0),this.expirationTimes=Bp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bp(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function X0(t,e,n,r,o,i,s,a,l){return t=new JO(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Dn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},D0(i),t}function GO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pS(t){if(!t)return ci;t=t._reactInternals;e:{if(ks(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(cn(n))return h2(t,n,e)}return e}function fS(t,e,n,r,o,i,s,a,l){return t=X0(n,r,!0,t,o,i,s,a,l),t.context=pS(null),n=t.current,r=Kt(),o=Xo(n),i=Zr(r,o),i.callback=e??null,Yo(n,i,o),t.current.lanes=o,Jc(t,o,r),un(t,r),t}function Uh(t,e,n,r){var o=e.current,i=Kt(),s=Xo(o);return n=pS(n),e.context===null?e.context=n:e.pendingContext=n,e=Zr(i,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yo(o,e,s),t!==null&&(or(t,o,s,i),ad(t,o,s)),s}function Qd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Z0(t,e){W1(t,e),(t=t.alternate)&&W1(t,e)}function YO(){return null}var mS=typeof reportError=="function"?reportError:function(t){console.error(t)};function ey(t){this._internalRoot=t}Hh.prototype.render=ey.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Uh(t,e,null,null)};Hh.prototype.unmount=ey.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cs(function(){Uh(null,t,null,null)}),e[oo]=null}};function Hh(t){this._internalRoot=t}Hh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ao.length&&e!==0&&e<Ao[n].priority;n++);Ao.splice(n,0,t),n===0&&Kk(t)}};function ty(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function q1(){}function QO(t,e,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var c=Qd(s);i.call(c)}}var s=fS(e,r,t,0,null,!1,!1,"",q1);return t._reactRootContainer=s,t[oo]=s.current,yc(t.nodeType===8?t.parentNode:t),cs(),s}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=Qd(l);a.call(c)}}var l=X0(t,0,!1,null,null,!1,!1,"",q1);return t._reactRootContainer=l,t[oo]=l.current,yc(t.nodeType===8?t.parentNode:t),cs(function(){Uh(e,l,n,r)}),l}function qh(t,e,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var l=Qd(s);a.call(l)}}Uh(e,s,t,o)}else s=QO(n,e,t,o,r);return Qd(s)}Uk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zl(e.pendingLanes);n!==0&&(w0(e,n|1),un(e,lt()),!(Pe&6)&&(Da=lt()+500,yi()))}break;case 13:cs(function(){var r=io(t,1);if(r!==null){var o=Kt();or(r,t,1,o)}}),Z0(t,1)}};x0=function(t){if(t.tag===13){var e=io(t,134217728);if(e!==null){var n=Kt();or(e,t,134217728,n)}Z0(t,134217728)}};Hk=function(t){if(t.tag===13){var e=Xo(t),n=io(t,e);if(n!==null){var r=Kt();or(n,t,e,r)}Z0(t,e)}};Wk=function(){return De};qk=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};Nm=function(t,e,n){switch(e){case"input":if(wm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=Ih(r);if(!o)throw Error(W(90));Sk(r),wm(r,o)}}}break;case"textarea":Ek(t,n);break;case"select":e=n.value,e!=null&&fa(t,!!n.multiple,e,!1)}};Rk=J0;Pk=cs;var XO={usingClientEntryPoint:!1,Events:[Yc,oa,Ih,Ok,jk,J0]},pl={findFiberByHostInstance:$i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZO={bundleType:pl.bundleType,version:pl.version,rendererPackageName:pl.rendererPackageName,rendererConfig:pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:po.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ik(t),t===null?null:t.stateNode},findFiberByHostInstance:pl.findFiberByHostInstance||YO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{Rh=Ou.inject(ZO),Sr=Ou}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XO;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ty(e))throw Error(W(200));return GO(t,e,null,n)};Cn.createRoot=function(t,e){if(!ty(t))throw Error(W(299));var n=!1,r="",o=mS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=X0(t,1,!1,null,null,n,!1,r,o),t[oo]=e.current,yc(t.nodeType===8?t.parentNode:t),new ey(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=Ik(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return cs(t)};Cn.hydrate=function(t,e,n){if(!Wh(e))throw Error(W(200));return qh(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!ty(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=mS;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=fS(e,null,t,1,n??null,o,!1,i,s),t[oo]=e.current,yc(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Hh(e)};Cn.render=function(t,e,n){if(!Wh(e))throw Error(W(200));return qh(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!Wh(t))throw Error(W(40));return t._reactRootContainer?(cs(function(){qh(null,null,t,!1,function(){t._reactRootContainer=null,t[oo]=null})}),!0):!1};Cn.unstable_batchedUpdates=J0;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wh(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return qh(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function gS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gS)}catch(t){console.error(t)}}gS(),mk.exports=Cn;var Xc=mk.exports;const ny=nk(Xc);var yS,K1=Xc;yS=K1.createRoot,K1.hydrateRoot;/**
* @remix-run/router v1.21.0
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tc.apply(this,arguments)}var Bo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Bo||(Bo={}));const J1="popstate";function e5(t){t===void 0&&(t={});function e(r,o){let{pathname:i,search:s,hash:a}=r.location;return ig("",{pathname:i,search:s,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:bS(o)}return n5(e,n,null,t)}function pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function t5(){return Math.random().toString(36).substr(2,8)}function G1(t,e){return{usr:t.state,key:t.key,idx:e}}function ig(t,e,n,r){return n===void 0&&(n=null),Tc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ya(e):e,{state:n,key:e&&e.key||r||t5()})}function bS(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ya(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function n5(t,e,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,s=o.history,a=Bo.Pop,l=null,c=u();c==null&&(c=0,s.replaceState(Tc({},s.state,{idx:c}),""));function u(){return(s.state||{idx:null}).idx}function d(){a=Bo.Pop;let y=u(),b=y==null?null:y-c;c=y,l&&l({action:a,location:g.location,delta:b})}function h(y,b){a=Bo.Push;let w=ig(g.location,y,b);c=u()+1;let x=G1(w,c),k=g.createHref(w);try{s.pushState(x,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;o.location.assign(k)}i&&l&&l({action:a,location:g.location,delta:1})}function p(y,b){a=Bo.Replace;let w=ig(g.location,y,b);c=u();let x=G1(w,c),k=g.createHref(w);s.replaceState(x,"",k),i&&l&&l({action:a,location:g.location,delta:0})}function f(y){let b=o.location.origin!=="null"?o.location.origin:o.location.href,w=typeof y=="string"?y:bS(y);return w=w.replace(/ $/,"%20"),pt(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let g={get action(){return a},get location(){return t(o,s)},listen(y){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(J1,d),l=y,()=>{o.removeEventListener(J1,d),l=null}},createHref(y){return e(o,y)},createURL:f,encodeLocation(y){let b=f(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:p,go(y){return s.go(y)}};return g}var Y1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Y1||(Y1={}));function r5(t,e,n){return n===void 0&&(n="/"),o5(t,e,n,!1)}function o5(t,e,n,r){let o=typeof e=="string"?Ya(e):e,i=kS(o.pathname||"/",n);if(i==null)return null;let s=wS(t);i5(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let c=g5(i);a=f5(s[l],c,r)}return a}function wS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(i,s,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};l.relativePath.startsWith("/")&&(pt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Qi([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(pt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),wS(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:h5(c,i.index),routesMeta:u})};return t.forEach((i,s)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))o(i,s);else for(let l of xS(i.path))o(i,s,l)}),e}function xS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return o?[i,""]:[i];let s=xS(r.join("/")),a=[];return a.push(...s.map(l=>l===""?i:[i,l].join("/"))),o&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function i5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:p5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const s5=/^:[\w-]+$/,a5=3,l5=2,c5=1,u5=10,d5=-2,Q1=t=>t==="*";function h5(t,e){let n=t.split("/"),r=n.length;return n.some(Q1)&&(r+=d5),e&&(r+=l5),n.filter(o=>!Q1(o)).reduce((o,i)=>o+(s5.test(i)?a5:i===""?c5:u5),r)}function p5(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function f5(t,e,n){let{routesMeta:r}=t,o={},i="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=X1({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=X1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(o,d.params),s.push({params:o,pathname:Qi([i,d.pathname]),pathnameBase:w5(Qi([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Qi([i,d.pathnameBase]))}return s}function X1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=m5(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let i=o[0],s=i.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((l,c,u)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let f=a[u]||"";s=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}const p=a[u];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:s,pattern:t}}function m5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,s,a)=>(r.push({paramName:s,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function g5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function y5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?Ya(t):t;return{pathname:n?n.startsWith("/")?n:v5(n,e):e,search:x5(r),hash:k5(o)}}function v5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function cf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function b5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function SS(t,e){let n=b5(t);return e?n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function CS(t,e,n,r){r===void 0&&(r=!1);let o;typeof t=="string"?o=Ya(t):(o=Tc({},t),pt(!o.pathname||!o.pathname.includes("?"),cf("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),cf("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),cf("#","search","hash",o)));let i=t===""||o.pathname==="",s=i?"/":o.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),d-=1;o.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=y5(o,a),c=s&&s!=="/"&&s.endsWith("/"),u=(i||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Qi=t=>t.join("/").replace(/\/\/+/g,"/"),w5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),x5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,k5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function S5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ES=["post","put","patch","delete"];new Set(ES);const C5=["get",...ES];new Set(C5);/**
* React Router v6.28.0
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nc.apply(this,arguments)}const ry=v.createContext(null),E5=v.createContext(null),Zc=v.createContext(null),Kh=v.createContext(null),Ss=v.createContext({outlet:null,matches:[],isDataRoute:!1}),TS=v.createContext(null);function eu(){return v.useContext(Kh)!=null}function oy(){return eu()||pt(!1),v.useContext(Kh).location}function NS(t){v.useContext(Zc).static||v.useLayoutEffect(t)}function Jh(){let{isDataRoute:t}=v.useContext(Ss);return t?z5():T5()}function T5(){eu()||pt(!1);let t=v.useContext(ry),{basename:e,future:n,navigator:r}=v.useContext(Zc),{matches:o}=v.useContext(Ss),{pathname:i}=oy(),s=JSON.stringify(SS(o,n.v7_relativeSplatPath)),a=v.useRef(!1);return NS(()=>{a.current=!0}),v.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let u=CS(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Qi([e,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[e,r,s,i,t])}function N5(t,e){return M5(t,e)}function M5(t,e,n,r){eu()||pt(!1);let{navigator:o}=v.useContext(Zc),{matches:i}=v.useContext(Ss),s=i[i.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=oy(),u;if(e){var d;let y=typeof e=="string"?Ya(e):e;l==="/"||(d=y.pathname)!=null&&d.startsWith(l)||pt(!1),u=y}else u=c;let h=u.pathname||"/",p=h;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let f=r5(t,{pathname:p}),g=P5(f&&f.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Qi([l,o.encodeLocation?o.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Qi([l,o.encodeLocation?o.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?v.createElement(Kh.Provider,{value:{location:Nc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Bo.Pop}},g):g}function _5(){let t=L5(),e=S5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:r},n):null,null)}const O5=v.createElement(_5,null);class j5 extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?v.createElement(Ss.Provider,{value:this.props.routeContext},v.createElement(TS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function R5(t){let{routeContext:e,match:n,children:r}=t,o=v.useContext(ry);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(Ss.Provider,{value:e},r)}function P5(t,e,n,r){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=(o=n)==null?void 0:o.errors;if(a!=null){let u=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||pt(!1),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=n,f=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||f){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let p,f=!1,g=null,y=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||O5,l&&(c<0&&h===0?(f=!0,y=null):c===h&&(f=!0,y=d.route.hydrateFallbackElement||null)));let b=e.concat(s.slice(0,h+1)),w=()=>{let x;return p?x=g:f?x=y:d.route.Component?x=v.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=u,v.createElement(R5,{match:d,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?v.createElement(j5,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var MS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(MS||{}),Xd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Xd||{});function A5(t){let e=v.useContext(ry);return e||pt(!1),e}function D5(t){let e=v.useContext(E5);return e||pt(!1),e}function I5(t){let e=v.useContext(Ss);return e||pt(!1),e}function _S(t){let e=I5(),n=e.matches[e.matches.length-1];return n.route.id||pt(!1),n.route.id}function L5(){var t;let e=v.useContext(TS),n=D5(Xd.UseRouteError),r=_S(Xd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function z5(){let{router:t}=A5(MS.UseNavigateStable),e=_S(Xd.UseNavigateStable),n=v.useRef(!1);return NS(()=>{n.current=!0}),v.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Nc({fromRouteId:e},o)))},[t,e])}const Z1={};function $5(t,e){Z1[e]||(Z1[e]=!0,console.warn(e))}const eb=(t,e,n)=>$5(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function F5(t,e){t!=null&&t.v7_startTransition||eb("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&eb("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function OS(t){let{to:e,replace:n,state:r,relative:o}=t;eu()||pt(!1);let{future:i,static:s}=v.useContext(Zc),{matches:a}=v.useContext(Ss),{pathname:l}=oy(),c=Jh(),u=CS(e,SS(a,i.v7_relativeSplatPath),l,o==="path"),d=JSON.stringify(u);return v.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:o}),[c,d,o,n,r]),null}function fd(t){pt(!1)}function B5(t){let{basename:e="/",children:n=null,location:r,navigationType:o=Bo.Pop,navigator:i,static:s=!1,future:a}=t;eu()&&pt(!1);let l=e.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:l,navigator:i,static:s,future:Nc({v7_relativeSplatPath:!1},a)}),[l,a,i,s]);typeof r=="string"&&(r=Ya(r));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:f="default"}=r,g=v.useMemo(()=>{let y=kS(u,l);return y==null?null:{location:{pathname:y,search:d,hash:h,state:p,key:f},navigationType:o}},[l,u,d,h,p,f,o]);return g==null?null:v.createElement(Zc.Provider,{value:c},v.createElement(Kh.Provider,{children:n,value:g}))}function V5(t){let{children:e,location:n}=t;return N5(sg(e),n)}new Promise(()=>{});function sg(t,e){e===void 0&&(e=[]);let n=[];return v.Children.forEach(t,(r,o)=>{if(!v.isValidElement(r))return;let i=[...e,o];if(r.type===v.Fragment){n.push.apply(n,sg(r.props.children,i));return}r.type!==fd&&pt(!1),!r.props.index||!r.props.children||pt(!1);let s={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=sg(r.props.children,i)),n.push(s)}),n}/**
* React Router DOM v6.28.0
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/const U5="6";try{window.__reactRouterVersion=U5}catch{}const H5="startTransition",tb=pk[H5];function W5(t){let{basename:e,children:n,future:r,window:o}=t,i=v.useRef();i.current==null&&(i.current=e5({window:o,v5Compat:!0}));let s=i.current,[a,l]=v.useState({action:s.action,location:s.location}),{v7_startTransition:c}=r||{},u=v.useCallback(d=>{c&&tb?tb(()=>l(d)):l(d)},[l,c]);return v.useLayoutEffect(()=>s.listen(u),[s,u]),v.useEffect(()=>F5(r),[r]),v.createElement(B5,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s,future:r})}var nb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(nb||(nb={}));var rb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rb||(rb={}));const q5=1,K5=1e6;let uf=0;function J5(){return uf=(uf+1)%Number.MAX_SAFE_INTEGER,uf.toString()}const df=new Map,ob=t=>{if(df.has(t))return;const e=setTimeout(()=>{df.delete(t),tc({type:"REMOVE_TOAST",toastId:t})},K5);df.set(t,e)},G5=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,q5)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?ob(n):t.toasts.forEach(r=>{ob(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},md=[];let gd={toasts:[]};function tc(t){gd=G5(gd,t),md.forEach(e=>{e(gd)})}function Y5({...t}){const e=J5(),n=o=>tc({type:"UPDATE_TOAST",toast:{...o,id:e}}),r=()=>tc({type:"DISMISS_TOAST",toastId:e});return tc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:o=>{o||r()}}}),{id:e,dismiss:r,update:n}}function Pr(){const[t,e]=v.useState(gd);return v.useEffect(()=>(md.push(e),()=>{const n=md.indexOf(e);n>-1&&md.splice(n,1)}),[t]),{...t,toast:Y5,dismiss:n=>tc({type:"DISMISS_TOAST",toastId:n})}}function le(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function ib(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Gh(...t){return e=>{let n=!1;const r=t.map(o=>{const i=ib(o,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():ib(t[o],null)}}}}function $e(...t){return v.useCallback(Gh(...t),t)}function Q5(t,e){const n=v.createContext(e),r=i=>{const{children:s,...a}=i,l=v.useMemo(()=>a,Object.values(a));return m.jsx(n.Provider,{value:l,children:s})};r.displayName=t+"Provider";function o(i){const s=v.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,o]}function Tn(t,e=[]){let n=[];function r(i,s){const a=v.createContext(s),l=n.length;n=[...n,s];const c=d=>{var h;const{scope:p,children:f,...g}=d,y=((h=p==null?void 0:p[t])==null?void 0:h[l])||a,b=v.useMemo(()=>g,Object.values(g));return m.jsx(y.Provider,{value:b,children:f})};c.displayName=i+"Provider";function u(d,h){var p;const f=((p=h==null?void 0:h[t])==null?void 0:p[l])||a,g=v.useContext(f);if(g)return g;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const o=()=>{const i=n.map(s=>v.createContext(s));return function(s){const a=(s==null?void 0:s[t])||i;return v.useMemo(()=>({[`__scope${t}`]:{...s,[t]:a}}),[s,a])}};return o.scopeName=t,[r,X5(o,...e)]}function X5(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const i=r.reduce((s,{useScope:a,scopeName:l})=>{const c=a(o)[`__scope${l}`];return{...s,...c}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var us=v.forwardRef((t,e)=>{const{children:n,...r}=t,o=v.Children.toArray(n),i=o.find(ej);if(i){const s=i.props.children,a=o.map(l=>l===i?v.Children.count(s)>1?v.Children.only(null):v.isValidElement(s)?s.props.children:null:l);return m.jsx(ag,{...r,ref:e,children:v.isValidElement(s)?v.cloneElement(s,void 0,a):null})}return m.jsx(ag,{...r,ref:e,children:n})});us.displayName="Slot";var ag=v.forwardRef((t,e)=>{const{children:n,...r}=t;if(v.isValidElement(n)){const o=nj(n);return v.cloneElement(n,{...tj(r,n.props),ref:e?Gh(e,o):o})}return v.Children.count(n)>1?v.Children.only(null):null});ag.displayName="SlotClone";var Z5=({children:t})=>m.jsx(m.Fragment,{children:t});function ej(t){return v.isValidElement(t)&&t.type===Z5}function tj(t,e){const n={...e};for(const r in e){const o=t[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...s)=>{i(...s),o(...s)}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...t,...n}}function nj(t){var e,n;let r=(e=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:e.get,o=r&&"isReactWarning"in r&&r.isReactWarning;return o?t.ref:(r=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o?t.props.ref:t.props.ref||t.ref)}function Yh(t){const e=t+"CollectionProvider",[n,r]=Tn(e),[o,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=p=>{const{scope:f,children:g}=p,y=C.useRef(null),b=C.useRef(new Map).current;return m.jsx(o,{scope:f,itemMap:b,collectionRef:y,children:g})};s.displayName=e;const a=t+"CollectionSlot",l=C.forwardRef((p,f)=>{const{scope:g,children:y}=p,b=i(a,g),w=$e(f,b.collectionRef);return m.jsx(us,{ref:w,children:y})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=C.forwardRef((p,f)=>{const{scope:g,children:y,...b}=p,w=C.useRef(null),x=$e(f,w),k=i(c,g);return C.useEffect(()=>(k.itemMap.set(w,{ref:w,...b}),()=>void k.itemMap.delete(w))),m.jsx(us,{[u]:"",ref:x,children:y})});d.displayName=c;function h(p){const f=i(t+"CollectionConsumer",p);return C.useCallback(()=>{const g=f.collectionRef.current;if(!g)return[];const y=Array.from(g.querySelectorAll(`[${u}]`));return Array.from(f.itemMap.values()).sort((b,w)=>y.indexOf(b.ref.current)-y.indexOf(w.ref.current))},[f.collectionRef,f.itemMap])}return[{Provider:s,Slot:l,ItemSlot:d},h,r]}var rj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ge=rj.reduce((t,e)=>{const n=v.forwardRef((r,o)=>{const{asChild:i,...s}=r,a=i?us:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(a,{...s,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function iy(t,e){t&&Xc.flushSync(()=>t.dispatchEvent(e))}function ot(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t}),v.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function oj(t,e=globalThis==null?void 0:globalThis.document){const n=ot(t);v.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var ij="DismissableLayer",lg="dismissableLayer.update",sj="dismissableLayer.pointerDownOutside",aj="dismissableLayer.focusOutside",sb,jS=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qh=v.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...l}=t,c=v.useContext(jS),[u,d]=v.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=v.useState({}),f=$e(e,T=>d(T)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),w=u?g.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,k=w>=b,S=cj(T=>{const j=T.target,R=[...c.branches].some(D=>D.contains(j));!k||R||(o==null||o(T),s==null||s(T),T.defaultPrevented||a==null||a())},h),E=uj(T=>{const j=T.target;[...c.branches].some(R=>R.contains(j))||(i==null||i(T),s==null||s(T),T.defaultPrevented||a==null||a())},h);return oj(T=>{w===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},h),v.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(sb=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),ab(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=sb)}},[u,h,n,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),ab())},[u,c]),v.useEffect(()=>{const T=()=>p({});return document.addEventListener(lg,T),()=>document.removeEventListener(lg,T)},[]),m.jsx(ge.div,{...l,ref:f,style:{pointerEvents:x?k?"auto":"none":void 0,...t.style},onFocusCapture:le(t.onFocusCapture,E.onFocusCapture),onBlurCapture:le(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:le(t.onPointerDownCapture,S.onPointerDownCapture)})});Qh.displayName=ij;var lj="DismissableLayerBranch",RS=v.forwardRef((t,e)=>{const n=v.useContext(jS),r=v.useRef(null),o=$e(e,r);return v.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),m.jsx(ge.div,{...t,ref:o})});RS.displayName=lj;function cj(t,e=globalThis==null?void 0:globalThis.document){const n=ot(t),r=v.useRef(!1),o=v.useRef(()=>{});return v.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){PS(sj,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function uj(t,e=globalThis==null?void 0:globalThis.document){const n=ot(t),r=v.useRef(!1);return v.useEffect(()=>{const o=i=>{i.target&&!r.current&&PS(aj,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ab(){const t=new CustomEvent(lg);document.dispatchEvent(t)}function PS(t,e,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?iy(o,i):o.dispatchEvent(i)}var dj=Qh,hj=RS,Nr=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},pj="Portal",Xh=v.forwardRef((t,e)=>{var n;const{container:r,...o}=t,[i,s]=v.useState(!1);Nr(()=>s(!0),[]);const a=r||i&&((n=globalThis==null?void 0:globalThis.document)==null?void 0:n.body);return a?ny.createPortal(m.jsx(ge.div,{...o,ref:e}),a):null});Xh.displayName=pj;function fj(t,e){return v.useReducer((n,r)=>e[n][r]??n,t)}var Bt=t=>{const{present:e,children:n}=t,r=mj(e),o=typeof n=="function"?n({present:r.isPresent}):v.Children.only(n),i=$e(r.ref,gj(o));return typeof n=="function"||r.isPresent?v.cloneElement(o,{ref:i}):null};Bt.displayName="Presence";function mj(t){const[e,n]=v.useState(),r=v.useRef({}),o=v.useRef(t),i=v.useRef("none"),s=t?"mounted":"unmounted",[a,l]=fj(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=ju(r.current);i.current=a==="mounted"?c:"none"},[a]),Nr(()=>{const c=r.current,u=o.current;if(u!==t){const d=i.current,h=ju(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&d!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),Nr(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const f=ju(r.current).includes(p.animationName);if(p.target===e&&f&&(l("ANIMATION_END"),!o.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},h=p=>{p.target===e&&(i.current=ju(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function ju(t){return(t==null?void 0:t.animationName)||"none"}function gj(t){var e,n;let r=(e=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:e.get,o=r&&"isReactWarning"in r&&r.isReactWarning;return o?t.ref:(r=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning,o?t.props.ref:t.props.ref||t.ref)}function fo({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,o]=yj({defaultProp:e,onChange:n}),i=t!==void 0,s=i?t:r,a=ot(n),l=v.useCallback(c=>{if(i){const u=typeof c=="function"?c(t):c;u!==t&&a(u)}else o(c)},[i,t,o,a]);return[s,l]}function yj({defaultProp:t,onChange:e}){const n=v.useState(t),[r]=n,o=v.useRef(r),i=ot(e);return v.useEffect(()=>{o.current!==r&&(i(r),o.current=r)},[r,o,i]),n}var vj="VisuallyHidden",sy=v.forwardRef((t,e)=>m.jsx(ge.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));sy.displayName=vj;var ay="ToastProvider",[ly,bj,wj]=Yh("Toast"),[AS,tq]=Tn("Toast",[wj]),[xj,Zh]=AS(ay),DS=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:i=50,children:s}=t,[a,l]=v.useState(null),[c,u]=v.useState(0),d=v.useRef(!1),h=v.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${ay}\`. Expected non-empty \`string\`.`),m.jsx(ly.Provider,{scope:e,children:m.jsx(xj,{scope:e,label:n,duration:r,swipeDirection:o,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:v.useCallback(()=>u(p=>p+1),[]),onToastRemove:v.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:s})})};DS.displayName=ay;var IS="ToastViewport",kj=["F8"],cg="toast.viewportPause",ug="toast.viewportResume",LS=v.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=kj,label:o="Notifications ({hotkey})",...i}=t,s=Zh(IS,n),a=bj(n),l=v.useRef(null),c=v.useRef(null),u=v.useRef(null),d=v.useRef(null),h=$e(e,d,s.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),f=s.toastCount>0;v.useEffect(()=>{const y=b=>{var w;r.length!==0&&r.every(x=>b[x]||b.code===x)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),v.useEffect(()=>{const y=l.current,b=d.current;if(f&&y&&b){const w=()=>{if(!s.isClosePausedRef.current){const E=new CustomEvent(cg);b.dispatchEvent(E),s.isClosePausedRef.current=!0}},x=()=>{if(s.isClosePausedRef.current){const E=new CustomEvent(ug);b.dispatchEvent(E),s.isClosePausedRef.current=!1}},k=E=>{!y.contains(E.relatedTarget)&&x()},S=()=>{y.contains(document.activeElement)||x()};return y.addEventListener("focusin",w),y.addEventListener("focusout",k),y.addEventListener("pointermove",w),y.addEventListener("pointerleave",S),window.addEventListener("blur",w),window.addEventListener("focus",x),()=>{y.removeEventListener("focusin",w),y.removeEventListener("focusout",k),y.removeEventListener("pointermove",w),y.removeEventListener("pointerleave",S),window.removeEventListener("blur",w),window.removeEventListener("focus",x)}}},[f,s.isClosePausedRef]);const g=v.useCallback(({tabbingDirection:y})=>{const b=a().map(w=>{const x=w.ref.current,k=[x,...Dj(x)];return y==="forwards"?k:k.reverse()});return(y==="forwards"?b.reverse():b).flat()},[a]);return v.useEffect(()=>{const y=d.current;if(y){const b=w=>{var x,k,S;const E=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!E){const T=document.activeElement,j=w.shiftKey;if(w.target===y&&j){(x=c.current)==null||x.focus();return}const R=g({tabbingDirection:j?"backwards":"forwards"}),D=R.findIndex(H=>H===T);hf(R.slice(D+1))?w.preventDefault():j?(k=c.current)==null||k.focus():(S=u.current)==null||S.focus()}};return y.addEventListener("keydown",b),()=>y.removeEventListener("keydown",b)}},[a,g]),m.jsxs(hj,{ref:l,role:"region","aria-label":o.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:f?void 0:"none"},children:[f&&m.jsx(dg,{ref:c,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});hf(y)}}),m.jsx(ly.Slot,{scope:n,children:m.jsx(ge.ol,{tabIndex:-1,...i,ref:h})}),f&&m.jsx(dg,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});hf(y)}})]})});LS.displayName=IS;var zS="ToastFocusProxy",dg=v.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=t,i=Zh(zS,n);return m.jsx(sy,{"aria-hidden":!0,tabIndex:0,...o,ref:e,style:{position:"fixed"},onFocus:s=>{var a;const l=s.relatedTarget;!((a=i.viewport)!=null&&a.contains(l))&&r()}})});dg.displayName=zS;var ep="Toast",Sj="toast.swipeStart",Cj="toast.swipeMove",Ej="toast.swipeCancel",Tj="toast.swipeEnd",$S=v.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:i,...s}=t,[a=!0,l]=fo({prop:r,defaultProp:o,onChange:i});return m.jsx(Bt,{present:n||a,children:m.jsx(_j,{open:a,...s,ref:e,onClose:()=>l(!1),onPause:ot(t.onPause),onResume:ot(t.onResume),onSwipeStart:le(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:le(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:le(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:le(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});$S.displayName=ep;var[Nj,Mj]=AS(ep,{onClose(){}}),_j=v.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:i,onClose:s,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:p,...f}=t,g=Zh(ep,n),[y,b]=v.useState(null),w=$e(e,F=>b(F)),x=v.useRef(null),k=v.useRef(null),S=o||g.duration,E=v.useRef(0),T=v.useRef(S),j=v.useRef(0),{onToastAdd:R,onToastRemove:D}=g,H=ot(()=>{var F;y!=null&&y.contains(document.activeElement)&&((F=g.viewport)==null||F.focus()),s()}),L=v.useCallback(F=>{!F||F===1/0||(window.clearTimeout(j.current),E.current=new Date().getTime(),j.current=window.setTimeout(H,F))},[H]);v.useEffect(()=>{const F=g.viewport;if(F){const Q=()=>{L(T.current),c==null||c()},Y=()=>{const se=new Date().getTime()-E.current;T.current=T.current-se,window.clearTimeout(j.current),l==null||l()};return F.addEventListener(cg,Y),F.addEventListener(ug,Q),()=>{F.removeEventListener(cg,Y),F.removeEventListener(ug,Q)}}},[g.viewport,S,l,c,L]),v.useEffect(()=>{i&&!g.isClosePausedRef.current&&L(S)},[i,S,g.isClosePausedRef,L]),v.useEffect(()=>(R(),()=>D()),[R,D]);const G=v.useMemo(()=>y?qS(y):null,[y]);return g.viewport?m.jsxs(m.Fragment,{children:[G&&m.jsx(Oj,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),m.jsx(Nj,{scope:n,onClose:H,children:Xc.createPortal(m.jsx(ly.ItemSlot,{scope:n,children:m.jsx(dj,{asChild:!0,onEscapeKeyDown:le(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||H(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...f,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:le(t.onKeyDown,F=>{F.key==="Escape"&&(a==null||a(F.nativeEvent),F.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,H()))}),onPointerDown:le(t.onPointerDown,F=>{F.button===0&&(x.current={x:F.clientX,y:F.clientY})}),onPointerMove:le(t.onPointerMove,F=>{if(!x.current)return;const Q=F.clientX-x.current.x,Y=F.clientY-x.current.y,se=!!k.current,z=["left","right"].includes(g.swipeDirection),A=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,M=z?A(0,Q):0,N=z?0:A(0,Y),$=F.pointerType==="touch"?10:2,V={x:M,y:N},K={originalEvent:F,delta:V};se?(k.current=V,Ru(Cj,d,K,{discrete:!1})):lb(V,g.swipeDirection,$)?(k.current=V,Ru(Sj,u,K,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(Q)>$||Math.abs(Y)>$)&&(x.current=null)}),onPointerUp:le(t.onPointerUp,F=>{const Q=k.current,Y=F.target;if(Y.hasPointerCapture(F.pointerId)&&Y.releasePointerCapture(F.pointerId),k.current=null,x.current=null,Q){const se=F.currentTarget,z={originalEvent:F,delta:Q};lb(Q,g.swipeDirection,g.swipeThreshold)?Ru(Tj,p,z,{discrete:!0}):Ru(Ej,h,z,{discrete:!0}),se.addEventListener("click",A=>A.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Oj=t=>{const{__scopeToast:e,children:n,...r}=t,o=Zh(ep,e),[i,s]=v.useState(!1),[a,l]=v.useState(!1);return Pj(()=>s(!0)),v.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:m.jsx(Xh,{asChild:!0,children:m.jsx(sy,{...r,children:i&&m.jsxs(m.Fragment,{children:[o.label," ",n]})})})},jj="ToastTitle",FS=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(ge.div,{...r,ref:e})});FS.displayName=jj;var Rj="ToastDescription",BS=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(ge.div,{...r,ref:e})});BS.displayName=Rj;var VS="ToastAction",US=v.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?m.jsx(WS,{altText:n,asChild:!0,children:m.jsx(cy,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${VS}\`. Expected non-empty \`string\`.`),null)});US.displayName=VS;var HS="ToastClose",cy=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,o=Mj(HS,n);return m.jsx(WS,{asChild:!0,children:m.jsx(ge.button,{type:"button",...r,ref:e,onClick:le(t.onClick,o.onClose)})})});cy.displayName=HS;var WS=v.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...o}=t;return m.jsx(ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:e})});function qS(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Aj(n)){const r=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!r)if(o){const i=n.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...qS(n))}}),e}function Ru(t,e,n,{discrete:r}){const o=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?iy(o,i):o.dispatchEvent(i)}var lb=(t,e,n=0)=>{const r=Math.abs(t.x),o=Math.abs(t.y),i=r>o;return e==="left"||e==="right"?i&&r>n:!i&&o>n};function Pj(t=()=>{}){const e=ot(t);Nr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Aj(t){return t.nodeType===t.ELEMENT_NODE}function Dj(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function hf(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Ij=DS,KS=LS,JS=$S,GS=FS,YS=BS,QS=US,XS=cy;function ZS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=ZS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function eC(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=ZS(t))&&(r&&(r+=" "),r+=e);return r}const cb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ub=eC,tp=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return ub(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:i}=e,s=Object.keys(o).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const h=cb(u)||cb(d);return o[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...p}=u;return Object.entries(p).every(f=>{let[g,y]=f;return Array.isArray(y)?y.includes({...i,...a}[g]):{...i,...a}[g]===y})?[...c,d,h]:c},[]);return ub(t,s,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Lj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var zj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const $j=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:s,...a},l)=>v.createElement("svg",{ref:l,...zj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:tC("lucide",o),...a},[...s.map(([c,u])=>v.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const je=(t,e)=>{const n=v.forwardRef(({className:r,...o},i)=>v.createElement($j,{ref:i,iconNode:e,className:tC(`lucide-${Lj(t)}`,r),...o}));return n.displayName=`${t}`,n};/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Fj=je("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nC=je("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Bj=je("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Vj=je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const rC=je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const oC=je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Uj=je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Hj=je("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Wj=je("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const qj=je("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Kj=je("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const hg=je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const iC=je("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Jj=je("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Gj=je("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Yj=je("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Qj=je("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Zd=je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sC=je("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Xj=je("MessageSquareQuote",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 12a2 2 0 0 0 2-2V8H8",key:"1jfesj"}],["path",{d:"M14 12a2 2 0 0 0 2-2V8h-2",key:"1dq9mh"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Zj=je("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const eR=je("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const pg=je("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const aC=je("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const uy=je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const db=je("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const tR=je("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nR=je("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const rR=je("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const oR=je("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ds=je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const iR=je("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sR=je("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ia=je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),dy="-",aR=t=>{const e=cR(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const i=o.split(dy);return i[0]===""&&i.length!==1&&i.shift(),lC(i,e)||lR(o)},getConflictingClassGroupIds:(o,i)=>{const s=n[o]||[];return i&&r[o]?[...s,...r[o]]:s}}},lC=(t,e)=>{var n;if(t.length===0)return e.classGroupId;const r=t[0],o=e.nextPart.get(r),i=o?lC(t.slice(1),o):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(dy);return(n=e.validators.find(({validator:a})=>a(s)))==null?void 0:n.classGroupId},hb=/^\[(.+)\]$/,lR=t=>{if(hb.test(t)){const e=hb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},cR=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return dR(Object.entries(t.classGroups),n).forEach(([o,i])=>{fg(i,r,o,e)}),r},fg=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const i=o===""?e:pb(e,o);i.classGroupId=n;return}if(typeof o=="function"){if(uR(o)){fg(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,s])=>{fg(s,pb(e,i),n,r)})})},pb=(t,e)=>{let n=t;return e.split(dy).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},uR=t=>t.isThemeGetter,dR=(t,e)=>e?t.map(([n,r])=>{const o=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([s,a])=>[e+s,a])):i);return[n,o]}):t,hR=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(i,s)=>{n.set(i,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){n.has(i)?n.set(i,s):o(i,s)}}},cC="!",pR=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],i=e.length,s=a=>{const l=[];let c=0,u=0,d;for(let y=0;y<a.length;y++){let b=a[y];if(c===0){if(b===o&&(r||a.slice(y,y+i)===e)){l.push(a.slice(u,y)),u=y+i;continue}if(b==="/"){d=y;continue}}b==="["?c++:b==="]"&&c--}const h=l.length===0?a:a.substring(u),p=h.startsWith(cC),f=p?h.substring(1):h,g=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:s}):s},fR=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},mR=t=>({cache:hR(t.cacheSize),parseClassName:pR(t),...aR(t)}),gR=/\s+/,yR=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,i=[],s=t.trim().split(gR);let a="";for(let l=s.length-1;l>=0;l-=1){const c=s[l],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=n(c);let f=!!p,g=r(f?h.substring(0,p):h);if(!g){if(!f){a=c+(a.length>0?" "+a:a);continue}if(g=r(h),!g){a=c+(a.length>0?" "+a:a);continue}f=!1}const y=fR(u).join(":"),b=d?y+cC:y,w=b+g;if(i.includes(w))continue;i.push(w);const x=o(g,f);for(let k=0;k<x.length;++k){const S=x[k];i.push(b+S)}a=c+(a.length>0?" "+a:a)}return a};function vR(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=uC(e))&&(r&&(r+=" "),r+=n);return r}const uC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=uC(t[r]))&&(n&&(n+=" "),n+=e);return n};function bR(t,...e){let n,r,o,i=s;function s(l){const c=e.reduce((u,d)=>d(u),t());return n=mR(c),r=n.cache.get,o=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=yR(l,n);return o(l,u),u}return function(){return i(vR.apply(null,arguments))}}const We=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},dC=/^\[(?:([a-z-]+):)?(.+)\]$/i,wR=/^\d+\/\d+$/,xR=new Set(["px","full","screen"]),kR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,SR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,CR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ER=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,TR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zr=t=>wa(t)||xR.has(t)||wR.test(t),xo=t=>Qa(t,"length",AR),wa=t=>!!t&&!Number.isNaN(Number(t)),pf=t=>Qa(t,"number",wa),fl=t=>!!t&&Number.isInteger(Number(t)),NR=t=>t.endsWith("%")&&wa(t.slice(0,-1)),xe=t=>dC.test(t),ko=t=>kR.test(t),MR=new Set(["length","size","percentage"]),_R=t=>Qa(t,MR,hC),OR=t=>Qa(t,"position",hC),jR=new Set(["image","url"]),RR=t=>Qa(t,jR,IR),PR=t=>Qa(t,"",DR),ml=()=>!0,Qa=(t,e,n)=>{const r=dC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},AR=t=>SR.test(t)&&!CR.test(t),hC=()=>!1,DR=t=>ER.test(t),IR=t=>TR.test(t),LR=()=>{const t=We("colors"),e=We("spacing"),n=We("blur"),r=We("brightness"),o=We("borderColor"),i=We("borderRadius"),s=We("borderSpacing"),a=We("borderWidth"),l=We("contrast"),c=We("grayscale"),u=We("hueRotate"),d=We("invert"),h=We("gap"),p=We("gradientColorStops"),f=We("gradientColorStopPositions"),g=We("inset"),y=We("margin"),b=We("opacity"),w=We("padding"),x=We("saturate"),k=We("scale"),S=We("sepia"),E=We("skew"),T=We("space"),j=We("translate"),R=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto",xe,e],L=()=>[xe,e],G=()=>["",zr,xo],F=()=>["auto",wa,xe],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],A=()=>["","0",xe],M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>[wa,xe];return{cacheSize:500,separator:":",theme:{colors:[ml],spacing:[zr,xo],blur:["none","",ko,xe],brightness:N(),borderColor:[t],borderRadius:["none","","full",ko,xe],borderSpacing:L(),borderWidth:G(),contrast:N(),grayscale:A(),hueRotate:N(),invert:A(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[NR,xo],inset:H(),margin:H(),opacity:N(),padding:L(),saturate:N(),scale:N(),sepia:A(),skew:N(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[ko]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),xe]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fl,xe]}],basis:[{basis:H()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",fl,xe]}],"grid-cols":[{"grid-cols":[ml]}],"col-start-end":[{col:["auto",{span:["full",fl,xe]},xe]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[ml]}],"row-start-end":[{row:["auto",{span:[fl,xe]},xe]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,e]}],"min-w":[{"min-w":[xe,e,"min","max","fit"]}],"max-w":[{"max-w":[xe,e,"none","full","min","max","fit","prose",{screen:[ko]},ko]}],h:[{h:[xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ko,xo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pf]}],"font-family":[{font:[ml]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",wa,pf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",zr,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",zr,xo]}],"underline-offset":[{"underline-offset":["auto",zr,xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),OR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_R]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},RR]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:Y()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[zr,xe]}],"outline-w":[{outline:[zr,xo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[zr,xo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ko,PR]}],"shadow-color":[{shadow:[ml]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":se()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ko,xe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[x]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:N()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:N()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[fl,xe]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[zr,xo,pf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},zR=bR(LR);function ve(...t){return zR(eC(t))}const $R=Ij,pC=v.forwardRef(({className:t,...e},n)=>m.jsx(KS,{ref:n,className:ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));pC.displayName=KS.displayName;const FR=tp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fC=v.forwardRef(({className:t,variant:e,...n},r)=>m.jsx(JS,{ref:r,className:ve(FR({variant:e}),t),...n}));fC.displayName=JS.displayName;const BR=v.forwardRef(({className:t,...e},n)=>m.jsx(QS,{ref:n,className:ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));BR.displayName=QS.displayName;const mC=v.forwardRef(({className:t,...e},n)=>m.jsx(XS,{ref:n,className:ve("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:m.jsx(Ia,{className:"h-4 w-4"})}));mC.displayName=XS.displayName;const gC=v.forwardRef(({className:t,...e},n)=>m.jsx(GS,{ref:n,className:ve("text-sm font-semibold",t),...e}));gC.displayName=GS.displayName;const yC=v.forwardRef(({className:t,...e},n)=>m.jsx(YS,{ref:n,className:ve("text-sm opacity-90",t),...e}));yC.displayName=YS.displayName;function VR(){const{toasts:t}=Pr();return m.jsxs($R,{children:[t.map(function({id:e,title:n,description:r,action:o,...i}){return m.jsxs(fC,{...i,children:[m.jsxs("div",{className:"grid gap-1",children:[n&&m.jsx(gC,{children:n}),r&&m.jsx(yC,{children:r})]}),o,m.jsx(mC,{})]},e)}),m.jsx(pC,{})]})}const UR="modulepreload",HR=function(t){return"/"+t},fb={},La=function(t,e,n){let r=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),s=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.allSettled(e.map(a=>{if(a=HR(a),a in fb)return;fb[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":UR,l||(u.as="script"),u.crossOrigin="",u.href=a,s&&u.setAttribute("nonce",s),document.head.appendChild(u),l)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}function o(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return r.then(i=>{for(const s of i||[])s.status==="rejected"&&o(s.reason);return t().catch(o)})},WR=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>La(async()=>{const{default:r}=await Promise.resolve().then(()=>Xa);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class hy extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class qR extends hy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class KR extends hy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class JR extends hy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(mg||(mg={}));var GR=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,[])).next())})};class YR{constructor(e,{headers:n={},customFetch:r,region:o=mg.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=WR(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return GR(this,void 0,void 0,function*(){try{const{headers:o,method:i,body:s}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;s&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=s):typeof s=="string"?(a["Content-Type"]="text/plain",c=s):typeof FormData<"u"&&s instanceof FormData?c=s:(a["Content-Type"]="application/json",c=JSON.stringify(s)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),o),body:c}).catch(f=>{throw new qR(f)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new KR(u);if(!u.ok)throw new JR(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield u.json():h==="application/octet-stream"?p=yield u.blob():h==="text/event-stream"?p=u:h==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(o){return{data:null,error:o}}})}}var sn={},py={},np={},tu={},rp={},op={},QR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},za=QR();const XR=za.fetch,vC=za.fetch.bind(za),bC=za.Headers,ZR=za.Request,e6=za.Response,Xa=Object.freeze(Object.defineProperty({__proto__:null,Headers:bC,Request:ZR,Response:e6,default:vC,fetch:XR},Symbol.toStringTag,{value:"Module"})),t6=MM(Xa);var ip={};Object.defineProperty(ip,"__esModule",{value:!0});let n6=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ip.default=n6;var wC=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(op,"__esModule",{value:!0});const r6=wC(t6),o6=wC(ip);let i6=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=r6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,s,a;let l=null,c=null,u=null,d=o.status,h=o.statusText;if(o.ok){if(this.method!=="HEAD"){const g=await o.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=g:c=JSON.parse(g))}const p=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),f=(s=o.headers.get("content-range"))===null||s===void 0?void 0:s.split("/");p&&f&&f.length>1&&(u=parseInt(f[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,u=null,d=406,h="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const p=await o.text();try{l=JSON.parse(p),Array.isArray(l)&&o.status===404&&(c=[],l=null,d=200,h="OK")}catch{o.status===404&&p===""?(d=204,h="No Content"):l={message:p}}if(l&&this.isMaybeSingle&&!((a=l==null?void 0:l.details)===null||a===void 0)&&a.includes("0 rows")&&(l=null,d=200,h="OK"),l&&this.shouldThrowOnError)throw new o6.default(l)}return{error:l,data:c,count:u,status:d,statusText:h}});return this.shouldThrowOnError||(r=r.catch(o=>{var i,s,a;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(s=o==null?void 0:o.stack)!==null&&s!==void 0?s:""}`,hint:"",code:`${(a=o==null?void 0:o.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),r.then(t,e)}};op.default=i6;var s6=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rp,"__esModule",{value:!0});const a6=s6(op);let l6=class extends a6.default{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:o=r}={}){const i=o?`${o}.order`:"order",s=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${s?`${s},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:o=!1,format:i="text"}={}){var s;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=(s=this.headers.Accept)!==null&&s!==void 0?s:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};rp.default=l6;var c6=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tu,"__esModule",{value:!0});const u6=c6(rp);let d6=class extends u6.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}};tu.default=d6;var h6=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(np,"__esModule",{value:!0});const gl=h6(tu);let p6=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=e,this.schema=n,this.fetch=r}select(t,{head:e=!1,count:n}={}){const r=e?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(s=>/\s/.test(s)&&!o?"":(s==='"'&&(o=!o),s)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new gl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:n=!0}={}){const r="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),e&&o.push(`count=${e}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((s,a)=>s.concat(Object.keys(a)),[]);if(i.length>0){const s=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",s.join(","))}}return new gl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}={}){const i="POST",s=[`resolution=${n?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),o||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new gl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),e&&r.push(`count=${e}`),this.headers.Prefer=r.join(","),new gl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const e="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new gl.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};np.default=p6;var sp={},ap={};Object.defineProperty(ap,"__esModule",{value:!0});ap.version=void 0;ap.version="0.0.0-automated";Object.defineProperty(sp,"__esModule",{value:!0});sp.DEFAULT_HEADERS=void 0;const f6=ap;sp.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${f6.version}`};var xC=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(py,"__esModule",{value:!0});const m6=xC(np),g6=xC(tu),y6=sp;let v6=class kC{constructor(e,{headers:n={},schema:r,fetch:o}={}){this.url=e,this.headers=Object.assign(Object.assign({},y6.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new m6.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new kC(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:o=!1,count:i}={}){let s;const a=new URL(`${this.url}/rpc/${e}`);let l;r||o?(s=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(s="POST",l=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new g6.default({method:s,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};py.default=v6;var Za=Fn&&Fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sn,"__esModule",{value:!0});sn.PostgrestError=sn.PostgrestBuilder=sn.PostgrestTransformBuilder=sn.PostgrestFilterBuilder=sn.PostgrestQueryBuilder=sn.PostgrestClient=void 0;const SC=Za(py);sn.PostgrestClient=SC.default;const CC=Za(np);sn.PostgrestQueryBuilder=CC.default;const EC=Za(tu);sn.PostgrestFilterBuilder=EC.default;const TC=Za(rp);sn.PostgrestTransformBuilder=TC.default;const NC=Za(op);sn.PostgrestBuilder=NC.default;const MC=Za(ip);sn.PostgrestError=MC.default;var b6=sn.default={PostgrestClient:SC.default,PostgrestQueryBuilder:CC.default,PostgrestFilterBuilder:EC.default,PostgrestTransformBuilder:TC.default,PostgrestBuilder:NC.default,PostgrestError:MC.default};const{PostgrestClient:w6,PostgrestQueryBuilder:nq,PostgrestFilterBuilder:rq,PostgrestTransformBuilder:oq,PostgrestBuilder:iq,PostgrestError:sq}=b6,x6="2.11.2",k6={"X-Client-Info":`realtime-js/${x6}`},S6="1.0.0",_C=1e4,C6=1e3;var xa;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(xa||(xa={}));var mn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(mn||(mn={}));var Xn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Xn||(Xn={}));var gg;(function(t){t.websocket="websocket"})(gg||(gg={}));var Ii;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ii||(Ii={}));class E6{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),i=n.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(e.slice(s,s+o));s=s+o;const l=r.decode(e.slice(s,s+i));s=s+i;const c=JSON.parse(r.decode(e.slice(s,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class OC{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ue||(Ue={}));const mb=(t,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,s)=>(i[s]=T6(s,t,e,o),i),{})},T6=(t,e,n,r)=>{const o=e.find(a=>a.name===t),i=o==null?void 0:o.type,s=n[t];return i&&!r.includes(i)?jC(i,s):yg(s)},jC=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return O6(e,n)}switch(t){case Ue.bool:return N6(e);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return M6(e);case Ue.json:case Ue.jsonb:return _6(e);case Ue.timestamp:return j6(e);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return yg(e);default:return yg(e)}},yg=t=>t,N6=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},M6=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},_6=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},O6=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const i=t.slice(1,n);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(s=>jC(e,s))}return t},j6=t=>typeof t=="string"?t.replace(" ","T"):t,RC=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ff{constructor(e,n,r={},o=_C){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gb;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(gb||(gb={}));class nc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=nc.syncState(this.state,o,i,s),this.pendingDiffs.forEach(l=>{this.state=nc.syncDiff(this.state,l,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=nc.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const i=this.cloneDeep(e),s=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=i[c];if(d){const h=u.map(y=>y.presence_ref),p=d.map(y=>y.presence_ref),f=u.filter(y=>p.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);f.length>0&&(a[c]=f),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,o)}static syncDiff(e,n,r,o){const{joins:i,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(p=>p.presence_ref),h=u.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,o(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(yb||(yb={}));var vb;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(vb||(vb={}));var Kr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Kr||(Kr={}));class fy{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=mn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ff(this,Xn.join,this.params,this.timeout),this.rejoinTimer=new OC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xn.reply,{},(o,i)=>{this._trigger(this._replyEventName(i),o)}),this.presence=new nc(this),this.broadcastEndpointURL=RC(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:s,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Kr.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Kr.CLOSED));const l={},c={broadcast:i,presence:s,postgres_changes:(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&o!==void 0?o:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Kr.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,f=[];for(let g=0;g<p;g++){const y=h[g],{filter:{event:b,schema:w,table:x,filter:k}}=y,S=u&&u[g];if(S&&S.event===b&&S.schema===w&&S.table===x&&S.filter===k)f.push(Object.assign(Object.assign({},y),{id:S.id}));else{this.unsubscribe(),e==null||e(Kr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e(Kr.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Kr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Kr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:s}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=l.body)===null||o===void 0?void 0:o.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=mn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const o=new ff(this,Xn.leave,{},e);o.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const o=new AbortController,i=setTimeout(()=>o.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(i),s}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ff(this,e,n,r);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,i;const s=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Xn;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let d=this._onMessage(s,n,r);if(n&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(h=>{var p,f,g;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(f=h.filter)===null||f===void 0?void 0:f.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===s}).map(h=>h.callback(d,r)):(i=this.bindings[s])===null||i===void 0||i.filter(h=>{var p,f,g,y,b,w;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const x=h.id,k=(p=h.filter)===null||p===void 0?void 0:p.event;return x&&((f=n.ids)===null||f===void 0?void 0:f.includes(x))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((g=n.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const x=(b=(y=h==null?void 0:h.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return x==="*"||x===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:f,table:g,commit_timestamp:y,type:b,errors:w}=p;d=Object.assign(Object.assign({},{schema:f,table:g,commit_timestamp:y,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(p))}h.callback(d,r)})}_isClosed(){return this.state===mn.closed}_isJoined(){return this.state===mn.joined}_isJoining(){return this.state===mn.joining}_isLeaving(){return this.state===mn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),i={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(o=>{var i;return!(((i=o.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&fy.isEqual(o.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xn.close,{},e)}_onError(e){this._on(Xn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=mb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=mb(e.columns,e.old_record)),n}}const R6=()=>{},P6=typeof WebSocket<"u",A6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class D6{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=k6,this.params={},this.timeout=_C,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=R6,this.conn=null,this.sendBuffer=[],this.serializer=new E6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>La(async()=>{const{default:l}=await Promise.resolve().then(()=>Xa);return{default:l}},void 0).then(({default:l})=>l(...a)):s=fetch,(...a)=>s(...a)},this.endPoint=`${e}/${gg.websocket}`,this.httpEndpoint=RC(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const o=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,s)=>s(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new OC(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(P6){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new I6(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),La(async()=>{const{default:e}=await TM(()=>import("./browser-CKmaLFxR-CYLRDbio.js"),[]).then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:S6}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case xa.connecting:return Ii.Connecting;case xa.open:return Ii.Open;case xa.closing:return Ii.Closing;default:return Ii.Closed}}isConnected(){return this.connectionState()===Ii.Open}channel(e,n={config:{}}){const r=new fy(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:o,ref:i}=e,s=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(o=>{n&&o.updateJoinPayload({access_token:n}),o.joinedOnce&&o._isJoined()&&o._push(Xn.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(C6,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:o,payload:i,ref:s}=n;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${o} ${s&&"("+s+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(o,i,s)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([A6],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class I6{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=xa.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class my extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function bt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class L6 extends my{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vg extends my{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var z6=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,[])).next())})};const PC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>La(async()=>{const{default:r}=await Promise.resolve().then(()=>Xa);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},$6=()=>z6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield La(()=>Promise.resolve().then(()=>Xa),void 0)).Response:Response}),bg=t=>{if(Array.isArray(t))return t.map(n=>bg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[o]=bg(r)}),e};var Cs=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,[])).next())})};const mf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),F6=(t,e,n)=>Cs(void 0,void 0,void 0,function*(){const r=yield $6();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{e(new L6(mf(o),t.status||500))}).catch(o=>{e(new vg(mf(o),o))}):e(new vg(mf(t),t))}),B6=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),n))};function nu(t,e,n,r,o,i){return Cs(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(n,B6(e,r,o,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>F6(l,a,r))})})}function eh(t,e,n,r){return Cs(this,void 0,void 0,function*(){return nu(t,"GET",e,n,r)})}function jo(t,e,n,r,o){return Cs(this,void 0,void 0,function*(){return nu(t,"POST",e,r,o,n)})}function V6(t,e,n,r,o){return Cs(this,void 0,void 0,function*(){return nu(t,"PUT",e,r,o,n)})}function U6(t,e,n,r){return Cs(this,void 0,void 0,function*(){return nu(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function AC(t,e,n,r,o){return Cs(this,void 0,void 0,function*(){return nu(t,"DELETE",e,r,o,n)})}var en=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,[])).next())})};const H6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class W6{constructor(e,n={},r,o){this.url=e,this.headers=n,this.bucketId=r,this.fetch=PC(o)}uploadOrUpdate(e,n,r,o){return en(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},bb),o);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o!=null&&o.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},s!=null&&s.duplex?{duplex:s.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(bt(i))return{data:null,error:i};throw i}})}upload(e,n,r){return en(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return en(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:bb.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(bt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return en(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const i=yield jo(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new my("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}update(e,n,r){return en(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return en(this,void 0,void 0,function*(){try{return{data:yield jo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(bt(o))return{data:null,error:o};throw o}})}copy(e,n,r){return en(this,void 0,void 0,function*(){try{return{data:{path:(yield jo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(bt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return en(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),i=yield jo(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(bt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return en(this,void 0,void 0,function*(){try{const o=yield jo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(bt(o))return{data:null,error:o};throw o}})}download(e,n){return en(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=o?`?${o}`:"";try{const s=this._getFinalPath(e);return{data:yield(yield eh(this.fetch,`${this.url}/${r}/${s}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}info(e){return en(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield eh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:bg(r),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}exists(e){return en(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield U6(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(bt(r)&&r instanceof vg){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&o.push(i);const s=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});a!==""&&o.push(a);let l=o.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${l}`)}}}remove(e){return en(this,void 0,void 0,function*(){try{return{data:yield AC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}list(e,n,r){return en(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},H6),n),{prefix:e||""});return{data:yield jo(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(bt(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const q6="2.7.1",K6={"X-Client-Info":`storage-js/${q6}`};var As=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,[])).next())})};class J6{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},K6),n),this.fetch=PC(r)}listBuckets(){return As(this,void 0,void 0,function*(){try{return{data:yield eh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(bt(e))return{data:null,error:e};throw e}})}getBucket(e){return As(this,void 0,void 0,function*(){try{return{data:yield eh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return As(this,void 0,void 0,function*(){try{return{data:yield jo(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return As(this,void 0,void 0,function*(){try{return{data:yield V6(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return As(this,void 0,void 0,function*(){try{return{data:yield jo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return As(this,void 0,void 0,function*(){try{return{data:yield AC(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}}class G6 extends J6{constructor(e,n={},r){super(e,n,r)}from(e){return new W6(this.url,this.headers,e,this.fetch)}}const Y6="2.47.8";let Fl="";typeof Deno<"u"?Fl="deno":typeof document<"u"?Fl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fl="react-native":Fl="node";const Q6={"X-Client-Info":`supabase-js-${Fl}/${Y6}`},X6={headers:Q6},Z6={schema:"public"},eP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tP={};var nP=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,[])).next())})};const rP=t=>{let e;return t?e=t:typeof fetch>"u"?e=vC:e=fetch,(...n)=>e(...n)},oP=()=>typeof Headers>"u"?bC:Headers,iP=(t,e,n)=>{const r=rP(n),o=oP();return(i,s)=>nP(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new o(s==null?void 0:s.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},s),{headers:c}))})};var sP=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,[])).next())})};function aP(t){return t.replace(/\/$/,"")}function lP(t,e){const{db:n,auth:r,realtime:o,global:i}=t,{db:s,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},s),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),o),global:Object.assign(Object.assign({},c),i),accessToken:()=>sP(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const DC="2.67.1",cP="http://localhost:9999",uP="supabase.auth.token",dP={"X-Client-Info":`gotrue-js/${DC}`},wb=10,wg="X-Supabase-Api-Version",IC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function hP(t){return Math.round(Date.now()/1e3)+t}function pP(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Gn=()=>typeof document<"u",ki={tested:!1,writable:!1},rc=()=>{if(!Gn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ki.tested)return ki.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ki.tested=!0,ki.writable=!0}catch{ki.tested=!0,ki.writable=!1}return ki.writable};function gf(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,o)=>{e[o]=r})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const LC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>La(async()=>{const{default:r}=await Promise.resolve().then(()=>Xa);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},fP=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",zC=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Pu=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Au=async(t,e)=>{await t.removeItem(e)};function mP(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,o,i,s,a,l,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)s=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=s<<2|a>>4,o=(a&15)<<4|l>>2,i=(l&3)<<6|c,n=n+String.fromCharCode(r),l!=64&&o!=0&&(n=n+String.fromCharCode(o)),c!=64&&i!=0&&(n=n+String.fromCharCode(i));return n}class lp{constructor(){this.promise=new lp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}lp.promiseConstructor=Promise;function xb(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(mP(r))}async function gP(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function yP(t,e){return new Promise((n,r)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){n(i);return}}catch(i){if(!e(o,i)){r(i);return}}})()})}function vP(t){return("0"+t.toString(16)).substr(-2)}function bP(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=e.length;let r="";for(let o=0;o<56;o++)r+=e.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(t),Array.from(t,vP).join("")}async function wP(t){const e=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",e),r=new Uint8Array(n);return Array.from(r).map(o=>String.fromCharCode(o)).join("")}function xP(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kP(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const e=await wP(t);return xP(e)}async function Ds(t,e,n=!1){const r=bP();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await zC(t,`${e}-code-verifier`,o);const i=await kP(r);return[i,r===i?"plain":"s256"]}const SP=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function CP(t){const e=t.headers.get(wg);if(!e||!e.match(SP))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class gy extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class EP extends gy{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function TP(t){return Ce(t)&&t.name==="AuthApiError"}class $C extends gy{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Es extends gy{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class Eo extends Es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function NP(t){return Ce(t)&&t.name==="AuthSessionMissingError"}class yf extends Es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Du extends Es{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Iu extends Es{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MP(t){return Ce(t)&&t.name==="AuthImplicitGrantRedirectError"}class kb extends Es{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xg extends Es{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function vf(t){return Ce(t)&&t.name==="AuthRetryableFetchError"}class Sb extends Es{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var _P=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Di=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),OP=[502,503,504];async function Cb(t){var e;if(!fP(t))throw new xg(Di(t),0);if(OP.includes(t.status))throw new xg(Di(t),t.status);let n;try{n=await t.json()}catch(i){throw new $C(Di(i),i)}let r;const o=CP(t);if(o&&o.getTime()>=IC["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Sb(Di(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Eo}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new Sb(Di(n),t.status,n.weak_password.reasons);throw new EP(Di(n),t.status||500,r)}const jP=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function _e(t,e,n,r){var o;const i=Object.assign({},r==null?void 0:r.headers);i[wg]||(i[wg]=IC["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await RP(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function RP(t,e,n,r,o,i){const s=jP(e,r,o,i);let a;try{a=await t(n,Object.assign({},s))}catch(l){throw console.error(l),new xg(Di(l),0)}if(a.ok||await Cb(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Cb(l)}}function To(t){var e;let n=null;IP(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=hP(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Eb(t){const e=To(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Io(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function PP(t){return{data:t,error:null}}function AP(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i}=t,s=_P(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function DP(t){return t}function IP(t){return t.access_token&&t.refresh_token&&t.expires_in}var LP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class zP{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=LC(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Io})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=LP(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:AP,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ce(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Io})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,i,s,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&i!==void 0?i:""},xform:DP});if(u.error)throw u.error;const d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(f=>{const g=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(f.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Ce(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Io})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Io})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Io})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await _e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}}const $P={getItem:t=>rc()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{rc()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{rc()&&globalThis.localStorage.removeItem(t)}};function Tb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function FP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Is={debug:!!(globalThis&&rc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class FC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class BP extends FC{}async function VP(t,e,n){Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Is.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new BP(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Is.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}FP();const UP={url:cP,storageKey:uP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},yl=30*1e3,Nb=3;async function Mb(t,e,n){return await n()}class Mc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mc.nextInstanceID,Mc.nextInstanceID+=1,this.instanceID>0&&Gn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},UP),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new zP({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=LC(o.fetch),this.lock=o.lock||Mb,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Gn()&&!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks?this.lock=VP:this.lock=Mb,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:rc()?this.storage=$P:(this.memoryStorage={},this.storage=Tb(this.memoryStorage)):(this.memoryStorage={},this.storage=Tb(this.memoryStorage)),Gn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${DC}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Gn()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",n),n||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:r,error:o}=await this._getSessionFromURL(n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),MP(o)){const a=(e=o.details)===null||e===void 0?void 0:e.code;if(a==="identity_already_exists"||a==="identity_not_found"||a==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ce(n)?{error:n}:{error:new $C("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:To}),{data:s,error:a}=i;if(a||!s)return{data:{user:null,session:null},error:a};const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ce(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,o;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let p=null,f=null;this.flowType==="pkce"&&([p,f]=await Ds(this.storage,this.storageKey)),i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:f},xform:To})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(o=h==null?void 0:h.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:To})}else throw new Du("You must provide either an email or phone number and a password");const{data:s,error:a}=i;if(a||!s)return{data:{user:null,session:null},error:a};const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:s,options:a}=e;n=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Eb})}else if("phone"in e){const{phone:i,password:s,options:a}=e;n=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Eb})}else throw new Du("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new yf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Pu(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:i,error:s}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:To});if(await Au(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new yf}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:o??null}),error:s})}catch(i){if(Ce(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:i,nonce:s}=e,a=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:To}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new yf}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,i,s;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ds(this.storage,this.storageKey));const{error:d}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(o=l==null?void 0:l.data)!==null&&o!==void 0?o:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Du("You must provide either an email or phone number.")}catch(a){if(Ce(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let o,i;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:a}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:o,xform:To});if(a)throw a;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,c=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(Ce(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let i=null,s=null;return this.flowType==="pkce"&&([i,s]=await Ds(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:PP})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Eo;const{error:o}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:i}=e,{error:s}=await _e(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){const{phone:r,type:o,options:i}=e,{data:s,error:a}=await _e(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:a}}throw new Du("You must provide either an email or phone number and a type")}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Pu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let s=this.suppressGetSessionWarning;e=new Proxy(e,{get:(a,l,c)=>(!s&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,l,c))})}return{data:{session:e},error:null}}const{session:o,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Io}):await this._useSession(async n=>{var r,o,i;const{data:s,error:a}=n;if(a)throw a;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Eo}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(o=s.session)===null||o===void 0?void 0:o.access_token)!==null&&i!==void 0?i:void 0,xform:Io})})}catch(n){if(Ce(n))return NP(n)&&(await this._removeSession(),await Au(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:i}=r;if(i)throw i;if(!o.session)throw new Eo;const s=o.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Ds(this.storage,this.storageKey));const{data:c,error:u}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:s.access_token,xform:Io});if(u)throw u;return s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return xb(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Eo;const n=Date.now()/1e3;let r=n,o=!0,i=null;const s=xb(e.access_token);if(s.exp&&(r=s.exp,o=r<=n),o){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ce(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:s,error:a}=n;if(a)throw a;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Eo;const{session:o,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!Gn())throw new Iu("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Iu("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new kb("Not a valid PKCE flow url.");const n=gf(window.location.href);if(e){if(!n.code)throw new kb("No code detected.");const{data:w,error:x}=await this._exchangeCodeForSession(n.code);if(x)throw x;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:w.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Iu(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:o,access_token:i,refresh_token:s,expires_in:a,expires_at:l,token_type:c}=n;if(!i||!a||!s||!c)throw new Iu("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const p=h-u;p*1e3<=yl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const f=h-d;u-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,u):u-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,h,u);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const b={provider_token:r,provider_refresh_token:o,access_token:i,expires_in:d,expires_at:h,refresh_token:s,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:n.type},error:null}}catch(n){if(Ce(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=gf(window.location.href);return!!(Gn()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=gf(window.location.href),n=await Pu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:i}=n;if(i)return{error:i};const s=(r=o.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:a}=await this.admin.signOut(s,e);if(a&&!(TP(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Au(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=pP(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:i},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await Ds(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:o}=await this._useSession(async i=>{var s,a,l,c,u;const{data:d,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(o)throw o;return Gn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ce(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:i,error:s}=n;if(s)throw s;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await yP(async o=>(o>0&&await gP(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:To})),(o,i)=>{const s=200*Math.pow(2,o);return i&&vf(i)&&Date.now()+s-r<yl})}catch(r){if(this._debug(n,"error",r),Ce(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Gn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Pu(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const o=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<o+wb;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${wb}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),vf(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Eo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new lp;const{data:i,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!i.session)throw new Eo;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(o,"error",i),Ce(i)){const s={session:null,error:i};return vf(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(s),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await zC(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Au(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Gn()&&window!=null&&window.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/yl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${yl}ms, refresh threshold is ${Nb} ticks`),o<=Nb&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof FC)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,s]=await Ds(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});o.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);o.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:i}=n;return i?{data:null,error:i}:await _e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:i,error:s}=n;if(s)return{data:null,error:s};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&!((o=l==null?void 0:l.totp)===null||o===void 0)&&o.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:i}=n;if(i)return{data:null,error:i};const{data:s,error:a}=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:a})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:i}=n;return i?{data:null,error:i}:await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],o=r.filter(s=>s.factor_type==="totp"&&s.status==="verified"),i=r.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:r,totp:o,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:o},error:i}=e;if(i)return{data:null,error:i};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(o.access_token);let a=null;s.aal&&(a=s.aal);let l=a;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=s.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}Mc.nextInstanceID=0;const HP=Mc;class WP extends HP{constructor(e){super(e)}}var qP=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,[])).next())})};class KP{constructor(e,n,r){var o,i,s;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=aP(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:Z6,realtime:tP,auth:Object.assign(Object.assign({},eP),{storageKey:l}),global:X6},u=lP(r??{},c);this.storageKey=(o=u.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=u.auth)!==null&&s!==void 0?s:{},this.headers,u.global.fetch),this.fetch=iP(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new w6(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new YR(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new G6(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return qP(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,storageKey:i,flowType:s,lock:a,debug:l},c,u){var d;const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new WP({url:this.authUrl,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,flowType:s,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:(d="Authorization"in this.headers)!==null&&d!==void 0?d:!1})}_initRealtimeClient(e){return new D6(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const JP=(t,e,n)=>new KP(t,e,n),GP="https://shjwvwhijgehquuteekv.supabase.co",YP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNoand2d2hpamdlaHF1dXRlZWt2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM3NzUwMTUsImV4cCI6MjA0OTM1MTAxNX0.LPqNr6-y38ZsjD9FrBwysFd9G0J417xNd67h5OPGeXE",ue=JP(GP,YP),BC=v.createContext({session:null,user:null,loading:!0}),Ts=()=>v.useContext(BC);function QP({children:t}){const[e,n]=v.useState(null),[r,o]=v.useState(!0);return v.useEffect(()=>{ue.auth.getSession().then(({data:{session:s}})=>{console.log("Initial session:",s),n(s),o(!1)});const{data:{subscription:i}}=ue.auth.onAuthStateChange((s,a)=>{console.log("Auth state changed:",a),n(a),o(!1)});return()=>i.unsubscribe()},[]),m.jsx(BC.Provider,{value:{session:e,user:(e==null?void 0:e.user)??null,loading:r},children:t})}const VC=v.createContext(void 0);function XP({children:t}){const[e,n]=v.useState("light");v.useEffect(()=>{async function o(){var i;const{data:{session:s}}=await ue.auth.getSession();if((i=s==null?void 0:s.user)!=null&&i.id){const{data:a}=await ue.from("user_profiles").select("theme").eq("id",s.user.id).maybeSingle();a!=null&&a.theme&&(n(a.theme),document.documentElement.classList.toggle("dark",a.theme==="dark"))}}o()},[]);const r=async()=>{var o;const i=e==="light"?"dark":"light";n(i),document.documentElement.classList.toggle("dark",i==="dark");const{data:{session:s}}=await ue.auth.getSession();(o=s==null?void 0:s.user)!=null&&o.id&&await ue.from("user_profiles").update({theme:i}).eq("id",s.user.id)};return m.jsx(VC.Provider,{value:{theme:e,toggleTheme:r},children:t})}function ZP(){const t=v.useContext(VC);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}const ct=v.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ve("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ct.displayName="Card";const Vi=v.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ve("flex flex-col space-y-1.5 p-6",t),...e}));Vi.displayName="CardHeader";const Ui=v.forwardRef(({className:t,...e},n)=>m.jsx("h3",{ref:n,className:ve("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ui.displayName="CardTitle";const UC=v.forwardRef(({className:t,...e},n)=>m.jsx("p",{ref:n,className:ve("text-sm text-muted-foreground",t),...e}));UC.displayName="CardDescription";const Vo=v.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ve("p-6 pt-0",t),...e}));Vo.displayName="CardContent";const HC=v.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ve("flex items-center p-6 pt-0",t),...e}));HC.displayName="CardFooter";var eA=t=>{switch(t){case"success":return rA;case"info":return iA;case"warning":return oA;case"error":return sA;default:return null}},tA=Array(12).fill(0),nA=({visible:t,className:e})=>C.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},C.createElement("div",{className:"sonner-spinner"},tA.map((n,r)=>C.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),rA=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),oA=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),iA=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),sA=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),aA=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},C.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),C.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),lA=()=>{let[t,e]=C.useState(document.hidden);return C.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},kg=1,cA=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,o=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:kg++,i=this.toasts.find(a=>a.id===o),s=t.dismissible===void 0?!0:t.dismissible;return i?this.toasts=this.toasts.map(a=>a.id===o?(this.publish({...a,...t,id:o,title:n}),{...a,...t,id:o,dismissible:s,title:n}):a):this.addToast({title:n,...r,dismissible:s,id:o}),o},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),o=n!==void 0,i,s=r.then(async l=>{if(i=["resolve",l],C.isValidElement(l))o=!1,this.create({id:n,type:"default",message:l});else if(dA(l)&&!l.ok){o=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:u})}else if(e.success!==void 0){o=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:u})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){o=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:u})}}).finally(()=>{var l;o&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>s.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||kg++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},gn=new cA,uA=(t,e)=>{let n=(e==null?void 0:e.id)||kg++;return gn.addToast({title:t,...e,id:n}),n},dA=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",hA=uA,pA=()=>gn.toasts,Ye=Object.assign(hA,{success:gn.success,info:gn.info,warning:gn.warning,error:gn.error,custom:gn.custom,message:gn.message,promise:gn.promise,dismiss:gn.dismiss,loading:gn.loading},{getHistory:pA});function fA(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}fA(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Lu(t){return t.label!==void 0}var mA=3,gA="32px",_b=4e3,yA=356,vA=14,bA=20,wA=200;function xA(...t){return t.filter(Boolean).join(" ")}var kA=t=>{var e,n,r,o,i,s,a,l,c,u,d;let{invert:h,toast:p,unstyled:f,interacting:g,setHeights:y,visibleToasts:b,heights:w,index:x,toasts:k,expanded:S,removeToast:E,defaultRichColors:T,closeButton:j,style:R,cancelButtonStyle:D,actionButtonStyle:H,className:L="",descriptionClassName:G="",duration:F,position:Q,gap:Y,loadingIcon:se,expandByDefault:z,classNames:A,icons:M,closeButtonAriaLabel:N="Close toast",pauseWhenPageIsHidden:$,cn:V}=t,[K,te]=C.useState(!1),[re,X]=C.useState(!1),[me,pe]=C.useState(!1),[Ae,Ne]=C.useState(!1),[Ve,Fe]=C.useState(!1),[Se,_]=C.useState(0),[P,I]=C.useState(0),J=C.useRef(p.duration||F||_b),q=C.useRef(null),B=C.useRef(null),de=x===0,be=x+1<=b,Re=p.type,Ie=p.dismissible!==!1,Wn=p.className||"",Rs=p.descriptionClassName||"",dr=C.useMemo(()=>w.findIndex(we=>we.toastId===p.id)||0,[w,p.id]),xi=C.useMemo(()=>{var we;return(we=p.closeButton)!=null?we:j},[p.closeButton,j]);C.useMemo(()=>p.duration||F||_b,[p.duration,F]);let yo=C.useRef(0),Nn=C.useRef(0),vo=C.useRef(0),Lr=C.useRef(null),[hu,wM]=Q.split("-"),Iv=C.useMemo(()=>w.reduce((we,Le,Ge)=>Ge>=dr?we:we+Le.height,0),[w,dr]),Lv=lA(),xM=p.invert||h,Dp=Re==="loading";Nn.current=C.useMemo(()=>dr*Y+Iv,[dr,Iv]),C.useEffect(()=>{te(!0)},[]),C.useEffect(()=>{let we=B.current;if(we){let Le=we.getBoundingClientRect().height;return I(Le),y(Ge=>[{toastId:p.id,height:Le,position:p.position},...Ge]),()=>y(Ge=>Ge.filter(qn=>qn.toastId!==p.id))}},[y,p.id]),C.useLayoutEffect(()=>{if(!K)return;let we=B.current,Le=we.style.height;we.style.height="auto";let Ge=we.getBoundingClientRect().height;we.style.height=Le,I(Ge),y(qn=>qn.find(hr=>hr.toastId===p.id)?qn.map(hr=>hr.toastId===p.id?{...hr,height:Ge}:hr):[{toastId:p.id,height:Ge,position:p.position},...qn])},[K,p.title,p.description,y,p.id]);let bo=C.useCallback(()=>{X(!0),_(Nn.current),y(we=>we.filter(Le=>Le.toastId!==p.id)),setTimeout(()=>{E(p)},wA)},[p,E,y,Nn]);C.useEffect(()=>{if(p.promise&&Re==="loading"||p.duration===1/0||p.type==="loading")return;let we;return S||g||$&&Lv?(()=>{if(vo.current<yo.current){let Le=new Date().getTime()-yo.current;J.current=J.current-Le}vo.current=new Date().getTime()})():J.current!==1/0&&(yo.current=new Date().getTime(),we=setTimeout(()=>{var Le;(Le=p.onAutoClose)==null||Le.call(p,p),bo()},J.current)),()=>clearTimeout(we)},[S,g,p,Re,$,Lv,bo]),C.useEffect(()=>{p.delete&&bo()},[bo,p.delete]);function kM(){var we,Le,Ge;return M!=null&&M.loading?C.createElement("div",{className:V(A==null?void 0:A.loader,(we=p==null?void 0:p.classNames)==null?void 0:we.loader,"sonner-loader"),"data-visible":Re==="loading"},M.loading):se?C.createElement("div",{className:V(A==null?void 0:A.loader,(Le=p==null?void 0:p.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":Re==="loading"},se):C.createElement(nA,{className:V(A==null?void 0:A.loader,(Ge=p==null?void 0:p.classNames)==null?void 0:Ge.loader),visible:Re==="loading"})}return C.createElement("li",{tabIndex:0,ref:B,className:V(L,Wn,A==null?void 0:A.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,A==null?void 0:A.default,A==null?void 0:A[Re],(n=p==null?void 0:p.classNames)==null?void 0:n[Re]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:T,"data-styled":!(p.jsx||p.unstyled||f),"data-mounted":K,"data-promise":!!p.promise,"data-swiped":Ve,"data-removed":re,"data-visible":be,"data-y-position":hu,"data-x-position":wM,"data-index":x,"data-front":de,"data-swiping":me,"data-dismissible":Ie,"data-type":Re,"data-invert":xM,"data-swipe-out":Ae,"data-expanded":!!(S||z&&K),style:{"--index":x,"--toasts-before":x,"--z-index":k.length-x,"--offset":`${re?Se:Nn.current}px`,"--initial-height":z?"auto":`${P}px`,...R,...p.style},onPointerDown:we=>{Dp||!Ie||(q.current=new Date,_(Nn.current),we.target.setPointerCapture(we.pointerId),we.target.tagName!=="BUTTON"&&(pe(!0),Lr.current={x:we.clientX,y:we.clientY}))},onPointerUp:()=>{var we,Le,Ge,qn;if(Ae||!Ie)return;Lr.current=null;let hr=Number(((we=B.current)==null?void 0:we.style.getPropertyValue("--swipe-amount").replace("px",""))||0),pu=new Date().getTime()-((Le=q.current)==null?void 0:Le.getTime()),SM=Math.abs(hr)/pu;if(Math.abs(hr)>=bA||SM>.11){_(Nn.current),(Ge=p.onDismiss)==null||Ge.call(p,p),bo(),Ne(!0),Fe(!1);return}(qn=B.current)==null||qn.style.setProperty("--swipe-amount","0px"),pe(!1)},onPointerMove:we=>{var Le,Ge;if(!Lr.current||!Ie)return;let qn=we.clientY-Lr.current.y,hr=((Le=window.getSelection())==null?void 0:Le.toString().length)>0,pu=hu==="top"?Math.min(0,qn):Math.max(0,qn);Math.abs(pu)>0&&Fe(!0),!hr&&((Ge=B.current)==null||Ge.style.setProperty("--swipe-amount",`${pu}px`))}},xi&&!p.jsx?C.createElement("button",{"aria-label":N,"data-disabled":Dp,"data-close-button":!0,onClick:Dp||!Ie?()=>{}:()=>{var we;bo(),(we=p.onDismiss)==null||we.call(p,p)},className:V(A==null?void 0:A.closeButton,(o=p==null?void 0:p.classNames)==null?void 0:o.closeButton)},(i=M==null?void 0:M.close)!=null?i:aA):null,p.jsx||C.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:C.createElement(C.Fragment,null,Re||p.icon||p.promise?C.createElement("div",{"data-icon":"",className:V(A==null?void 0:A.icon,(s=p==null?void 0:p.classNames)==null?void 0:s.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||kM():null,p.type!=="loading"?p.icon||(M==null?void 0:M[Re])||eA(Re):null):null,C.createElement("div",{"data-content":"",className:V(A==null?void 0:A.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},C.createElement("div",{"data-title":"",className:V(A==null?void 0:A.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?C.createElement("div",{"data-description":"",className:V(G,Rs,A==null?void 0:A.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),C.isValidElement(p.cancel)?p.cancel:p.cancel&&Lu(p.cancel)?C.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||D,onClick:we=>{var Le,Ge;Lu(p.cancel)&&Ie&&((Ge=(Le=p.cancel).onClick)==null||Ge.call(Le,we),bo())},className:V(A==null?void 0:A.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,C.isValidElement(p.action)?p.action:p.action&&Lu(p.action)?C.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||H,onClick:we=>{var Le,Ge;Lu(p.action)&&((Ge=(Le=p.action).onClick)==null||Ge.call(Le,we),!we.defaultPrevented&&bo())},className:V(A==null?void 0:A.actionButton,(d=p==null?void 0:p.classNames)==null?void 0:d.actionButton)},p.action.label):null))};function Ob(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}v.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:o=["altKey","KeyT"],expand:i,closeButton:s,className:a,offset:l,theme:c="light",richColors:u,duration:d,style:h,visibleToasts:p=mA,toastOptions:f,dir:g=Ob(),gap:y=vA,loadingIcon:b,icons:w,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:k,cn:S=xA}=t,[E,T]=C.useState([]),j=C.useMemo(()=>Array.from(new Set([r].concat(E.filter($=>$.position).map($=>$.position)))),[E,r]),[R,D]=C.useState([]),[H,L]=C.useState(!1),[G,F]=C.useState(!1),[Q,Y]=C.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),se=C.useRef(null),z=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=C.useRef(null),M=C.useRef(!1),N=C.useCallback($=>{T(V=>{var K;return(K=V.find(te=>te.id===$.id))!=null&&K.delete||gn.dismiss($.id),V.filter(({id:te})=>te!==$.id)})},[]);return C.useEffect(()=>gn.subscribe($=>{if($.dismiss){T(V=>V.map(K=>K.id===$.id?{...K,delete:!0}:K));return}setTimeout(()=>{ny.flushSync(()=>{T(V=>{let K=V.findIndex(te=>te.id===$.id);return K!==-1?[...V.slice(0,K),{...V[K],...$},...V.slice(K+1)]:[$,...V]})})})}),[]),C.useEffect(()=>{if(c!=="system"){Y(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;let $=window.matchMedia("(prefers-color-scheme: dark)");try{$.addEventListener("change",({matches:V})=>{Y(V?"dark":"light")})}catch{$.addListener(({matches:V})=>{try{Y(V?"dark":"light")}catch(K){console.error(K)}})}},[c]),C.useEffect(()=>{E.length<=1&&L(!1)},[E]),C.useEffect(()=>{let $=V=>{var K,te;o.every(re=>V[re]||V.code===re)&&(L(!0),(K=se.current)==null||K.focus()),V.code==="Escape"&&(document.activeElement===se.current||(te=se.current)!=null&&te.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[o]),C.useEffect(()=>{if(se.current)return()=>{A.current&&(A.current.focus({preventScroll:!0}),A.current=null,M.current=!1)}},[se.current]),C.createElement("section",{"aria-label":`${x} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false"},j.map(($,V)=>{var K;let[te,re]=$.split("-");return E.length?C.createElement("ol",{key:$,dir:g==="auto"?Ob():g,tabIndex:-1,ref:se,className:a,"data-sonner-toaster":!0,"data-theme":Q,"data-y-position":te,"data-lifted":H&&E.length>1&&!i,"data-x-position":re,style:{"--front-toast-height":`${((K=R[0])==null?void 0:K.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||gA,"--width":`${yA}px`,"--gap":`${y}px`,...h},onBlur:X=>{M.current&&!X.currentTarget.contains(X.relatedTarget)&&(M.current=!1,A.current&&(A.current.focus({preventScroll:!0}),A.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||M.current||(M.current=!0,A.current=X.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{G||L(!1)},onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},E.filter(X=>!X.position&&V===0||X.position===$).map((X,me)=>{var pe,Ae;return C.createElement(kA,{key:X.id,icons:w,index:me,toast:X,defaultRichColors:u,duration:(pe=f==null?void 0:f.duration)!=null?pe:d,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:n,visibleToasts:p,closeButton:(Ae=f==null?void 0:f.closeButton)!=null?Ae:s,interacting:G,position:$,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:N,toasts:E.filter(Ne=>Ne.position==X.position),heights:R.filter(Ne=>Ne.position==X.position),setHeights:D,expandByDefault:i,gap:y,loadingIcon:b,expanded:H,pauseWhenPageIsHidden:k,cn:S})})):null}))});const SA=({time:t,timerState:e,formatTime:n})=>{const r=()=>{switch(e){case"STUDYING":return"bg-[#E8F5E9]";case"BREAK":return"bg-[#FFF8E1]";default:return"bg-[#F5F5F5]"}};return m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h2",{className:"text-3xl font-bold mb-6",children:"מעקב זמן למידה"}),m.jsx("div",{className:`${r()} rounded-2xl p-8 transition-colors duration-300`,children:m.jsx("div",{className:"text-6xl font-bold tracking-wider font-mono",dir:"ltr",children:n(t)})})]})},CA=tp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ce=v.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...o},i)=>{const s=r?us:"button";return m.jsx(s,{className:ve(CA({variant:e,size:n,className:t})),ref:i,...o})});ce.displayName="Button";const EA=({timerState:t,onStartStudy:e,onStartBreak:n,onStop:r})=>m.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[m.jsxs(ce,{onClick:e,disabled:t==="STUDYING",variant:"outline",className:"flex-1 max-w-[200px] bg-white hover:bg-gray-50 border-gray-300",children:[m.jsx(aC,{className:"ml-2 h-4 w-4"}),"למידה"]}),m.jsxs(ce,{onClick:n,disabled:t==="BREAK",variant:"outline",className:"flex-1 max-w-[200px] bg-gray-400 hover:bg-gray-500 text-white border-0",children:[m.jsx(eR,{className:"ml-2 h-4 w-4"}),"הפסקה"]}),m.jsxs(ce,{onClick:r,disabled:t==="STOPPED",className:"flex-1 max-w-[200px] bg-red-500 hover:bg-red-600 text-white border-0",children:[m.jsx(Wj,{className:"ml-2 h-4 w-4"}),"עצור"]})]}),WC=t=>{const e=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4),r=Math.floor(t%6e4/1e3);return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},TA=({sessions:t,onCalculateSummary:e,onSessionsUpdate:n})=>{const r=a=>new Date(a).toLocaleString("he-IL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),o=async a=>{try{const{error:l}=await ue.from("timer_sessions").delete().eq("id",a);if(l)throw l;Ye.success("הטיימר נמחק בהצלחה"),n()}catch(l){console.error("Error deleting session:",l),Ye.error("שגיאה במחיקת הטיימר")}},i=async a=>{try{const l=new Date(a);l.setHours(0,0,0,0);const c=new Date(a);c.setHours(23,59,59,999);const{error:u}=await ue.from("timer_sessions").delete().gte("started_at",l.toISOString()).lte("started_at",c.toISOString());if(u)throw u;Ye.success("כל הטיימרים של היום נמחקו בהצלחה"),n()}catch(l){console.error("Error deleting sessions:",l),Ye.error("שגיאה במחיקת הטיימרים")}},s=t.reduce((a,l)=>{const c=new Date(l.started_at).toLocaleDateString("he-IL");return a[c]||(a[c]=[]),a[c].push(l),a},{});return m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"space-y-4 max-h-[300px] overflow-y-auto",children:Object.entries(s).map(([a,l])=>m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:"font-semibold",children:a}),m.jsxs(ce,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",onClick:()=>i(new Date(l[0].started_at).toISOString()),children:[m.jsx(ds,{className:"h-4 w-4 mr-1"}),"מחק את כל הטיימרים של היום"]})]}),l.map(c=>m.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg ${c.type==="study"?"bg-green-50":"bg-yellow-50"}`,children:[m.jsxs("div",{className:"flex items-center gap-2",children:[c.type==="study"?m.jsx(Bj,{className:"h-4 w-4 text-green-600"}):m.jsx(Kj,{className:"h-4 w-4 text-yellow-600"}),m.jsx("span",{children:r(c.started_at)})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"text-left tabular-nums",children:WC(c.duration||0)}),m.jsx(ce,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",onClick:()=>o(c.id),children:m.jsx(Ia,{className:"h-4 w-4"})})]})]},c.id))]},a))}),m.jsx(ce,{onClick:e,className:"w-full bg-gray-900 text-white hover:bg-gray-800",children:"הסתר היסטוריה"})]})},NA=({totalStudyTime:t,totalBreakTime:e,onClose:n})=>m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-lg font-medium mb-4",children:"זמן למידה"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{children:"0%"}),m.jsx("span",{children:"50%"}),m.jsx("span",{children:"100%"})]}),m.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-black rounded-full transition-all duration-300",style:{width:`${Math.min(t/(t+e)*100,100)}%`}})}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{children:"זמן למידה"}),m.jsx("span",{className:"font-mono",children:WC(t)})]})]})]})}),m.jsx(ce,{onClick:n,className:"w-full bg-gray-900 text-white hover:bg-gray-800",children:"הסתר סיכום"})]}),MA=({isOpen:t,onToggle:e,onDiaryToggle:n})=>m.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[m.jsxs(ce,{onClick:e,variant:"outline",className:"flex items-center gap-2 px-6 py-2 bg-white hover:bg-gray-50 border-gray-300",children:[m.jsx(nC,{className:"w-4 h-4"}),"סיכום"]}),m.jsxs(ce,{onClick:n,variant:"outline",className:"flex items-center gap-2 px-6 py-2 bg-white hover:bg-gray-50 border-gray-300",children:[m.jsx(Vj,{className:"w-4 h-4"}),"יומן"]})]}),_A=()=>{const[t,e]=v.useState("STOPPED"),[n,r]=v.useState(0),[o,i]=v.useState([]),[s,a]=v.useState(0),[l,c]=v.useState(0),[u,d]=v.useState(!1),[h,p]=v.useState(!1),f=C.useRef(null),{session:g}=Ts(),[y,b]=v.useState(null);v.useEffect(()=>(w(),()=>{f.current&&clearInterval(f.current)}),[]);const w=async()=>{var R;if(!((R=g==null?void 0:g.user)!=null&&R.id))return;const{data:D,error:H}=await ue.from("timer_sessions").select("*").eq("user_id",g.user.id).order("started_at",{ascending:!1});if(H){console.error("Error loading sessions:",H),Ye.error("שגיאה בטעינת ההיסטוריה");return}i(D||[]),x(D||[])},x=R=>{let D=0,H=0;R.forEach(L=>{L.duration&&(L.type==="study"?D+=L.duration:L.type==="break"&&(H+=L.duration))}),a(D),c(H)},k=async R=>{var D;if(!((D=g==null?void 0:g.user)!=null&&D.id)){Ye.error("יש להתחבר כדי להשתמש בטיימר");return}y&&await S();const{data:H,error:L}=await ue.from("timer_sessions").insert({user_id:g.user.id,type:R,started_at:new Date().toISOString()}).select().single();if(L){console.error("Error starting timer:",L),Ye.error("שגיאה בהפעלת הטיימר");return}b(H.id),e(R==="study"?"STUDYING":"BREAK"),r(0),f.current&&clearInterval(f.current),f.current=setInterval(()=>{r(G=>G+1e3)},1e3),Ye.success(R==="study"?"התחלת זמן למידה!":"התחלת זמן הפסקה!")},S=async()=>{var R;if(!((R=g==null?void 0:g.user)!=null&&R.id)||!y)return;f.current&&clearInterval(f.current);const{error:D}=await ue.from("timer_sessions").update({duration:n,ended_at:new Date().toISOString()}).eq("id",y);if(D){console.error("Error stopping timer:",D),Ye.error("שגיאה בעצירת הטיימר");return}e("STOPPED"),r(0),b(null),w(),Ye.info("הטיימר נעצר!")},E=R=>{const D=Math.floor(R/1e3),H=Math.floor(D/3600),L=Math.floor(D%3600/60),G=D%60;return`${H.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}:${G.toString().padStart(2,"0")}`},T=()=>{d(!u),h&&p(!1)},j=()=>{p(!h),u&&d(!1)};return m.jsx(ct,{className:"w-full max-w-2xl mx-auto bg-white shadow-sm border border-gray-100 rounded-3xl overflow-hidden",children:m.jsxs(Vo,{className:"p-8 space-y-6",children:[m.jsx(SA,{time:n,timerState:t,formatTime:E}),m.jsx(EA,{timerState:t,onStartStudy:()=>k("study"),onStartBreak:()=>k("break"),onStop:S}),m.jsx(MA,{isOpen:u||h,onToggle:j,onDiaryToggle:T}),u&&m.jsx(TA,{sessions:o,totalStudyTime:s,totalBreakTime:l,onCalculateSummary:()=>d(!1),onSessionsUpdate:w}),h&&m.jsx(NA,{totalStudyTime:s,totalBreakTime:l,onClose:()=>p(!1)})]})})},bf=[{quote:"ההצלחה היא סך כל המאמצים הקטנים שחוזרים על עצמם יום אחר יום.",author:"רוברט קולייר"},{quote:"הדרך הטובה ביותר לחזות את העתיד היא ליצור אותו.",author:"פיטר דרוקר"},{quote:"כל מומחה היה פעם מתחיל.",author:"רותרפורד ב. הייז"},{quote:"ההשקעה בידע משלמת את הריבית הטובה ביותר.",author:"בנג'מין פרנקלין"},{quote:"הצעד הראשון להצלחה הוא האמונה שאתה יכול.",author:"טוני רובינס"}];function OA(){const[t,e]=v.useState(bf[0]);return v.useEffect(()=>{const n=setInterval(()=>{const r=Math.floor(Math.random()*bf.length);e(bf[r])},1e4);return()=>clearInterval(n)},[]),m.jsx(ct,{className:"p-6 bg-gradient-to-r from-purple-500 to-pink-500 text-white",children:m.jsxs("div",{className:"text-center space-y-4 animate-fadeIn",children:[m.jsxs("blockquote",{className:"text-xl italic",children:['"',t.quote,'"']}),m.jsxs("footer",{className:"text-sm",children:["- ",t.author]})]})})}var yy="Progress",vy=100,[jA,aq]=Tn(yy),[RA,PA]=jA(yy),qC=v.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:o,getValueLabel:i=AA,...s}=t;(o||o===0)&&!jb(o)&&console.error(DA(`${o}`,"Progress"));const a=jb(o)?o:vy;r!==null&&!Rb(r,a)&&console.error(IA(`${r}`,"Progress"));const l=Rb(r,a)?r:null,c=th(l)?i(l,a):void 0;return m.jsx(RA,{scope:n,value:l,max:a,children:m.jsx(ge.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":th(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":GC(l,a),"data-value":l??void 0,"data-max":a,...s,ref:e})})});qC.displayName=yy;var KC="ProgressIndicator",JC=v.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,o=PA(KC,n);return m.jsx(ge.div,{"data-state":GC(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:e})});JC.displayName=KC;function AA(t,e){return`${Math.round(t/e*100)}%`}function GC(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function th(t){return typeof t=="number"}function jb(t){return th(t)&&!isNaN(t)&&t>0}function Rb(t,e){return th(t)&&!isNaN(t)&&t<=e&&t>=0}function DA(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${vy}\`.`}function IA(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${vy} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var YC=qC,LA=JC;const QC=v.forwardRef(({className:t,value:e,...n},r)=>m.jsx(YC,{ref:r,className:ve("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:m.jsx(LA,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));QC.displayName=YC.displayName;var zA=pk.useId||(()=>{}),$A=0;function eo(t){const[e,n]=v.useState(zA());return Nr(()=>{n(r=>r??String($A++))},[t]),e?`radix-${e}`:""}var by="Collapsible",[FA,XC]=Tn(by),[BA,wy]=FA(by),ZC=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:i,onOpenChange:s,...a}=t,[l=!1,c]=fo({prop:r,defaultProp:o,onChange:s});return m.jsx(BA,{scope:n,disabled:i,contentId:eo(),open:l,onOpenToggle:v.useCallback(()=>c(u=>!u),[c]),children:m.jsx(ge.div,{"data-state":ky(l),"data-disabled":i?"":void 0,...a,ref:e})})});ZC.displayName=by;var eE="CollapsibleTrigger",tE=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,o=wy(eE,n);return m.jsx(ge.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":ky(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:e,onClick:le(t.onClick,o.onOpenToggle)})});tE.displayName=eE;var xy="CollapsibleContent",nE=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=wy(xy,t.__scopeCollapsible);return m.jsx(Bt,{present:n||o.open,children:({present:i})=>m.jsx(VA,{...r,ref:e,present:i})})});nE.displayName=xy;var VA=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:o,...i}=t,s=wy(xy,n),[a,l]=v.useState(r),c=v.useRef(null),u=$e(e,c),d=v.useRef(0),h=d.current,p=v.useRef(0),f=p.current,g=s.open||a,y=v.useRef(g),b=v.useRef(void 0);return v.useEffect(()=>{const w=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(w)},[]),Nr(()=>{const w=c.current;if(w){b.current=b.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const x=w.getBoundingClientRect();d.current=x.height,p.current=x.width,y.current||(w.style.transitionDuration=b.current.transitionDuration,w.style.animationName=b.current.animationName),l(r)}},[s.open,r]),m.jsx(ge.div,{"data-state":ky(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!g,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":f?`${f}px`:void 0,...t.style},children:g&&o})});function ky(t){return t?"open":"closed"}var UA=ZC,HA=tE,WA=nE,qA=v.createContext(void 0);function ru(t){const e=v.useContext(qA);return t||e||"ltr"}var mo="Accordion",KA=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Sy,JA,GA]=Yh(mo),[cp,lq]=Tn(mo,[GA,XC]),Cy=XC(),rE=C.forwardRef((t,e)=>{const{type:n,...r}=t,o=r,i=r;return m.jsx(Sy.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?m.jsx(ZA,{...i,ref:e}):m.jsx(XA,{...o,ref:e})})});rE.displayName=mo;var[oE,YA]=cp(mo),[iE,QA]=cp(mo,{collapsible:!1}),XA=C.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:i=!1,...s}=t,[a,l]=fo({prop:n,defaultProp:r,onChange:o});return m.jsx(oE,{scope:t.__scopeAccordion,value:a?[a]:[],onItemOpen:l,onItemClose:C.useCallback(()=>i&&l(""),[i,l]),children:m.jsx(iE,{scope:t.__scopeAccordion,collapsible:i,children:m.jsx(sE,{...s,ref:e})})})}),ZA=C.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...i}=t,[s=[],a]=fo({prop:n,defaultProp:r,onChange:o}),l=C.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=C.useCallback(u=>a((d=[])=>d.filter(h=>h!==u)),[a]);return m.jsx(oE,{scope:t.__scopeAccordion,value:s,onItemOpen:l,onItemClose:c,children:m.jsx(iE,{scope:t.__scopeAccordion,collapsible:!0,children:m.jsx(sE,{...i,ref:e})})})}),[eD,up]=cp(mo),sE=C.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:i="vertical",...s}=t,a=C.useRef(null),l=$e(a,e),c=JA(n),u=ru(o)==="ltr",d=le(t.onKeyDown,h=>{var p;if(!KA.includes(h.key))return;const f=h.target,g=c().filter(j=>{var R;return!((R=j.ref.current)!=null&&R.disabled)}),y=g.findIndex(j=>j.ref.current===f),b=g.length;if(y===-1)return;h.preventDefault();let w=y;const x=0,k=b-1,S=()=>{w=y+1,w>k&&(w=x)},E=()=>{w=y-1,w<x&&(w=k)};switch(h.key){case"Home":w=x;break;case"End":w=k;break;case"ArrowRight":i==="horizontal"&&(u?S():E());break;case"ArrowDown":i==="vertical"&&S();break;case"ArrowLeft":i==="horizontal"&&(u?E():S());break;case"ArrowUp":i==="vertical"&&E();break}const T=w%b;(p=g[T].ref.current)==null||p.focus()});return m.jsx(eD,{scope:n,disabled:r,direction:o,orientation:i,children:m.jsx(Sy.Slot,{scope:n,children:m.jsx(ge.div,{...s,"data-orientation":i,ref:l,onKeyDown:r?void 0:d})})})}),nh="AccordionItem",[tD,Ey]=cp(nh),aE=C.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...o}=t,i=up(nh,n),s=YA(nh,n),a=Cy(n),l=eo(),c=r&&s.value.includes(r)||!1,u=i.disabled||t.disabled;return m.jsx(tD,{scope:n,open:c,disabled:u,triggerId:l,children:m.jsx(UA,{"data-orientation":i.orientation,"data-state":pE(c),...a,...o,ref:e,disabled:u,open:c,onOpenChange:d=>{d?s.onItemOpen(r):s.onItemClose(r)}})})});aE.displayName=nh;var lE="AccordionHeader",cE=C.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,o=up(mo,n),i=Ey(lE,n);return m.jsx(ge.h3,{"data-orientation":o.orientation,"data-state":pE(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:e})});cE.displayName=lE;var Sg="AccordionTrigger",uE=C.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,o=up(mo,n),i=Ey(Sg,n),s=QA(Sg,n),a=Cy(n);return m.jsx(Sy.ItemSlot,{scope:n,children:m.jsx(HA,{"aria-disabled":i.open&&!s.collapsible||void 0,"data-orientation":o.orientation,id:i.triggerId,...a,...r,ref:e})})});uE.displayName=Sg;var dE="AccordionContent",hE=C.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,o=up(mo,n),i=Ey(dE,n),s=Cy(n);return m.jsx(WA,{role:"region","aria-labelledby":i.triggerId,"data-orientation":o.orientation,...s,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});hE.displayName=dE;function pE(t){return t?"open":"closed"}var nD=rE,rD=aE,oD=cE,fE=uE,mE=hE;const iD=nD,gE=v.forwardRef(({className:t,...e},n)=>m.jsx(rD,{ref:n,className:ve("border-b",t),...e}));gE.displayName="AccordionItem";const yE=v.forwardRef(({className:t,children:e,...n},r)=>m.jsx(oD,{className:"flex",children:m.jsxs(fE,{ref:r,className:ve("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,m.jsx(oC,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));yE.displayName=fE.displayName;const vE=v.forwardRef(({className:t,children:e,...n},r)=>m.jsx(mE,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:m.jsx("div",{className:ve("pb-4 pt-0",t),children:e})}));vE.displayName=mE.displayName;const sD=[{title:"ברוכים הבאים",lessons:[{title:"ברוכים הבאים - פז",duration:"00:14:12",completed:!1},{title:"קניין רוחני",duration:"00:02:44",completed:!1},{title:"הסרת אחריות",duration:"00:02:01",completed:!1},{title:"ברוכים הבאים - חי טל",duration:"00:13:17",completed:!1}]},{title:"מבוא לתחום הקריפטו",lessons:[{title:"מה זה כסף",duration:"00:11:13",completed:!1},{title:"מה זה ביטקוין",duration:"00:08:53",completed:!1},{title:"ביטקוין מאסטר פלאן",duration:"00:06:54",completed:!1},{title:"מה זה בלוקציין חלק א׳",duration:"00:04:59",completed:!1},{title:"מה זה בלוקציין חלק ב׳",duration:"00:07:20",completed:!1},{title:"פתיחת ארנק מטאמאסק יחד עם פז",duration:"00:12:01",completed:!1},{title:"מבוא ל-CoinMarketCap",duration:"00:07:20",completed:!1},{title:"העמקה ב-CoinMarketCap חלק א׳",duration:"00:15:54",completed:!1},{title:"העמקה ב-CoinMarketCap חלק ב׳",duration:"00:16:05",completed:!1},{title:"העמקה ב-CoinMarketCap חלק ג׳",duration:"00:19:12",completed:!1},{title:"העמקה ב-CoinMarketCap חלק ד׳",duration:"00:09:18",completed:!1},{title:"העמקה ב-CoinMarketCap חלק ה׳",duration:"00:04:52",completed:!1}]},{title:"מבוא לתחום המסחר והשקעות",lessons:[{title:"ירידה לקרקע לפני שנכנסים לעומק חלק א׳",duration:"00:15:18",completed:!1},{title:"ירידה לקרקע לפני שנכנסים לעומק חלק ב׳",duration:"00:09:17",completed:!1},{title:"ההבדל בין סוחר למהמר חלק א׳",duration:"00:15:12",completed:!1},{title:"ההבדל בין סוחר למהמר חלק ב׳",duration:"00:13:14",completed:!1},{title:"ההבדל בין סוחר למשקיע",duration:"00:16:14",completed:!1},{title:"סוגי סוחרים ומשקיעים",duration:"00:15:54",completed:!1},{title:"איזה סוחר/משקיע מתאים לי להיות?",duration:"00:10:47",completed:!1},{title:"עונות השוק",duration:"00:18:04",completed:!1},{title:"ללמוד לדבר עם נרות - סיפורו של נר",duration:"00:09:39",completed:!1},{title:"להרוויח מכל תנודה- לונג ושורט ההסבר",duration:"00:06:24",completed:!1},{title:"הלוויתנים מקנאים בך!",duration:"00:06:49",completed:!1},{title:"מסחר במינוף- מה זה ואיך עושים את זה נכון",duration:"00:05:45",completed:!1}]},{title:"ניתוח טכני",lessons:[{title:"הכרות עם מערכת TradingView",duration:"00:26:04",completed:!1},{title:"מבוא לניתוח טכני",duration:"00:13:25",completed:!1},{title:"תמיכה והתנגדות",duration:"00:15:40",completed:!1},{title:"תמיכה והתנגדות + קווי מגמה",duration:"00:50:32",completed:!1},{title:"תבניות ניתוח טכני",duration:"00:15:24",completed:!1},{title:"מגמות עולות ויורדות",duration:"00:05:20",completed:!1}]},{title:"זירת המסחר ביננס",lessons:[{title:"ביננס שיעור ראשון פתיחה והגדרות",duration:"00:31:08",completed:!1},{title:"קנייה באשראי דרך אפליקציית ביננס",duration:"00:02:49",completed:!1},{title:"איך להעביר כסף מביננס",duration:"00:08:54",completed:!1},{title:"פקודות בביננס ההסבר המקיף",duration:"00:48:29",completed:!1},{title:"ביננס שיעור שלישי- סרגל כלים, קווי מגמה ופיבונצ'י",duration:"00:30:27",completed:!1},{title:"פיבונאצ׳י הסבר נוסף חי טל",duration:"00:23:24",completed:!1}]},{title:"מטבעות מתפוצצים והשקעות",lessons:[{title:"איתורמטבעות וטקטיקת הסקטורים",duration:"00:16:28",completed:!1},{title:"ריגול ברשת הבלוקציין",duration:"00:10:28",completed:!1},{title:"ליקוויד, מדד הפחד, אינדיקציות להשקעות ערך",duration:"00:08:00",completed:!1},{title:"מה זה DCA ואיך עושים את זה נכון",duration:"00:17:02",completed:!1}]},{title:"עבודה עם ארנקים",lessons:[{title:"טרזור המדריך המקיף",duration:"00:22:43",completed:!1},{title:"כיצד לפתוח ולעבוד עם טרסט וולט",duration:"00:05:48",completed:!1},{title:"הגדרה ועבודה עם ארנק מטאמסק",duration:"00:28:01",completed:!1},{title:"קניית קריפטו דרך מטאמאסק",duration:"00:14:12",completed:!1}]},{title:"אינדיקטורים",lessons:[{title:"ממוצעים נעים",duration:"00:15:40",completed:!1},{title:"אינדיקטור MACD",duration:"00:19:41",completed:!1},{title:"רצועת בולינגר",duration:"00:10:05",completed:!1},{title:"סוקסטיק",duration:"00:15:38",completed:!1},{title:"ענן אישימוקו",duration:"00:34:51",completed:!1},{title:"אינדיקטור RSI",duration:"00:07:48",completed:!1},{title:"ויוואפ אינדיקטור",duration:"00:05:27",completed:!1}]},{title:"שיעורים מתקדמים",lessons:[{title:"סטייקינג וסייבינג- דברים שחייבים לדעת",duration:"00:18:32",completed:!1},{title:"פסיכולוגיה של סוחר",duration:"00:19:08",completed:!1}]},{title:"סמינר מסחר לייב עם פז",lessons:[{title:"סמינר מסחר חלק 1",duration:"01:30:48",completed:!1},{title:"סמינר מסחר חלק 2",duration:"01:33:05",completed:!1}]},{title:"תאוריית וייקוף",lessons:[{title:"תאוריית וייקוף בסיס חלק א׳",duration:"00:18:18",completed:!1},{title:"תאוריית וייקוף בסיס חלק ב׳",duration:"00:10:54",completed:!1},{title:"תאוריית וייקוף מודל איסוף ופיזור חלק א׳",duration:"00:17:43",completed:!1},{title:"תאוריית וייקוף מודל איסוף ופיזור חלק ב׳",duration:"00:19:04",completed:!1},{title:"תאוריית וייקוף מודל תהליכים חוזרים ואלכסוניים",duration:"00:08:13",completed:!1},{title:"תאוריית וייקוף סינרגיה בין מסגרות זמן ותתי תהליכים",duration:"00:05:23",completed:!1}]},{title:"מבנה שוק",lessons:[{title:"מבנה שוק חלק א׳",duration:"00:08:53",completed:!1},{title:"מבנה שוק חלק ב׳",duration:"00:15:36",completed:!1},{title:"מבנה שוק חלק ג׳",duration:"00:12:00",completed:!1}]},{title:"המשקפיים של חי טל",lessons:[{title:"המשקפיים של חי טל חלק א׳ - זיהוי וניתוח תהליכים חלק א׳",duration:"00:14:59",completed:!1},{title:"המשקפיים של חי טל חלק א׳ - זיהוי וניתוח תהליכים חלק ב׳",duration:"00:20:07",completed:!1},{title:"המשקפיים של חי טל חלק ב׳ - סינרגיה בין מסגרות זמן והתזמון המושלם",duration:"00:13:56",completed:!1},{title:"המשקפיים של חי טל חלק ג׳ - אסטרטגיית הטיסה ושרשור עסקאות",duration:"00:18:47",completed:!1},{title:"המשקפיים של חי טל חלק ד׳ - אסטרטגיית שבירת הכנף חלק א׳",duration:"00:14:11",completed:!1},{title:"המשקפיים של חי טל חלק ד׳ - אסטרטגיית שבירת הכנף חלק ב׳",duration:"00:15:59",completed:!1},{title:"המשקפיים של חי טל חלק ד׳ - אסטרטגיית שבירת הכנף חלק ג׳",duration:"00:13:09",completed:!1}]},{title:"סמינר לייב הפאזל מתחיל להתחבר",lessons:[{title:"חלק א׳ - סקירת שוק ומדדים. (13/3/2023)",duration:"00:29:03",completed:!1},{title:"חלק ב׳ - שאלות תשובות קצר.",duration:"00:08:18",completed:!1},{title:"חלק ג׳ - המרכיב הרגשי במסחר.",duration:"01:21:36",completed:!1},{title:"הקדמה וייקוף",duration:"00:01:04",completed:!1},{title:"חלק ד׳ - לדבר וויקוף שוטף.",duration:"02:23:05",completed:!1},{title:"חלק ה׳ - מחלת הסטופ הצמוד מדי.",duration:"00:25:54",completed:!1},{title:"חלק ו׳ - צ׳וצ ובוס ואיך ממקסמים דרכם עסקה.",duration:"00:38:18",completed:!1}]},{title:"סמינר לייב תאוריית וויקוף *להעשרה בלבד*",lessons:[{title:"הקדמה וייקוף",duration:"00:01:04",completed:!1},{title:"פסיכולוגיה א׳ - ללמוד כדי להבין ולא כדי לזכור.",duration:"00:08:34",completed:!1},{title:"פסיכולוגיה ב׳+ג׳ - דרך קצרה שהיא ארוכה ודרך ארוכה שהיא קצרה.",duration:"00:33:56",completed:!1},{title:"פסיכולוגיה ד׳ - המוח תבניתי ומחפש כל הזמן לאשר את מה שאנחנו חושבים. (הטיית האישוש)",duration:"00:20:04",completed:!1},{title:"שיעור מסמינר הפאזל מתחיל להתחבר - לדבר וייקוף שוטף.",duration:"02:23:05",completed:!1},{title:"ווייקוף א׳ - כשסוחרים לפי חוקי ווייקוף סוחרים על מטבע שמכבד את אותם חוקים + מבנה מתומצת CHOCH/BOS.",duration:"00:18:55",completed:!1},{title:"ווייקוף ב׳ - מחיר ׳מתוח׳ - רק כשהפוטנציאל דחיפה מומש, מתחיל להיגמר, ונכנס כוח נגדי חזק.",duration:"01:02:56",completed:!1},{title:"ווייקוף ג׳ - חוק מאמץ מול תוצאה.",duration:"00:25:18",completed:!1},{title:"ווייקוף ד׳ - איסופים ופיזורים חוזרים - המשכיות או היפוך? + מתווה ניהול עסקה.",duration:"01:55:35",completed:!1},{title:"לחבר את הנקודות א׳ - בניית וואצליסט של מטבעות הנסחרים לפי ווייקוף.",duration:"00:07:27",completed:!1},{title:"לחבר את הנקודות ב׳ עד ד׳ - יום מסחר בפועל.",duration:"00:11:54",completed:!1},{title:"ספונטני - מצאנו עסקה פוטנציאלית.",duration:"00:15:26",completed:!1},{title:"מה עושים מכאן + ניהול מנטלי בתוך עסקה.",duration:"00:15:44",completed:!1},{title:"המשך מה עושים מכאן + התמודדות מנטלית עם עסקה הפסדית.",duration:"01:09:38",completed:!1}]},{title:"אסטרטגיות מתקדמות",lessons:[{title:"אסטרטגיית מונטה קרלו",duration:"01:05:06",completed:!1},{title:"חיזוי פוטנציאל במגמה בשיטת מונטה קרלו",duration:"00:10:28",completed:!1},{title:"מונטה קרלו- שיעור 3",duration:"00:12:33",completed:!1},{title:"מסחר תעלות באסטרטגיית הריינג'",duration:"00:23:56",completed:!1}]},{title:"סמינר פרופסור להתכנסויות בלייב 19/3/23 עם חי טל",lessons:[{title:"חלק א׳ - סקירת שוק זריזה",duration:"00:14:25",completed:!1},{title:"חלק ב׳ - פרופסור להתכנסויות תיאוריה",duration:"01:05:07",completed:!1},{title:"חלק ג׳ - פרופסור להתכנסויות פרקטיקה",duration:"01:09:47",completed:!1},{title:"חלק ד׳ - איך מחיר זז",duration:"00:06:38",completed:!1},{title:"חלק ה׳ - התכנסות מחיר מנקודת מבט של וויקוף",duration:"00:12:32",completed:!1},{title:"חלק ו׳ - איך מצטרפים לעסקה, מה הפוטנציאל של התכנסות איכותית ואיך למקסם אותו",duration:"00:24:26",completed:!1}]},{title:"סמינר פרופסור לתבניות טכניות בלייב 29/3/23 עם חי טל",lessons:[{title:"חלק א׳ - סקירת שוק 29/3/23",duration:"00:29:01",completed:!1},{title:"חלק ב׳ - קטגוריות של תבניות",duration:"00:24:59",completed:!1},{title:"חלק ג׳ - תבנית איכותית מול תבנית מניפולציה",duration:"00:21:52",completed:!1},{title:"חלק ד׳ - הלכה למעשה על הגרף",duration:"00:40:11",completed:!1},{title:"חלק ה׳ - סיכום + שאלות תשובות",duration:"00:56:31",completed:!1}]},{title:"לייב שאלות תשובות עם חי טל 27/12/2022",lessons:[{title:"חלק א׳ - שאלות לגבי תאוריית וויקוף",duration:"00:19:51",completed:!1},{title:"חלק ב׳ - סינרגיה בין מסגרות זמן וניהול עסקה בהתאם",duration:"00:27:12",completed:!1},{title:"חלק ג׳ - איך סוחרים ספרינג נכון",duration:"00:16:13",completed:!1},{title:"חלק ד׳ - איך סוחרים היגמרות מוכרים נכון",duration:"00:14:55",completed:!1},{title:"חלק ה׳ - סימון נכון של תנועות מחיר",duration:"00:18:48",completed:!1},{title:"חלק ו׳ - תבניות והתנהלות בזמן עסקה",duration:"00:32:27",completed:!1},{title:"חלק ז׳ - איך פותחים עסקה בביננס",duration:"00:18:17",completed:!1},{title:"חלק ח׳ - פקודות בביננס וסינרגיה בין טווחי זמן",duration:"00:19:22",completed:!1},{title:"חלק ט׳ - טריקים של אינדקטורים",duration:"00:12:24",completed:!1},{title:"חלק י׳ - פאזות וויקוף ותפקידן",duration:"00:21:13",completed:!1}]},{title:"לייב שאלות תשובות עם חי טל 10/1/23",lessons:[{title:"חלק א׳ - סקירת שוק (10/1/2023)",duration:"00:38:35",completed:!1},{title:"חלק ב׳ - סקירת עומק של ביטקוין (10/1/2023)",duration:"00:18:12",completed:!1},{title:"חלק ג׳ - כניסה לעומק המשולש",duration:"00:22:38",completed:!1},{title:"חלק ד׳ - איך משקיעים נכון לטווח ארוך",duration:"00:37:36",completed:!1},{title:"חלק ה׳ - ההיגיון מאחורי תהליך הוויקוף ואיך מרוויחים ממנו",duration:"01:16:30",completed:!1},{title:"חלק ו׳ - איך משקיעים לטווח ארוך המשך",duration:"00:16:32",completed:!1},{title:"חלק ז׳ - תזמון עסקה בהתאם לוודאות",duration:"00:12:42",completed:!1}]},{title:"תוכנית עבודה למסחר בפועל",lessons:[{title:"חלק א׳ - סקירת שוק (29/1/2023)",duration:"00:16:36",completed:!1},{title:"חלק ב׳ - ניהול סיכונים",duration:"00:53:18",completed:!1},{title:"חלק ג׳ - ניהול עסקה + תרחיש מושלם לכניסה + איזורי איסור כניסה",duration:"00:21:43",completed:!1},{title:"חלק ד׳ - ניהול מנטלי",duration:"00:20:49",completed:!1},{title:"חלק ה׳ - אינדבדואליזציה + סיכום עסקה",duration:"00:23:01",completed:!1},{title:"חלק ו׳ - סוגי תוכניות עבודה",duration:"00:13:35",completed:!1},{title:"חלק ז׳ - שאלות תשובות",duration:"00:18:34",completed:!1}]},{title:"אסטרטגיית הטיסה של חי טל 21.6.23 (גרסא ישנה *להעשרה בלבד*)",lessons:[{title:"1. פתיחה והצגת נושאים",duration:"00:02:08",completed:!1},{title:"2. למה זה חשוב להיצמד לאסטרטגיה אחת",duration:"00:10:32",completed:!1},{title:"3. למה בחרתי דווקא באסטרטגיה הזאת ומה הייתרונות והחסרונות שלה",duration:"00:07:36",completed:!1},{title:"4. חלק א׳ - לימוד האסטרטגיה בפועל",duration:"00:25:25",completed:!1},{title:"4. חלק ב׳ - לימוד האסטרטגיה בפועל",duration:"00:31:09",completed:!1},{title:"4. חלק ג׳ - לימוד האסטרטגיה בפועל",duration:"00:21:48",completed:!1},{title:"5. דוגמאות של האסטרטגיה בפועל",duration:"00:31:21",completed:!1},{title:"6. פרמטרים לניהול עסקה",duration:"00:03:43",completed:!1},{title:"7. פרמטרים להגדלת עסקה",duration:"00:11:36",completed:!1},{title:"8. פרמטרים לסגירת עסקה הפסדית לפני הגעה לסטופ",duration:"00:13:51",completed:!1},{title:"9. פרמטרים לסגירת עסקה רווחית לפני הגעה לסטופ",duration:"00:23:12",completed:!1},{title:"10. סיכוי מול סיכון",duration:"00:07:33",completed:!1},{title:"11. פעולות לאחר סגירה הפסדית",duration:"00:24:01",completed:!1},{title:"12. איך מחשבים סטופ כולל עמלות",duration:"00:12:01",completed:!1},{title:"13. פעולות לאחר סגרה עסקה ריווחית",duration:"00:18:03",completed:!1},{title:"14. שאלות תשובות כללי",duration:"00:26:46",completed:!1}]},{title:"סמינר פרופסור להיצע וביקוש בלייב 2/4/23 עם חי טל",lessons:[{title:"חלק א׳ - סקירת שוק זריזה",duration:"00:04:47",completed:!1},{title:"חלק ב׳ - מה זה בכלל היצע וביקוש?",duration:"00:14:16",completed:!1},{title:"חלק ג׳ - מה הטייק של וויקוף על זה?",duration:"00:05:13",completed:!1},{title:"חלק ד׳ - איך זה נראה על הגרף? + מילון מושגים",duration:"00:31:19",completed:!1},{title:"חלק ה׳ - פרמטרים למדידת איכות האורדר בלוק + עסקה בפועל",duration:"00:47:09",completed:!1},{title:"חלק ו׳ - פרמטרים לאישור עסקה",duration:"00:32:33",completed:!1},{title:"חלק ז׳ - סיכום סמינר",duration:"00:09:21",completed:!1},{title:"חלק ח׳ - שאלות תשובות + תוכנית לספוט",duration:"00:13:04",completed:!1}]},{title:"היצע וביקוש למתקדמים",lessons:[{title:"חלק א- בחירת האורדר בלוק הסביר ביותר",duration:"01:09:12",completed:!1},{title:"חלק ב- שילוב אסטרטגיית המשכיות והיפוך לכדי מסחר אחד",duration:"00:19:57",completed:!1},{title:"חלק ג'- חיבור חלקי הפאזל",duration:"00:19:26",completed:!1}]},{title:"סמינר פרופסור לנזילות 24/7/23",lessons:[{title:"חלק א׳ - מה זה בכלל נזילות?",duration:"00:09:33",completed:!1},{title:"חלק ב׳ - איך מחיר זז?",duration:"00:09:38",completed:!1},{title:"חלק ג׳ - איך כל זה נראה על הגרף 1/3",duration:"00:08:16",completed:!1},{title:"חלק ג׳ - איך כל זה נראה על הגרף 2/3",duration:"00:08:05",completed:!1},{title:"חלק ג׳ - איך כל זה נראה על הגרף 3/3",duration:"01:02:50",completed:!1},{title:"חלק ד׳ - סיכום",duration:"00:12:34",completed:!1},{title:"חלק ה׳ - שאלות תשובות",duration:"00:23:48",completed:!1}]},{title:"סמינר מסחר בספוט",lessons:[{title:"הקדמה",duration:"00:01:01",completed:!1},{title:"פרק א׳ - מתי ולמה לסחור בספוט?",duration:"00:07:13",completed:!1},{title:"פרק ב׳ - מה אנחנו מחפשים?",duration:"00:15:21",completed:!1},{title:"פרק ג׳ - איך סוחרים את זה בפועל?",duration:"00:44:06",completed:!1},{title:"פרק ד׳ - דגשים וסייגים",duration:"00:06:02",completed:!1}]},{title:"סמינר כלים מנטליים של ווינרים",lessons:[{title:"נושאי הסמינר",duration:"00:03:12",completed:!1},{title:"התבודדות",duration:"00:17:33",completed:!1},{title:"פריפלואו + הרהור",duration:"00:20:02",completed:!1},{title:"יומן בוקר",duration:"00:15:40",completed:!1},{title:"יומן ערב",duration:"00:12:17",completed:!1},{title:"כלל פארטו",duration:"00:05:22",completed:!1},{title:"הסתכלות בעיניים",duration:"00:24:06",completed:!1},{title:"תזונה מנטלית",duration:"00:14:02",completed:!1},{title:"סיכום",duration:"00:02:07",completed:!1}]},{title:"סקירות שבועיות להעשרה",lessons:[{title:"סקירה שבועית עם חי טל 22.08.23",duration:"01:22:52",completed:!1},{title:"סקירה שבועית עם חי טל 29/08/2023",duration:"01:22:11",completed:!1},{title:"סקירה שבועית עם חי טל 5/9/2023",duration:"01:04:41",completed:!1},{title:"סקירה שבועית עם חי טל 12/10/2023",duration:"00:37:39",completed:!1},{title:"סקירה שבועית עם חי 23/01/24- סקירה על ביטקוין",duration:"00:20:24",completed:!1},{title:"סקירה שבועית עם חי 23/01/24- נתיב הכסף",duration:"00:13:15",completed:!1},{title:"סקירה שבועית עם חי 23/01/24- שאלות תשובות",duration:"00:49:35",completed:!1},{title:"סקירה שבועית עם חי טל- 07/02/24",duration:"00:18:49",completed:!1},{title:"סקירה שבועית עם חי טל- 07/02/24",duration:"00:14:23",completed:!1},{title:"סקירה שבועית עם חי טל- 07/02/24",duration:"00:08:03",completed:!1},{title:"סקירה שבועית עם חי טל- 07/02/24",duration:"00:04:04",completed:!1},{title:"סקירת שוק עם חי טל 03.07.2024",duration:"00:43:54",completed:!1},{title:"סקירת שוק עם חי טל 15.9.24",duration:"00:54:32",completed:!1},{title:"סקירת שוק עם חי טל 30.10.24 חלק א׳",duration:"00:31:53",completed:!1},{title:"סקירת שוק עם חי טל 30.10.24 חלק ב׳",duration:"00:20:30",completed:!1},{title:"סקירת שוק עם חי טל 6.11.24",duration:"00:56:12",completed:!1},{title:"סקירת שוק עם חי טל 21.11.24",duration:"00:45:06",completed:!1}]},{title:"סקירה שבועית עם חי טל - 18/04/24",lessons:[{title:"ביטקוין",duration:"00:12:54",completed:!1},{title:"ביטקוין חלק ב'",duration:"00:13:47",completed:!1},{title:"איתריום",duration:"00:04:32",completed:!1},{title:"USDT.D",duration:"00:04:12",completed:!1},{title:"BTC.D",duration:"00:07:40",completed:!1},{title:"שאלות תשובות",duration:"00:38:19",completed:!1}]}],Pb=sD,aD=tp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _c({className:t,variant:e,...n}){return m.jsx("div",{className:ve(aD({variant:e}),t),...n})}function lD(t){const e=v.useRef({value:t,previous:t});return v.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function bE(t){const[e,n]=v.useState(void 0);return Nr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Ty="Checkbox",[cD,cq]=Tn(Ty),[uD,dD]=cD(Ty),wE=v.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:i,required:s,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[h,p]=v.useState(null),f=$e(e,k=>p(k)),g=v.useRef(!1),y=h?u||!!h.closest("form"):!0,[b=!1,w]=fo({prop:o,defaultProp:i,onChange:c}),x=v.useRef(b);return v.useEffect(()=>{const k=h==null?void 0:h.form;if(k){const S=()=>w(x.current);return k.addEventListener("reset",S),()=>k.removeEventListener("reset",S)}},[h,w]),m.jsxs(uD,{scope:n,state:b,disabled:a,children:[m.jsx(ge.button,{type:"button",role:"checkbox","aria-checked":ei(b)?"mixed":b,"aria-required":s,"data-state":SE(b),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:f,onKeyDown:le(t.onKeyDown,k=>{k.key==="Enter"&&k.preventDefault()}),onClick:le(t.onClick,k=>{w(S=>ei(S)?!0:!S),y&&(g.current=k.isPropagationStopped(),g.current||k.stopPropagation())})}),y&&m.jsx(hD,{control:h,bubbles:!g.current,name:r,value:l,checked:b,required:s,disabled:a,form:u,style:{transform:"translateX(-100%)"},defaultChecked:ei(i)?!1:i})]})});wE.displayName=Ty;var xE="CheckboxIndicator",kE=v.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...o}=t,i=dD(xE,n);return m.jsx(Bt,{present:r||ei(i.state)||i.state===!0,children:m.jsx(ge.span,{"data-state":SE(i.state),"data-disabled":i.disabled?"":void 0,...o,ref:e,style:{pointerEvents:"none",...t.style}})})});kE.displayName=xE;var hD=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:o,...i}=t,s=v.useRef(null),a=lD(n),l=bE(e);v.useEffect(()=>{const u=s.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(a!==n&&h){const p=new Event("click",{bubbles:r});u.indeterminate=ei(n),h.call(u,ei(n)?!1:n),u.dispatchEvent(p)}},[a,n,r]);const c=v.useRef(ei(n)?!1:n);return m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??c.current,...i,tabIndex:-1,ref:s,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ei(t){return t==="indeterminate"}function SE(t){return ei(t)?"indeterminate":t?"checked":"unchecked"}var CE=wE,pD=kE;const EE=v.forwardRef(({className:t,...e},n)=>m.jsx(CE,{ref:n,className:ve("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:m.jsx(pD,{className:ve("flex items-center justify-center text-current"),children:m.jsx(rC,{className:"h-4 w-4"})})}));EE.displayName=CE.displayName;function fD({title:t,duration:e,isCompleted:n,onToggle:r}){return m.jsxs("li",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(EE,{checked:n,onCheckedChange:r}),m.jsx("label",{className:`text-sm ${n?"line-through text-muted-foreground":""}`,children:t})]}),m.jsx("span",{className:"text-sm text-muted-foreground",children:e.replace(/^00:/,"")})]})}function mD({index:t,title:e,lessons:n,completedLessons:r,onToggleLesson:o}){return m.jsxs(gE,{value:`section-${t}`,children:[m.jsx(yE,{className:"text-right",children:m.jsxs("div",{className:"flex justify-between w-full items-center",children:[m.jsx("span",{children:e}),m.jsxs(_c,{variant:"secondary",className:"ml-2",children:[n.length," שיעורים"]})]})}),m.jsx(vE,{children:m.jsx("ul",{className:"space-y-2",children:n.map((i,s)=>{const a=`${t}-${s}`;return m.jsx(fD,{title:i.title,duration:i.duration,isCompleted:r.has(a),onToggle:()=>o(a)},s)})})})]})}const gD={title:"ברוכים הבאים",lessons:[{title:"ברוכים הבאים - פז",duration:"00:14:12",completed:!1},{title:"קניין רוחני",duration:"00:02:44",completed:!1},{title:"הסרת אחריות",duration:"00:02:01",completed:!1},{title:"ברוכים הבאים - חי טל",duration:"00:13:17",completed:!1}]},yD={title:"מבוא לעולם הקריפטו",lessons:[{title:"מבוא לקריפטו",duration:"00:15:30",completed:!1},{title:"מהו ביטקוין",duration:"00:12:45",completed:!1},{title:"בלוקצ'יין",duration:"00:18:20",completed:!1},{title:"אלטקוינס",duration:"00:14:15",completed:!1}]},vD={title:"מבוא לתחום המסחר והשקעות",lessons:[{title:"ירידה לקרקע לפני שנכנסים לעומק חלק א׳",duration:"00:15:18",completed:!1},{title:"ירידה לקרקע לפני שנכנסים לעומק חלק ב׳",duration:"00:09:17",completed:!1},{title:"ההבדל בין סוחר למהמר חלק א׳",duration:"00:15:12",completed:!1},{title:"ההבדל בין סוחר למהמר חלק ב׳",duration:"00:13:14",completed:!1},{title:"ההבדל בין סוחר למשקיע",duration:"00:16:14",completed:!1},{title:"סוגי סוחרים ומשקיעים",duration:"00:15:54",completed:!1},{title:"איזה סוחר/משקיע מתאים לי להיות?",duration:"00:10:47",completed:!1},{title:"עונות השוק",duration:"00:18:04",completed:!1},{title:"ללמוד לדבר עם נרות - סיפורו של נר",duration:"00:09:39",completed:!1},{title:"להרוויח מכל תנודה- לונג ושורט ההסבר",duration:"00:06:24",completed:!1},{title:"הלוויתנים מקנאים בך!",duration:"00:06:49",completed:!1},{title:"מסחר במינוף- מה זה ואיך עושים את זה נכון",duration:"00:05:45",completed:!1}]},bD={title:"ניתוח טכני",lessons:[{title:"הכרות עם מערכת TradingView",duration:"00:26:04",completed:!1},{title:"מבוא לניתוח טכני",duration:"00:13:25",completed:!1},{title:"תמיכה והתנגדות",duration:"00:15:40",completed:!1},{title:"תמיכה והתנגדות + קווי מגמה",duration:"00:50:32",completed:!1},{title:"תבניות ניתוח טכני",duration:"00:15:24",completed:!1},{title:"מגמות עולות ויורדות",duration:"00:05:20",completed:!1}]},wD={title:"בורסת ביננס",lessons:[{title:"פתיחת חשבון בביננס",duration:"00:10:30",completed:!1},{title:"ממשק המסחר",duration:"00:15:45",completed:!1},{title:"סוגי הוראות",duration:"00:12:20",completed:!1},{title:"ניהול סיכונים",duration:"00:18:15",completed:!1}]},xD={title:"מטבעות מתפוצצים",lessons:[{title:"מבוא למטבעות מתפוצצים",duration:"00:20:15",completed:!1},{title:"זיהוי הזדמנויות",duration:"00:25:30",completed:!1},{title:"ניהול סיכונים",duration:"00:18:45",completed:!1},{title:"אסטרטגיות מסחר",duration:"00:22:10",completed:!1}]},kD={title:"עבודה עם ארנקים",lessons:[{title:"טרזור המדריך המקיף",duration:"00:22:43",completed:!1},{title:"כיצד לפתוח ולעבוד עם טרסט וולט",duration:"00:05:48",completed:!1},{title:"הגדרה ועבודה עם ארנק מטאמסק",duration:"00:28:01",completed:!1},{title:"קניית קריפטו דרך מטאמאסק",duration:"00:14:12",completed:!1}]},SD={title:"אינדיקטורים",lessons:[{title:"מבוא לאינדיקטורים",duration:"00:15:20",completed:!1},{title:"RSI",duration:"00:12:45",completed:!1},{title:"MACD",duration:"00:14:30",completed:!1},{title:"ממוצעים נעים",duration:"00:18:15",completed:!1}]},CD=[gD,yD,vD,bD,wD,xD,kD,SD],ED=()=>CD.reduce((t,e)=>t+e.lessons.length,0);function TD(){var t;const[e,n]=v.useState(new Set),[r,o]=v.useState(!0),{session:i}=Ts(),{toast:s}=Pr();v.useEffect(()=>{var l;(l=i==null?void 0:i.user)!=null&&l.id&&a()},[(t=i==null?void 0:i.user)==null?void 0:t.id]);const a=async()=>{var l;try{const{data:c,error:u}=await ue.from("course_progress").select("lesson_id").eq("user_id",(l=i==null?void 0:i.user)==null?void 0:l.id).eq("completed",!0);if(u)throw u;n(new Set(c.map(d=>d.lesson_id)))}catch(c){console.error("Error loading progress:",c),s({title:"שגיאה בטעינת ההתקדמות",description:"לא הצלחנו לטעון את ההתקדמות שלך",variant:"destructive"})}finally{o(!1)}};return{completedLessons:e,loading:r,toggleLesson:async l=>{var c;if(!((c=i==null?void 0:i.user)!=null&&c.id))return;const u=e.has(l);try{if(u){const{error:p}=await ue.from("course_progress").delete().eq("user_id",i.user.id).eq("lesson_id",l);if(p)throw p;n(f=>{const g=new Set(f);return g.delete(l),g})}else{const{error:p}=await ue.from("course_progress").insert([{user_id:i.user.id,lesson_id:l,completed:!0}]);if(p)throw p;n(f=>new Set([...f,l]))}const d=ED(),h=e.size+(u?-1:1);s({title:"התקדמות עודכנה",description:`השלמת ${h} מתוך ${d} שיעורים`})}catch(d){console.error("Error updating progress:",d),s({title:"שגיאה בשמירת ההתקדמות",description:"לא הצלחנו לשמור את ההתקדמות שלך",variant:"destructive"})}}}}var Ny={};(function t(e,n,r,o){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),s=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var M=new OffscreenCanvas(1,1),N=M.getContext("2d");N.fillRect(0,0,1,1);var $=M.transferToImageBitmap();try{N.createPattern($,"no-repeat")}catch{return!1}return!0}();function l(){}function c(M){var N=n.exports.Promise,$=N!==void 0?N:e.Promise;return typeof $=="function"?new $(M):(M(l,l),null)}var u=function(M,N){return{transform:function($){if(M)return $;if(N.has($))return N.get($);var V=new OffscreenCanvas($.width,$.height),K=V.getContext("2d");return K.drawImage($,0,0),N.set($,V),V},clear:function(){N.clear()}}}(a,new Map),d=function(){var M=Math.floor(16.666666666666668),N,$,V={},K=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(N=function(te){var re=Math.random();return V[re]=requestAnimationFrame(function X(me){K===me||K+M-1<me?(K=me,delete V[re],te()):V[re]=requestAnimationFrame(X)}),re},$=function(te){V[te]&&cancelAnimationFrame(V[te])}):(N=function(te){return setTimeout(te,M)},$=function(te){return clearTimeout(te)}),{frame:N,cancel:$}}(),h=function(){var M,N,$={};function V(K){function te(re,X){K.postMessage({options:re||{},callback:X})}K.init=function(re){var X=re.transferControlToOffscreen();K.postMessage({canvas:X},[X])},K.fire=function(re,X,me){if(N)return te(re,null),N;var pe=Math.random().toString(36).slice(2);return N=c(function(Ae){function Ne(Ve){Ve.data.callback===pe&&(delete $[pe],K.removeEventListener("message",Ne),N=null,u.clear(),me(),Ae())}K.addEventListener("message",Ne),te(re,pe),$[pe]=Ne.bind(null,{data:{callback:pe}})}),N},K.reset=function(){K.postMessage({reset:!0});for(var re in $)$[re](),delete $[re]}}return function(){if(M)return M;if(!r&&i){var K=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{M=new Worker(URL.createObjectURL(new Blob([K])))}catch(te){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",te),null}V(M)}return M}}(),p={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function f(M,N){return N?N(M):M}function g(M){return M!=null}function y(M,N,$){return f(M&&g(M[N])?M[N]:p[N],$)}function b(M){return M<0?0:Math.floor(M)}function w(M,N){return Math.floor(Math.random()*(N-M))+M}function x(M){return parseInt(M,16)}function k(M){return M.map(S)}function S(M){var N=String(M).replace(/[^0-9a-f]/gi,"");return N.length<6&&(N=N[0]+N[0]+N[1]+N[1]+N[2]+N[2]),{r:x(N.substring(0,2)),g:x(N.substring(2,4)),b:x(N.substring(4,6))}}function E(M){var N=y(M,"origin",Object);return N.x=y(N,"x",Number),N.y=y(N,"y",Number),N}function T(M){M.width=document.documentElement.clientWidth,M.height=document.documentElement.clientHeight}function j(M){var N=M.getBoundingClientRect();M.width=N.width,M.height=N.height}function R(M){var N=document.createElement("canvas");return N.style.position="fixed",N.style.top="0px",N.style.left="0px",N.style.pointerEvents="none",N.style.zIndex=M,N}function D(M,N,$,V,K,te,re,X,me){M.save(),M.translate(N,$),M.rotate(te),M.scale(V,K),M.arc(0,0,1,re,X,me),M.restore()}function H(M){var N=M.angle*(Math.PI/180),$=M.spread*(Math.PI/180);return{x:M.x,y:M.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:M.startVelocity*.5+Math.random()*M.startVelocity,angle2D:-N+(.5*$-Math.random()*$),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:M.color,shape:M.shape,tick:0,totalTicks:M.ticks,decay:M.decay,drift:M.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:M.gravity*3,ovalScalar:.6,scalar:M.scalar,flat:M.flat}}function L(M,N){N.x+=Math.cos(N.angle2D)*N.velocity+N.drift,N.y+=Math.sin(N.angle2D)*N.velocity+N.gravity,N.velocity*=N.decay,N.flat?(N.wobble=0,N.wobbleX=N.x+10*N.scalar,N.wobbleY=N.y+10*N.scalar,N.tiltSin=0,N.tiltCos=0,N.random=1):(N.wobble+=N.wobbleSpeed,N.wobbleX=N.x+10*N.scalar*Math.cos(N.wobble),N.wobbleY=N.y+10*N.scalar*Math.sin(N.wobble),N.tiltAngle+=.1,N.tiltSin=Math.sin(N.tiltAngle),N.tiltCos=Math.cos(N.tiltAngle),N.random=Math.random()+2);var $=N.tick++/N.totalTicks,V=N.x+N.random*N.tiltCos,K=N.y+N.random*N.tiltSin,te=N.wobbleX+N.random*N.tiltCos,re=N.wobbleY+N.random*N.tiltSin;if(M.fillStyle="rgba("+N.color.r+", "+N.color.g+", "+N.color.b+", "+(1-$)+")",M.beginPath(),s&&N.shape.type==="path"&&typeof N.shape.path=="string"&&Array.isArray(N.shape.matrix))M.fill(se(N.shape.path,N.shape.matrix,N.x,N.y,Math.abs(te-V)*.1,Math.abs(re-K)*.1,Math.PI/10*N.wobble));else if(N.shape.type==="bitmap"){var X=Math.PI/10*N.wobble,me=Math.abs(te-V)*.1,pe=Math.abs(re-K)*.1,Ae=N.shape.bitmap.width*N.scalar,Ne=N.shape.bitmap.height*N.scalar,Ve=new DOMMatrix([Math.cos(X)*me,Math.sin(X)*me,-Math.sin(X)*pe,Math.cos(X)*pe,N.x,N.y]);Ve.multiplySelf(new DOMMatrix(N.shape.matrix));var Fe=M.createPattern(u.transform(N.shape.bitmap),"no-repeat");Fe.setTransform(Ve),M.globalAlpha=1-$,M.fillStyle=Fe,M.fillRect(N.x-Ae/2,N.y-Ne/2,Ae,Ne),M.globalAlpha=1}else if(N.shape==="circle")M.ellipse?M.ellipse(N.x,N.y,Math.abs(te-V)*N.ovalScalar,Math.abs(re-K)*N.ovalScalar,Math.PI/10*N.wobble,0,2*Math.PI):D(M,N.x,N.y,Math.abs(te-V)*N.ovalScalar,Math.abs(re-K)*N.ovalScalar,Math.PI/10*N.wobble,0,2*Math.PI);else if(N.shape==="star")for(var Se=Math.PI/2*3,_=4*N.scalar,P=8*N.scalar,I=N.x,J=N.y,q=5,B=Math.PI/q;q--;)I=N.x+Math.cos(Se)*P,J=N.y+Math.sin(Se)*P,M.lineTo(I,J),Se+=B,I=N.x+Math.cos(Se)*_,J=N.y+Math.sin(Se)*_,M.lineTo(I,J),Se+=B;else M.moveTo(Math.floor(N.x),Math.floor(N.y)),M.lineTo(Math.floor(N.wobbleX),Math.floor(K)),M.lineTo(Math.floor(te),Math.floor(re)),M.lineTo(Math.floor(V),Math.floor(N.wobbleY));return M.closePath(),M.fill(),N.tick<N.totalTicks}function G(M,N,$,V,K){var te=N.slice(),re=M.getContext("2d"),X,me,pe=c(function(Ae){function Ne(){X=me=null,re.clearRect(0,0,V.width,V.height),u.clear(),K(),Ae()}function Ve(){r&&!(V.width===o.width&&V.height===o.height)&&(V.width=M.width=o.width,V.height=M.height=o.height),!V.width&&!V.height&&($(M),V.width=M.width,V.height=M.height),re.clearRect(0,0,V.width,V.height),te=te.filter(function(Fe){return L(re,Fe)}),te.length?X=d.frame(Ve):Ne()}X=d.frame(Ve),me=Ne});return{addFettis:function(Ae){return te=te.concat(Ae),pe},canvas:M,promise:pe,reset:function(){X&&d.cancel(X),me&&me()}}}function F(M,N){var $=!M,V=!!y(N||{},"resize"),K=!1,te=y(N,"disableForReducedMotion",Boolean),re=i&&!!y(N||{},"useWorker"),X=re?h():null,me=$?T:j,pe=M&&X?!!M.__confetti_initialized:!1,Ae=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Ne;function Ve(Se,_,P){for(var I=y(Se,"particleCount",b),J=y(Se,"angle",Number),q=y(Se,"spread",Number),B=y(Se,"startVelocity",Number),de=y(Se,"decay",Number),be=y(Se,"gravity",Number),Re=y(Se,"drift",Number),Ie=y(Se,"colors",k),Wn=y(Se,"ticks",Number),Rs=y(Se,"shapes"),dr=y(Se,"scalar"),xi=!!y(Se,"flat"),yo=E(Se),Nn=I,vo=[],Lr=M.width*yo.x,hu=M.height*yo.y;Nn--;)vo.push(H({x:Lr,y:hu,angle:J,spread:q,startVelocity:B,color:Ie[Nn%Ie.length],shape:Rs[w(0,Rs.length)],ticks:Wn,decay:de,gravity:be,drift:Re,scalar:dr,flat:xi}));return Ne?Ne.addFettis(vo):(Ne=G(M,vo,me,_,P),Ne.promise)}function Fe(Se){var _=te||y(Se,"disableForReducedMotion",Boolean),P=y(Se,"zIndex",Number);if(_&&Ae)return c(function(B){B()});$&&Ne?M=Ne.canvas:$&&!M&&(M=R(P),document.body.appendChild(M)),V&&!pe&&me(M);var I={width:M.width,height:M.height};X&&!pe&&X.init(M),pe=!0,X&&(M.__confetti_initialized=!0);function J(){if(X){var B={getBoundingClientRect:function(){if(!$)return M.getBoundingClientRect()}};me(B),X.postMessage({resize:{width:B.width,height:B.height}});return}I.width=I.height=null}function q(){Ne=null,V&&(K=!1,e.removeEventListener("resize",J)),$&&M&&(document.body.contains(M)&&document.body.removeChild(M),M=null,pe=!1)}return V&&!K&&(K=!0,e.addEventListener("resize",J,!1)),X?X.fire(Se,I,q):Ve(Se,I,q)}return Fe.reset=function(){X&&X.reset(),Ne&&Ne.reset()},Fe}var Q;function Y(){return Q||(Q=F(null,{useWorker:!0,resize:!0})),Q}function se(M,N,$,V,K,te,re){var X=new Path2D(M),me=new Path2D;me.addPath(X,new DOMMatrix(N));var pe=new Path2D;return pe.addPath(me,new DOMMatrix([Math.cos(re)*K,Math.sin(re)*K,-Math.sin(re)*te,Math.cos(re)*te,$,V])),pe}function z(M){if(!s)throw new Error("path confetti are not supported in this browser");var N,$;typeof M=="string"?N=M:(N=M.path,$=M.matrix);var V=new Path2D(N),K=document.createElement("canvas"),te=K.getContext("2d");if(!$){for(var re=1e3,X=re,me=re,pe=0,Ae=0,Ne,Ve,Fe=0;Fe<re;Fe+=2)for(var Se=0;Se<re;Se+=2)te.isPointInPath(V,Fe,Se,"nonzero")&&(X=Math.min(X,Fe),me=Math.min(me,Se),pe=Math.max(pe,Fe),Ae=Math.max(Ae,Se));Ne=pe-X,Ve=Ae-me;var _=10,P=Math.min(_/Ne,_/Ve);$=[P,0,0,P,-Math.round(Ne/2+X)*P,-Math.round(Ve/2+me)*P]}return{type:"path",path:N,matrix:$}}function A(M){var N,$=1,V="#000000",K='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof M=="string"?N=M:(N=M.text,$="scalar"in M?M.scalar:$,K="fontFamily"in M?M.fontFamily:K,V="color"in M?M.color:V);var te=10*$,re=""+te+"px "+K,X=new OffscreenCanvas(te,te),me=X.getContext("2d");me.font=re;var pe=me.measureText(N),Ae=Math.ceil(pe.actualBoundingBoxRight+pe.actualBoundingBoxLeft),Ne=Math.ceil(pe.actualBoundingBoxAscent+pe.actualBoundingBoxDescent),Ve=2,Fe=pe.actualBoundingBoxLeft+Ve,Se=pe.actualBoundingBoxAscent+Ve;Ae+=Ve+Ve,Ne+=Ve+Ve,X=new OffscreenCanvas(Ae,Ne),me=X.getContext("2d"),me.font=re,me.fillStyle=V,me.fillText(N,Fe,Se);var _=1/$;return{type:"bitmap",bitmap:X.transferToImageBitmap(),matrix:[_,0,0,_,-Ae*_/2,-Ne*_/2]}}n.exports=function(){return Y().apply(this,arguments)},n.exports.reset=function(){Y().reset()},n.exports.create=F,n.exports.shapeFromPath=z,n.exports.shapeFromText=A})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Ny,!1);const Ab=Ny.exports;Ny.exports.create;const TE=()=>{const t=Date.now()+3e3,e=["#a786ff","#fd8bbc","#eca184","#f8deb1","#84d2ec","#ffbf7f","#d1ec84"],n=()=>{Date.now()>t||(Ab({particleCount:3,angle:60,spread:55,startVelocity:60,origin:{x:0,y:.5},colors:e}),Ab({particleCount:3,angle:120,spread:55,startVelocity:60,origin:{x:1,y:.5},colors:e}),requestAnimationFrame(n))};n()};function ND(){const{completedLessons:t,loading:e,toggleLesson:n}=TD(),r=Pb.reduce((s,a)=>s+a.lessons.length,0),o=t.size/r*100,i=async s=>{const a=t.has(s);await n(s),a||TE()};return e?m.jsx(ct,{className:"p-6",children:m.jsx("div",{className:"text-center",children:"טוען..."})}):m.jsxs(ct,{className:"p-6",children:[m.jsxs("div",{className:"mb-10",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"התקדמות בקורס"}),m.jsx(QC,{value:o,className:"h-2"}),m.jsxs("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:[t.size," מתוך ",r," שיעורים הושלמו (",o.toFixed(1),"%)"]})]}),m.jsx(iD,{type:"single",collapsible:!0,className:"w-full",children:Pb.map((s,a)=>m.jsx(mD,{index:a,title:s.title,lessons:s.lessons,completedLessons:t,onToggleLesson:i},a))})]})}var el=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hs=typeof window>"u"||"Deno"in globalThis;function On(){}function MD(t,e){return typeof t=="function"?t(e):t}function Cg(t){return typeof t=="number"&&t>=0&&t!==1/0}function NE(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ka(t,e){return typeof t=="function"?t(e):t}function er(t,e){return typeof t=="function"?t(e):t}function Db(t,e){const{type:n="all",exact:r,fetchStatus:o,predicate:i,queryKey:s,stale:a}=t;if(s){if(r){if(e.queryHash!==My(s,e.options))return!1}else if(!Oc(e.queryKey,s))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||o&&o!==e.state.fetchStatus||i&&!i(e))}function Ib(t,e){const{exact:n,status:r,predicate:o,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(ps(e.options.mutationKey)!==ps(i))return!1}else if(!Oc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||o&&!o(e))}function My(t,e){return((e==null?void 0:e.queryKeyHashFn)||ps)(t)}function ps(t){return JSON.stringify(t,(e,n)=>Eg(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function Oc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Oc(t[n],e[n])):!1}function ME(t,e){if(t===e)return t;const n=Lb(t)&&Lb(e);if(n||Eg(t)&&Eg(e)){const r=n?t:Object.keys(t),o=r.length,i=n?e:Object.keys(e),s=i.length,a=n?[]:{};let l=0;for(let c=0;c<s;c++){const u=n?c:i[c];(!n&&r.includes(u)||n)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=ME(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return o===s&&l===o?t:a}return e}function rh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Lb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Eg(t){if(!zb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!zb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function zb(t){return Object.prototype.toString.call(t)==="[object Object]"}function _D(t){return new Promise(e=>{setTimeout(e,t)})}function Tg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ME(t,e):e}function OD(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function jD(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var _y=Symbol();function _E(t,e){return!t.queryFn&&e!=null&&e.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===_y?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ls,Si,vl,$b,RD=($b=class extends el{constructor(){super(),fe(this,Ls),fe(this,Si),fe(this,vl),ee(this,vl,t=>{if(!hs&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}})}onSubscribe(){O(this,Si)||this.setEventListener(O(this,vl))}onUnsubscribe(){var t;this.hasListeners()||((t=O(this,Si))==null||t.call(this),ee(this,Si,void 0))}setEventListener(t){var e;ee(this,vl,t),(e=O(this,Si))==null||e.call(this),ee(this,Si,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){O(this,Ls)!==t&&(ee(this,Ls,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){var t;return typeof O(this,Ls)=="boolean"?O(this,Ls):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ls=new WeakMap,Si=new WeakMap,vl=new WeakMap,$b),Oy=new RD,bl,Ci,wl,Fb,PD=(Fb=class extends el{constructor(){super(),fe(this,bl,!0),fe(this,Ci),fe(this,wl),ee(this,wl,t=>{if(!hs&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}})}onSubscribe(){O(this,Ci)||this.setEventListener(O(this,wl))}onUnsubscribe(){var t;this.hasListeners()||((t=O(this,Ci))==null||t.call(this),ee(this,Ci,void 0))}setEventListener(t){var e;ee(this,wl,t),(e=O(this,Ci))==null||e.call(this),ee(this,Ci,t(this.setOnline.bind(this)))}setOnline(t){O(this,bl)!==t&&(ee(this,bl,t),this.listeners.forEach(e=>{e(t)}))}isOnline(){return O(this,bl)}},bl=new WeakMap,Ci=new WeakMap,wl=new WeakMap,Fb),oh=new PD;function Ng(){let t,e;const n=new Promise((o,i)=>{t=o,e=i});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},n.reject=o=>{r({status:"rejected",reason:o}),e(o)},n}function AD(t){return Math.min(1e3*2**t,3e4)}function OE(t){return(t??"online")==="online"?oh.isOnline():!0}var jE=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function wf(t){return t instanceof jE}function RE(t){let e=!1,n=0,r=!1,o;const i=Ng(),s=g=>{var y;r||(h(new jE(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>Oy.isFocused()&&(t.networkMode==="always"||oh.isOnline())&&t.canRun(),u=()=>OE(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),o==null||o(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),o==null||o(),i.reject(g))},p=()=>new Promise(g=>{var y;o=b=>{(r||c())&&g(b)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;o=void 0,r||(g=t.onContinue)==null||g.call(t)}),f=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(d).catch(b=>{var w;if(r)return;const x=t.retry??(hs?0:3),k=t.retryDelay??AD,S=typeof k=="function"?k(n,b):k,E=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(e||!E){h(b);return}n++,(w=t.onFail)==null||w.call(t,n,b),_D(S).then(()=>c()?void 0:p()).then(()=>{e?h(b):f()})})};return{promise:i,cancel:s,continue:()=>(o==null||o(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?f():p().then(f),i)}}function DD(){let t=[],e=0,n=a=>{a()},r=a=>{a()},o=a=>setTimeout(a,0);const i=a=>{e?t.push(a):o(()=>{n(a)})},s=()=>{const a=t;t=[],a.length&&o(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||s()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{o=a}}}var yt=DD(),zs,Bb,PE=(Bb=class{constructor(){fe(this,zs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Cg(this.gcTime)&&ee(this,zs,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(hs?1/0:5*60*1e3))}clearGcTimeout(){O(this,zs)&&(clearTimeout(O(this,zs)),ee(this,zs,void 0))}},zs=new WeakMap,Bb),xl,kl,Jn,Ut,zu,$s,fr,$r,Vb,ID=(Vb=class extends PE{constructor(t){super(),fe(this,fr),fe(this,xl),fe(this,kl),fe(this,Jn),fe(this,Ut),fe(this,zu),fe(this,$s),ee(this,$s,!1),ee(this,zu,t.defaultOptions),this.setOptions(t.options),this.observers=[],ee(this,Jn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ee(this,xl,LD(this.options)),this.state=t.state??O(this,xl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=O(this,Ut))==null?void 0:t.promise}setOptions(t){this.options={...O(this,zu),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&O(this,Jn).remove(this)}setData(t,e){const n=Tg(this.state.data,t,this.options);return Ee(this,fr,$r).call(this,{data:n,type:"success",dataUpdatedAt:e==null?void 0:e.updatedAt,manual:e==null?void 0:e.manual}),n}setState(t,e){Ee(this,fr,$r).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var e,n;const r=(e=O(this,Ut))==null?void 0:e.promise;return(n=O(this,Ut))==null||n.cancel(t),r?r.then(On).catch(On):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(O(this,xl))}isActive(){return this.observers.some(t=>er(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_y||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!NE(this.state.dataUpdatedAt,t)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=O(this,Ut))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=O(this,Ut))==null||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),O(this,Jn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(O(this,Ut)&&(O(this,$s)?O(this,Ut).cancel({revert:!0}):O(this,Ut).cancelRetry()),this.scheduleGc()),O(this,Jn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ee(this,fr,$r).call(this,{type:"invalidate"})}fetch(t,e){var n,r,o;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e!=null&&e.cancelRefetch)this.cancel({silent:!0});else if(O(this,Ut))return O(this,Ut).continueRetry(),O(this,Ut).promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(d=>d.options.queryFn);u&&this.setOptions(u.options)}const i=new AbortController,s=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(ee(this,$s,!0),i.signal)})},a=()=>{const u=_E(this.options,e),d={queryKey:this.queryKey,meta:this.meta};return s(d),ee(this,$s,!1),this.options.persister?this.options.persister(u,d,this):u(d)},l={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(l),(n=this.options.behavior)==null||n.onFetch(l,this),ee(this,kl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((r=l.fetchOptions)==null?void 0:r.meta))&&Ee(this,fr,$r).call(this,{type:"fetch",meta:(o=l.fetchOptions)==null?void 0:o.meta});const c=u=>{var d,h,p,f;wf(u)&&u.silent||Ee(this,fr,$r).call(this,{type:"error",error:u}),wf(u)||((h=(d=O(this,Jn).config).onError)==null||h.call(d,u,this),(f=(p=O(this,Jn).config).onSettled)==null||f.call(p,this.state.data,u,this)),this.scheduleGc()};return ee(this,Ut,RE({initialPromise:e==null?void 0:e.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:u=>{var d,h,p,f;if(u===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(g){c(g);return}(h=(d=O(this,Jn).config).onSuccess)==null||h.call(d,u,this),(f=(p=O(this,Jn).config).onSettled)==null||f.call(p,u,this.state.error,this),this.scheduleGc()},onError:c,onFail:(u,d)=>{Ee(this,fr,$r).call(this,{type:"failed",failureCount:u,error:d})},onPause:()=>{Ee(this,fr,$r).call(this,{type:"pause"})},onContinue:()=>{Ee(this,fr,$r).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),O(this,Ut).start()}},xl=new WeakMap,kl=new WeakMap,Jn=new WeakMap,Ut=new WeakMap,zu=new WeakMap,$s=new WeakMap,fr=new WeakSet,$r=function(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...AE(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return wf(r)&&r.revert&&O(this,kl)?{...O(this,kl),fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),yt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),O(this,Jn).notify({query:this,type:"updated",action:t})})},Vb);function AE(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:OE(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function LD(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Fr,Ub,zD=(Ub=class extends el{constructor(t={}){super(),fe(this,Fr),this.config=t,ee(this,Fr,new Map)}build(t,e,n){const r=e.queryKey,o=e.queryHash??My(r,e);let i=this.get(o);return i||(i=new ID({cache:this,queryKey:r,queryHash:o,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(i)),i}add(t){O(this,Fr).has(t.queryHash)||(O(this,Fr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=O(this,Fr).get(t.queryHash);e&&(t.destroy(),e===t&&O(this,Fr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){yt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return O(this,Fr).get(t)}getAll(){return[...O(this,Fr).values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Db(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Db(t,n)):e}notify(t){yt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){yt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){yt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Fr=new WeakMap,Ub),Br,tn,Fs,Vr,So,Hb,$D=(Hb=class extends PE{constructor(t){super(),fe(this,Vr),fe(this,Br),fe(this,tn),fe(this,Fs),this.mutationId=t.mutationId,ee(this,tn,t.mutationCache),ee(this,Br,[]),this.state=t.state||DE(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){O(this,Br).includes(t)||(O(this,Br).push(t),this.clearGcTimeout(),O(this,tn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ee(this,Br,O(this,Br).filter(e=>e!==t)),this.scheduleGc(),O(this,tn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){O(this,Br).length||(this.state.status==="pending"?this.scheduleGc():O(this,tn).remove(this))}continue(){var t;return((t=O(this,Fs))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var e,n,r,o,i,s,a,l,c,u,d,h,p,f,g,y,b,w,x,k;ee(this,Fs,RE({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(T,j)=>{Ee(this,Vr,So).call(this,{type:"failed",failureCount:T,error:j})},onPause:()=>{Ee(this,Vr,So).call(this,{type:"pause"})},onContinue:()=>{Ee(this,Vr,So).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,tn).canRun(this)}));const S=this.state.status==="pending",E=!O(this,Fs).canStart();try{if(!S){Ee(this,Vr,So).call(this,{type:"pending",variables:t,isPaused:E}),await((n=(e=O(this,tn).config).onMutate)==null?void 0:n.call(e,t,this));const j=await((o=(r=this.options).onMutate)==null?void 0:o.call(r,t));j!==this.state.context&&Ee(this,Vr,So).call(this,{type:"pending",context:j,variables:t,isPaused:E})}const T=await O(this,Fs).start();return await((s=(i=O(this,tn).config).onSuccess)==null?void 0:s.call(i,T,t,this.state.context,this)),await((l=(a=this.options).onSuccess)==null?void 0:l.call(a,T,t,this.state.context)),await((u=(c=O(this,tn).config).onSettled)==null?void 0:u.call(c,T,null,this.state.variables,this.state.context,this)),await((h=(d=this.options).onSettled)==null?void 0:h.call(d,T,null,t,this.state.context)),Ee(this,Vr,So).call(this,{type:"success",data:T}),T}catch(T){try{throw await((f=(p=O(this,tn).config).onError)==null?void 0:f.call(p,T,t,this.state.context,this)),await((y=(g=this.options).onError)==null?void 0:y.call(g,T,t,this.state.context)),await((w=(b=O(this,tn).config).onSettled)==null?void 0:w.call(b,void 0,T,this.state.variables,this.state.context,this)),await((k=(x=this.options).onSettled)==null?void 0:k.call(x,void 0,T,t,this.state.context)),T}finally{Ee(this,Vr,So).call(this,{type:"error",error:T})}}finally{O(this,tn).runNext(this)}}},Br=new WeakMap,tn=new WeakMap,Fs=new WeakMap,Vr=new WeakSet,So=function(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),yt.batch(()=>{O(this,Br).forEach(n=>{n.onMutationUpdate(t)}),O(this,tn).notify({mutation:this,type:"updated",action:t})})},Hb);function DE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mn,$u,Wb,FD=(Wb=class extends el{constructor(t={}){super(),fe(this,Mn),fe(this,$u),this.config=t,ee(this,Mn,new Map),ee(this,$u,Date.now())}build(t,e,n){const r=new $D({mutationCache:this,mutationId:++pm(this,$u)._,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){const e=Fu(t),n=O(this,Mn).get(e)??[];n.push(t),O(this,Mn).set(e,n),this.notify({type:"added",mutation:t})}remove(t){var e;const n=Fu(t);if(O(this,Mn).has(n)){const r=(e=O(this,Mn).get(n))==null?void 0:e.filter(o=>o!==t);r&&(r.length===0?O(this,Mn).delete(n):O(this,Mn).set(n,r))}this.notify({type:"removed",mutation:t})}canRun(t){var e;const n=(e=O(this,Mn).get(Fu(t)))==null?void 0:e.find(r=>r.state.status==="pending");return!n||n===t}runNext(t){var e;const n=(e=O(this,Mn).get(Fu(t)))==null?void 0:e.find(r=>r!==t&&r.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){yt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...O(this,Mn).values()].flat()}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Ib(e,n))}findAll(t={}){return this.getAll().filter(e=>Ib(t,e))}notify(t){yt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return yt.batch(()=>Promise.all(t.map(e=>e.continue().catch(On))))}},Mn=new WeakMap,$u=new WeakMap,Wb);function Fu(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function qb(t){return{onFetch:(e,n)=>{var r,o,i,s,a;const l=e.options,c=(i=(o=(r=e.fetchOptions)==null?void 0:r.meta)==null?void 0:o.fetchMore)==null?void 0:i.direction,u=((s=e.state.data)==null?void 0:s.pages)||[],d=((a=e.state.data)==null?void 0:a.pageParams)||[];let h={pages:[],pageParams:[]},p=0;const f=async()=>{let g=!1;const y=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},b=_E(e.options,e.fetchOptions),w=async(x,k,S)=>{if(g)return Promise.reject();if(k==null&&x.pages.length)return Promise.resolve(x);const E={queryKey:e.queryKey,pageParam:k,direction:S?"backward":"forward",meta:e.options.meta};y(E);const T=await b(E),{maxPages:j}=e.options,R=S?jD:OD;return{pages:R(x.pages,T,j),pageParams:R(x.pageParams,k,j)}};if(c&&u.length){const x=c==="backward",k=x?BD:Kb,S={pages:u,pageParams:d},E=k(l,S);h=await w(S,E,x)}else{const x=t??u.length;do{const k=p===0?d[0]??l.initialPageParam:Kb(l,h);if(p>0&&k==null)break;h=await w(h,k),p++}while(p<x)}return h};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,f,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=f}}}function Kb(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function BD(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var it,Ei,Ti,Sl,Cl,Ni,El,Tl,Jb,VD=(Jb=class{constructor(t={}){fe(this,it),fe(this,Ei),fe(this,Ti),fe(this,Sl),fe(this,Cl),fe(this,Ni),fe(this,El),fe(this,Tl),ee(this,it,t.queryCache||new zD),ee(this,Ei,t.mutationCache||new FD),ee(this,Ti,t.defaultOptions||{}),ee(this,Sl,new Map),ee(this,Cl,new Map),ee(this,Ni,0)}mount(){pm(this,Ni)._++,O(this,Ni)===1&&(ee(this,El,Oy.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,it).onFocus())})),ee(this,Tl,oh.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,it).onOnline())})))}unmount(){var t,e;pm(this,Ni)._--,O(this,Ni)===0&&((t=O(this,El))==null||t.call(this),ee(this,El,void 0),(e=O(this,Tl))==null||e.call(this),ee(this,Tl,void 0))}isFetching(t){return O(this,it).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return O(this,Ei).findAll({...t,status:"pending"}).length}getQueryData(t){var e;const n=this.defaultQueryOptions({queryKey:t});return(e=O(this,it).get(n.queryHash))==null?void 0:e.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=O(this,it).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ka(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return O(this,it).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),o=O(this,it).get(r.queryHash),i=o==null?void 0:o.state.data,s=MD(e,i);if(s!==void 0)return O(this,it).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(t,e,n){return yt.batch(()=>O(this,it).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var e;const n=this.defaultQueryOptions({queryKey:t});return(e=O(this,it).get(n.queryHash))==null?void 0:e.state}removeQueries(t){const e=O(this,it);yt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=O(this,it),r={type:"active",...t};return yt.batch(()=>(n.findAll(t).forEach(o=>{o.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=yt.batch(()=>O(this,it).findAll(t).map(o=>o.cancel(n)));return Promise.all(r).then(On).catch(On)}invalidateQueries(t,e={}){return yt.batch(()=>{if(O(this,it).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none")return Promise.resolve();const n={...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=yt.batch(()=>O(this,it).findAll(t).filter(o=>!o.isDisabled()).map(o=>{let i=o.fetch(void 0,n);return n.throwOnError||(i=i.catch(On)),o.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(On)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=O(this,it).build(this,e);return n.isStaleByTime(ka(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(On).catch(On)}fetchInfiniteQuery(t){return t.behavior=qb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(On).catch(On)}ensureInfiniteQueryData(t){return t.behavior=qb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return oh.isOnline()?O(this,Ei).resumePausedMutations():Promise.resolve()}getQueryCache(){return O(this,it)}getMutationCache(){return O(this,Ei)}getDefaultOptions(){return O(this,Ti)}setDefaultOptions(t){ee(this,Ti,t)}setQueryDefaults(t,e){O(this,Sl).set(ps(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...O(this,Sl).values()],n={};return e.forEach(r=>{Oc(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){O(this,Cl).set(ps(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...O(this,Cl).values()];let n={};return e.forEach(r=>{Oc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...O(this,Ti).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=My(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===_y&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...O(this,Ti).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){O(this,it).clear(),O(this,Ei).clear()}},it=new WeakMap,Ei=new WeakMap,Ti=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,Ni=new WeakMap,El=new WeakMap,Tl=new WeakMap,Jb),pn,Oe,Bu,nn,Bs,Nl,Mi,Ur,Vu,Ml,_l,Vs,Us,_i,Ol,st,jl,xf,kf,Sf,Cf,Ef,Tf,Nf,Gb,Yb,UD=(Yb=class extends el{constructor(t,e){super(),fe(this,st),fe(this,pn),fe(this,Oe),fe(this,Bu),fe(this,nn),fe(this,Bs),fe(this,Nl),fe(this,Mi),fe(this,Ur),fe(this,Vu),fe(this,Ml),fe(this,_l),fe(this,Vs),fe(this,Us),fe(this,_i),fe(this,Ol,new Set),this.options=e,ee(this,pn,t),ee(this,Ur,null),ee(this,Mi,Ng()),this.options.experimental_prefetchInRender||O(this,Mi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(O(this,Oe).addObserver(this),Qb(O(this,Oe),this.options)?Ee(this,st,jl).call(this):this.updateResult(),Ee(this,st,Cf).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Mg(O(this,Oe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Mg(O(this,Oe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ee(this,st,Ef).call(this),Ee(this,st,Tf).call(this),O(this,Oe).removeObserver(this)}setOptions(t,e){const n=this.options,r=O(this,Oe);if(this.options=O(this,pn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof er(this.options.enabled,O(this,Oe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ee(this,st,Nf).call(this),O(this,Oe).setOptions(this.options),n._defaulted&&!rh(this.options,n)&&O(this,pn).getQueryCache().notify({type:"observerOptionsUpdated",query:O(this,Oe),observer:this});const o=this.hasListeners();o&&Xb(O(this,Oe),r,this.options,n)&&Ee(this,st,jl).call(this),this.updateResult(e),o&&(O(this,Oe)!==r||er(this.options.enabled,O(this,Oe))!==er(n.enabled,O(this,Oe))||ka(this.options.staleTime,O(this,Oe))!==ka(n.staleTime,O(this,Oe)))&&Ee(this,st,xf).call(this);const i=Ee(this,st,kf).call(this);o&&(O(this,Oe)!==r||er(this.options.enabled,O(this,Oe))!==er(n.enabled,O(this,Oe))||i!==O(this,_i))&&Ee(this,st,Sf).call(this,i)}getOptimisticResult(t){const e=O(this,pn).getQueryCache().build(O(this,pn),t),n=this.createResult(e,t);return WD(this,n)&&(ee(this,nn,n),ee(this,Nl,this.options),ee(this,Bs,O(this,Oe).state)),n}getCurrentResult(){return O(this,nn)}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e==null||e(r),t[r])})}),n}trackProp(t){O(this,Ol).add(t)}getCurrentQuery(){return O(this,Oe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=O(this,pn).defaultQueryOptions(t),n=O(this,pn).getQueryCache().build(O(this,pn),e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return Ee(this,st,jl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),O(this,nn)))}createResult(t,e){var n;const r=O(this,Oe),o=this.options,i=O(this,nn),s=O(this,Bs),a=O(this,Nl),l=t!==r?t.state:O(this,Bu),{state:c}=t;let u={...c},d=!1,h;if(e._optimisticResults){const E=this.hasListeners(),T=!E&&Qb(t,e),j=E&&Xb(t,r,e,o);(T||j)&&(u={...u,...AE(c.data,t.options)}),e._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:p,errorUpdatedAt:f,status:g}=u;if(e.select&&u.data!==void 0)if(i&&u.data===(s==null?void 0:s.data)&&e.select===O(this,Vu))h=O(this,Ml);else try{ee(this,Vu,e.select),h=e.select(u.data),h=Tg(i==null?void 0:i.data,h,e),ee(this,Ml,h),ee(this,Ur,null)}catch(E){ee(this,Ur,E)}else h=u.data;if(e.placeholderData!==void 0&&h===void 0&&g==="pending"){let E;if(i!=null&&i.isPlaceholderData&&e.placeholderData===(a==null?void 0:a.placeholderData))E=i.data;else if(E=typeof e.placeholderData=="function"?e.placeholderData((n=O(this,_l))==null?void 0:n.state.data,O(this,_l)):e.placeholderData,e.select&&E!==void 0)try{E=e.select(E),ee(this,Ur,null)}catch(T){ee(this,Ur,T)}E!==void 0&&(g="success",h=Tg(i==null?void 0:i.data,E,e),d=!0)}O(this,Ur)&&(p=O(this,Ur),h=O(this,Ml),f=Date.now(),g="error");const y=u.fetchStatus==="fetching",b=g==="pending",w=g==="error",x=b&&y,k=h!==void 0,S={status:g,fetchStatus:u.fetchStatus,isPending:b,isSuccess:g==="success",isError:w,isInitialLoading:x,isLoading:x,data:h,dataUpdatedAt:u.dataUpdatedAt,error:p,errorUpdatedAt:f,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:w&&!k,isPaused:u.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:w&&k,isStale:jy(t,e),refetch:this.refetch,promise:O(this,Mi)};if(this.options.experimental_prefetchInRender){const E=R=>{S.status==="error"?R.reject(S.error):S.data!==void 0&&R.resolve(S.data)},T=()=>{const R=ee(this,Mi,S.promise=Ng());E(R)},j=O(this,Mi);switch(j.status){case"pending":t.queryHash===r.queryHash&&E(j);break;case"fulfilled":(S.status==="error"||S.data!==j.value)&&T();break;case"rejected":(S.status!=="error"||S.error!==j.reason)&&T();break}}return S}updateResult(t){const e=O(this,nn),n=this.createResult(O(this,Oe),this.options);if(ee(this,Bs,O(this,Oe).state),ee(this,Nl,this.options),O(this,Bs).data!==void 0&&ee(this,_l,O(this,Oe)),rh(n,e))return;ee(this,nn,n);const r={},o=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!O(this,Ol).size)return!0;const a=new Set(s??O(this,Ol));return this.options.throwOnError&&a.add("error"),Object.keys(O(this,nn)).some(l=>{const c=l;return O(this,nn)[c]!==e[c]&&a.has(c)})};(t==null?void 0:t.listeners)!==!1&&o()&&(r.listeners=!0),Ee(this,st,Gb).call(this,{...r,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ee(this,st,Cf).call(this)}},pn=new WeakMap,Oe=new WeakMap,Bu=new WeakMap,nn=new WeakMap,Bs=new WeakMap,Nl=new WeakMap,Mi=new WeakMap,Ur=new WeakMap,Vu=new WeakMap,Ml=new WeakMap,_l=new WeakMap,Vs=new WeakMap,Us=new WeakMap,_i=new WeakMap,Ol=new WeakMap,st=new WeakSet,jl=function(t){Ee(this,st,Nf).call(this);let e=O(this,Oe).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(On)),e},xf=function(){Ee(this,st,Ef).call(this);const t=ka(this.options.staleTime,O(this,Oe));if(hs||O(this,nn).isStale||!Cg(t))return;const e=NE(O(this,nn).dataUpdatedAt,t)+1;ee(this,Vs,setTimeout(()=>{O(this,nn).isStale||this.updateResult()},e))},kf=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(O(this,Oe)):this.options.refetchInterval)??!1},Sf=function(t){Ee(this,st,Tf).call(this),ee(this,_i,t),!(hs||er(this.options.enabled,O(this,Oe))===!1||!Cg(O(this,_i))||O(this,_i)===0)&&ee(this,Us,setInterval(()=>{(this.options.refetchIntervalInBackground||Oy.isFocused())&&Ee(this,st,jl).call(this)},O(this,_i)))},Cf=function(){Ee(this,st,xf).call(this),Ee(this,st,Sf).call(this,Ee(this,st,kf).call(this))},Ef=function(){O(this,Vs)&&(clearTimeout(O(this,Vs)),ee(this,Vs,void 0))},Tf=function(){O(this,Us)&&(clearInterval(O(this,Us)),ee(this,Us,void 0))},Nf=function(){const t=O(this,pn).getQueryCache().build(O(this,pn),this.options);if(t===O(this,Oe))return;const e=O(this,Oe);ee(this,Oe,t),ee(this,Bu,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},Gb=function(t){yt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(O(this,nn))}),O(this,pn).getQueryCache().notify({query:O(this,Oe),type:"observerResultsUpdated"})})},Yb);function HD(t,e){return er(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Qb(t,e){return HD(t,e)||t.state.data!==void 0&&Mg(t,e,e.refetchOnMount)}function Mg(t,e,n){if(er(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&jy(t,e)}return!1}function Xb(t,e,n,r){return(t!==e||er(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&jy(t,n)}function jy(t,e){return er(e.enabled,t)!==!1&&t.isStaleByTime(ka(e.staleTime,t))}function WD(t,e){return!rh(t.getCurrentResult(),e)}var Oi,ji,fn,Co,Ri,Uu,Mf,Zb,qD=(Zb=class extends el{constructor(t,e){super(),fe(this,Ri),fe(this,Oi),fe(this,ji),fe(this,fn),fe(this,Co),ee(this,Oi,t),this.setOptions(e),this.bindMethods(),Ee(this,Ri,Uu).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const n=this.options;this.options=O(this,Oi).defaultMutationOptions(t),rh(this.options,n)||O(this,Oi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:O(this,fn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&ps(n.mutationKey)!==ps(this.options.mutationKey)?this.reset():((e=O(this,fn))==null?void 0:e.state.status)==="pending"&&O(this,fn).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=O(this,fn))==null||t.removeObserver(this)}onMutationUpdate(t){Ee(this,Ri,Uu).call(this),Ee(this,Ri,Mf).call(this,t)}getCurrentResult(){return O(this,ji)}reset(){var t;(t=O(this,fn))==null||t.removeObserver(this),ee(this,fn,void 0),Ee(this,Ri,Uu).call(this),Ee(this,Ri,Mf).call(this)}mutate(t,e){var n;return ee(this,Co,e),(n=O(this,fn))==null||n.removeObserver(this),ee(this,fn,O(this,Oi).getMutationCache().build(O(this,Oi),this.options)),O(this,fn).addObserver(this),O(this,fn).execute(t)}},Oi=new WeakMap,ji=new WeakMap,fn=new WeakMap,Co=new WeakMap,Ri=new WeakSet,Uu=function(){var t;const e=((t=O(this,fn))==null?void 0:t.state)??DE();ee(this,ji,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},Mf=function(t){yt.batch(()=>{var e,n,r,o,i,s,a,l;if(O(this,Co)&&this.hasListeners()){const c=O(this,ji).variables,u=O(this,ji).context;(t==null?void 0:t.type)==="success"?((n=(e=O(this,Co)).onSuccess)==null||n.call(e,t.data,c,u),(o=(r=O(this,Co)).onSettled)==null||o.call(r,t.data,null,c,u)):(t==null?void 0:t.type)==="error"&&((s=(i=O(this,Co)).onError)==null||s.call(i,t.error,c,u),(l=(a=O(this,Co)).onSettled)==null||l.call(a,void 0,t.error,c,u))}this.listeners.forEach(c=>{c(O(this,ji))})})},Zb),IE=v.createContext(void 0),Ns=t=>{const e=v.useContext(IE);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},KD=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(IE.Provider,{value:t,children:e})),LE=v.createContext(!1),JD=()=>v.useContext(LE);LE.Provider;function GD(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var YD=v.createContext(GD()),QD=()=>v.useContext(YD);function zE(t,e){return typeof t=="function"?t(...e):!!t}function _g(){}var XD=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},ZD=t=>{v.useEffect(()=>{t.clearReset()},[t])},e8=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&zE(n,[t.error,r]),t8=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},n8=(t,e)=>t.isLoading&&t.isFetching&&!e,r8=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,ew=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function o8(t,e,n){var r,o,i,s,a;const l=Ns(),c=JD(),u=QD(),d=l.defaultQueryOptions(t);(o=(r=l.getDefaultOptions().queries)==null?void 0:r._experimental_beforeQuery)==null||o.call(r,d),d._optimisticResults=c?"isRestoring":"optimistic",t8(d),XD(d,u),ZD(u);const h=!l.getQueryCache().get(d.queryHash),[p]=v.useState(()=>new e(l,d)),f=p.getOptimisticResult(d);if(v.useSyncExternalStore(v.useCallback(g=>{const y=c?_g:p.subscribe(yt.batchCalls(g));return p.updateResult(),y},[p,c]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),v.useEffect(()=>{p.setOptions(d,{listeners:!1})},[d,p]),r8(d,f))throw ew(d,p,u);if(e8({result:f,errorResetBoundary:u,throwOnError:d.throwOnError,query:l.getQueryCache().get(d.queryHash)}))throw f.error;if((s=(i=l.getDefaultOptions().queries)==null?void 0:i._experimental_afterQuery)==null||s.call(i,d,f),d.experimental_prefetchInRender&&!hs&&n8(f,c)){const g=h?ew(d,p,u):(a=l.getQueryCache().get(d.queryHash))==null?void 0:a.promise;g==null||g.catch(_g).finally(()=>{p.updateResult()})}return d.notifyOnChangeProps?f:p.trackResult(f)}function Ry(t,e){return o8(t,UD)}function ui(t,e){const n=Ns(),[r]=v.useState(()=>new qD(n,t));v.useEffect(()=>{r.setOptions(t)},[r,t]);const o=v.useSyncExternalStore(v.useCallback(s=>r.subscribe(yt.batchCalls(s)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=v.useCallback((s,a)=>{r.mutate(s,a).catch(_g)},[r]);if(o.error&&zE(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:i,mutateAsync:o.mutate}}const i8=t=>{const{toast:e}=Pr(),n=Jh();return Ry({queryKey:["library-items",t],queryFn:async()=>{const{data:{user:r}}=await ue.auth.getUser();if(!r)return n("/login"),[];let o=ue.from("library_items").select("*").order("created_at",{ascending:!1});t&&(o=o.or(`title.ilike.%${t}%,content.ilike.%${t}%`));const{data:i,error:s}=await o;return s?(console.error("Error fetching library items:",s),e({title:"שגיאה בטעינת פריטים",description:s.message,variant:"destructive"}),[]):i}})},tw="dxrl4mtlw",$E=async t=>{console.log("Uploading to Cloudinary with cloud name:",tw);const e=new FormData;e.append("file",t),e.append("upload_preset","content_library");const n=await fetch(`https://api.cloudinary.com/v1_1/${tw}/auto/upload`,{method:"POST",body:e});if(!n.ok){const o=await n.text();throw console.error("Cloudinary upload failed:",o),new Error(`Upload failed: ${o}`)}const r=await n.json();return console.log("Cloudinary response:",r),{publicId:r.public_id,url:r.secure_url,resourceType:r.resource_type,format:r.format,size:r.bytes}},FE=t=>t?{publicId:t.publicId,url:t.url,resourceType:t.resourceType,format:t.format,size:t.size}:null,BE=async t=>{try{console.log("Initiating Cloudinary deletion for public ID:",t);const{data:{session:e}}=await ue.auth.getSession();if(!e)throw console.error("No active session found"),new Error("Authentication required");const{data:n,error:r}=await ue.functions.invoke("delete-cloudinary-asset",{body:{publicId:t},headers:{Authorization:`Bearer ${e.access_token}`}});if(r)throw console.error("Error from Edge Function:",r),r;return console.log("Edge Function response:",n),(n==null?void 0:n.result)==="ok"}catch(e){throw console.error("Error deleting from Cloudinary:",e),e}};function s8(t){return t!==null&&typeof t=="object"&&"publicId"in t&&"url"in t&&"resourceType"in t&&"format"in t&&"size"in t&&typeof t.publicId=="string"&&typeof t.url=="string"&&typeof t.resourceType=="string"&&typeof t.format=="string"&&typeof t.size=="number"}const a8=()=>{const{toast:t}=Pr(),e=Ns();return{addItem:ui({mutationFn:async({title:n,content:r,type:o,file:i})=>{const{data:{user:s}}=await ue.auth.getUser();if(!s)throw new Error("User not authenticated");let a=null;i&&(console.log("Uploading file to Cloudinary:",i),a=await $E(i),console.log("Cloudinary upload response:",a));const{error:l}=await ue.from("library_items").insert({title:n,content:r,type:o,cloudinary_data:FE(a),user_id:s.id,file_details:a?{path:a.url,type:i==null?void 0:i.type,name:i==null?void 0:i.name,size:i==null?void 0:i.size}:null});if(l)throw l},onSuccess:()=>{e.invalidateQueries({queryKey:["library-items"]}),t({title:"הפריט נוסף בהצלחה"})},onError:n=>{console.error("Error adding item:",n),t({title:"שגיאה בהוספת הפריט",description:n.message,variant:"destructive"})}})}},l8=()=>{const{toast:t}=Pr(),e=Ns();return{updateItem:ui({mutationFn:async({id:n,title:r,content:o,type:i,file:s})=>{const{data:{user:a}}=await ue.auth.getUser();if(!a)throw new Error("User not authenticated");const{data:l}=await ue.from("library_items").select("cloudinary_data").eq("id",n).single();let c=l!=null&&l.cloudinary_data?l.cloudinary_data:null;s&&(c!=null&&c.publicId&&await BE(c.publicId),c=await $E(s));const{error:u}=await ue.from("library_items").update({title:r,content:o,type:i,cloudinary_data:FE(c)}).eq("id",n);if(u)throw u},onSuccess:()=>{e.invalidateQueries({queryKey:["library-items"]}),t({title:"הפריט עודכן בהצלחה"})},onError:n=>{console.error("Error updating item:",n),t({title:"שגיאה בעדכון הפריט",description:n.message,variant:"destructive"})}})}},c8=()=>{const{toast:t}=Pr(),e=Ns(),{addItem:n}=a8(),{updateItem:r}=l8(),o=ui({mutationFn:async s=>{const{data:a}=await ue.from("library_items").select("cloudinary_data").eq("id",s).single(),l=a==null?void 0:a.cloudinary_data;l&&s8(l)&&await BE(l.publicId);const{error:c}=await ue.from("library_items").delete().eq("id",s);if(c)throw c},onSuccess:()=>{e.invalidateQueries({queryKey:["library-items"]}),t({title:"הפריט נמחק בהצלחה"})},onError:s=>{console.error("Error deleting item:",s),t({title:"שגיאה במחיקת הפריט",description:s.message,variant:"destructive"})}}),i=ui({mutationFn:async({id:s,is_starred:a})=>{const{error:l}=await ue.from("library_items").update({is_starred:a}).eq("id",s);if(l)throw l},onSuccess:()=>{e.invalidateQueries({queryKey:["library-items"]})},onError:s=>{console.error("Error toggling star:",s),t({title:"שגיאה בעדכון הפריט",description:s.message,variant:"destructive"})}});return{addItem:n,updateItem:r,deleteItem:o,toggleStar:i}},u8=()=>{const[t,e]=v.useState(""),{data:n=[],isLoading:r}=i8(t),o=c8();return{items:n,isLoading:r,filter:t,setFilter:e,...o}},to=v.forwardRef(({className:t,type:e,...n},r)=>m.jsx("input",{type:e,className:ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));to.displayName="Input";var _f="focusScope.autoFocusOnMount",Of="focusScope.autoFocusOnUnmount",nw={bubbles:!1,cancelable:!0},d8="FocusScope",Py=v.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=t,[a,l]=v.useState(null),c=ot(o),u=ot(i),d=v.useRef(null),h=$e(e,g=>l(g)),p=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let g=function(x){if(p.paused||!a)return;const k=x.target;a.contains(k)?d.current=k:No(d.current,{select:!0})},y=function(x){if(p.paused||!a)return;const k=x.relatedTarget;k!==null&&(a.contains(k)||No(d.current,{select:!0}))},b=function(x){if(document.activeElement===document.body)for(const k of x)k.removedNodes.length>0&&No(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const w=new MutationObserver(b);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),w.disconnect()}}},[r,a,p.paused]),v.useEffect(()=>{if(a){ow.add(p);const g=document.activeElement;if(!a.contains(g)){const y=new CustomEvent(_f,nw);a.addEventListener(_f,c),a.dispatchEvent(y),y.defaultPrevented||(h8(y8(VE(a)),{select:!0}),document.activeElement===g&&No(a))}return()=>{a.removeEventListener(_f,c),setTimeout(()=>{const y=new CustomEvent(Of,nw);a.addEventListener(Of,u),a.dispatchEvent(y),y.defaultPrevented||No(g??document.body,{select:!0}),a.removeEventListener(Of,u),ow.remove(p)},0)}}},[a,c,u,p]);const f=v.useCallback(g=>{if(!n&&!r||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(y&&b){const w=g.currentTarget,[x,k]=p8(w);x&&k?!g.shiftKey&&b===k?(g.preventDefault(),n&&No(x,{select:!0})):g.shiftKey&&b===x&&(g.preventDefault(),n&&No(k,{select:!0})):b===w&&g.preventDefault()}},[n,r,p.paused]);return m.jsx(ge.div,{tabIndex:-1,...s,ref:h,onKeyDown:f})});Py.displayName=d8;function h8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(No(r,{select:e}),document.activeElement!==n)return}function p8(t){const e=VE(t),n=rw(e,t),r=rw(e.reverse(),t);return[n,r]}function VE(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function rw(t,e){for(const n of t)if(!f8(n,{upTo:e}))return n}function f8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function m8(t){return t instanceof HTMLInputElement&&"select"in t}function No(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&m8(t)&&e&&t.select()}}var ow=g8();function g8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=iw(t,e),t.unshift(e)},remove(e){var n;t=iw(t,e),(n=t[0])==null||n.resume()}}}function iw(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function y8(t){return t.filter(e=>e.tagName!=="A")}var jf=0;function UE(){v.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??sw()),document.body.insertAdjacentElement("beforeend",t[1]??sw()),jf++,()=>{jf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),jf--}},[])}function sw(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var br=function(){return br=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},br.apply(this,arguments)};function HE(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function v8(t,e,n){for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var yd="right-scroll-bar-position",vd="width-before-scroll-bar",b8="with-scroll-bars-hidden",w8="--removed-body-scroll-bar-size";function Rf(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function x8(t,e){var n=v.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var k8=typeof window<"u"?v.useLayoutEffect:v.useEffect,aw=new WeakMap;function S8(t,e){var n=x8(null,function(r){return t.forEach(function(o){return Rf(o,r)})});return k8(function(){var r=aw.get(n);if(r){var o=new Set(r),i=new Set(t),s=n.current;o.forEach(function(a){i.has(a)||Rf(a,null)}),i.forEach(function(a){o.has(a)||Rf(a,s)})}aw.set(n,t)},[t]),n}function C8(t){return t}function E8(t,e){e===void 0&&(e=C8);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var s=e(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var l=function(){var u=s;s=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return o}function T8(t){t===void 0&&(t={});var e=E8(null);return e.options=br({async:!0,ssr:!1},t),e}var WE=function(t){var e=t.sideCar,n=HE(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return v.createElement(r,br({},n))};WE.isSideCarExport=!0;function N8(t,e){return t.useMedium(e),WE}var qE=T8(),Pf=function(){},dp=v.forwardRef(function(t,e){var n=v.useRef(null),r=v.useState({onScrollCapture:Pf,onWheelCapture:Pf,onTouchMoveCapture:Pf}),o=r[0],i=r[1],s=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,p=t.noIsolation,f=t.inert,g=t.allowPinchZoom,y=t.as,b=y===void 0?"div":y,w=t.gapMode,x=HE(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=h,S=S8([n,e]),E=br(br({},x),o);return v.createElement(v.Fragment,null,u&&v.createElement(k,{sideCar:qE,removeScrollBar:c,shards:d,noIsolation:p,inert:f,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:w}),s?v.cloneElement(v.Children.only(a),br(br({},E),{ref:S})):v.createElement(b,br({},E,{className:l,ref:S}),a))});dp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dp.classNames={fullWidth:vd,zeroRight:yd};var M8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=M8();return e&&t.setAttribute("nonce",e),t}function O8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function j8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var R8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=_8())&&(O8(e,n),j8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},P8=function(){var t=R8();return function(e,n){v.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},KE=function(){var t=P8(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},A8={left:0,top:0,right:0,gap:0},Af=function(t){return parseInt(t||"",10)||0},D8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[Af(n),Af(r),Af(o)]},I8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return A8;var e=D8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},L8=KE(),Sa="data-scroll-locked",z8=function(t,e,n,r){var o=t.left,i=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(b8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Sa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yd,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(vd,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(yd," .").concat(yd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(vd," .").concat(vd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Sa,`] {
    `).concat(w8,": ").concat(a,`px;
  }
`)},lw=function(){var t=parseInt(document.body.getAttribute(Sa)||"0",10);return isFinite(t)?t:0},$8=function(){v.useEffect(function(){return document.body.setAttribute(Sa,(lw()+1).toString()),function(){var t=lw()-1;t<=0?document.body.removeAttribute(Sa):document.body.setAttribute(Sa,t.toString())}},[])},F8=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;$8();var i=v.useMemo(function(){return I8(o)},[o]);return v.createElement(L8,{styles:z8(i,!e,o,n?"":"!important")})},Og=!1;if(typeof window<"u")try{var Hu=Object.defineProperty({},"passive",{get:function(){return Og=!0,!0}});window.addEventListener("test",Hu,Hu),window.removeEventListener("test",Hu,Hu)}catch{Og=!1}var Hs=Og?{passive:!1}:!1,B8=function(t){return t.tagName==="TEXTAREA"},JE=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!B8(t)&&n[e]==="visible")},V8=function(t){return JE(t,"overflowY")},U8=function(t){return JE(t,"overflowX")},cw=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=GE(t,r);if(o){var i=YE(t,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},H8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},W8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},GE=function(t,e){return t==="v"?V8(e):U8(e)},YE=function(t,e){return t==="v"?H8(e):W8(e)},q8=function(t,e){return t==="h"&&e==="rtl"?-1:1},K8=function(t,e,n,r,o){var i=q8(t,window.getComputedStyle(e).direction),s=i*r,a=n.target,l=e.contains(a),c=!1,u=s>0,d=0,h=0;do{var p=YE(t,a),f=p[0],g=p[1],y=p[2],b=g-y-i*f;(f||b)&&GE(t,a)&&(d+=b,h+=f),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(h)<1||!o))&&(c=!0),c},Wu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},uw=function(t){return[t.deltaX,t.deltaY]},dw=function(t){return t&&"current"in t?t.current:t},J8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},G8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Y8=0,Ws=[];function Q8(t){var e=v.useRef([]),n=v.useRef([0,0]),r=v.useRef(),o=v.useState(Y8++)[0],i=v.useState(KE)[0],s=v.useRef(t);v.useEffect(function(){s.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var g=v8([t.lockRef.current],(t.shards||[]).map(dw)).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=v.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!s.current.allowPinchZoom;var b=Wu(g),w=n.current,x="deltaX"in g?g.deltaX:w[0]-b[0],k="deltaY"in g?g.deltaY:w[1]-b[1],S,E=g.target,T=Math.abs(x)>Math.abs(k)?"h":"v";if("touches"in g&&T==="h"&&E.type==="range")return!1;var j=cw(T,E);if(!j)return!0;if(j?S=T:(S=T==="v"?"h":"v",j=cw(T,E)),!j)return!1;if(!r.current&&"changedTouches"in g&&(x||k)&&(r.current=S),!S)return!0;var R=r.current||S;return K8(R,y,g,R==="h"?x:k,!0)},[]),l=v.useCallback(function(g){var y=g;if(!(!Ws.length||Ws[Ws.length-1]!==i)){var b="deltaY"in y?uw(y):Wu(y),w=e.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&J8(S.delta,b)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var x=(s.current.shards||[]).map(dw).filter(Boolean).filter(function(S){return S.contains(y.target)}),k=x.length>0?a(y,x[0]):!s.current.noIsolation;k&&y.cancelable&&y.preventDefault()}}},[]),c=v.useCallback(function(g,y,b,w){var x={name:g,delta:y,target:b,should:w,shadowParent:X8(b)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(k){return k!==x})},1)},[]),u=v.useCallback(function(g){n.current=Wu(g),r.current=void 0},[]),d=v.useCallback(function(g){c(g.type,uw(g),g.target,a(g,t.lockRef.current))},[]),h=v.useCallback(function(g){c(g.type,Wu(g),g.target,a(g,t.lockRef.current))},[]);v.useEffect(function(){return Ws.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Hs),document.addEventListener("touchmove",l,Hs),document.addEventListener("touchstart",u,Hs),function(){Ws=Ws.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,Hs),document.removeEventListener("touchmove",l,Hs),document.removeEventListener("touchstart",u,Hs)}},[]);var p=t.removeScrollBar,f=t.inert;return v.createElement(v.Fragment,null,f?v.createElement(i,{styles:G8(o)}):null,p?v.createElement(F8,{gapMode:t.gapMode}):null)}function X8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Z8=N8(qE,Q8);var Ay=v.forwardRef(function(t,e){return v.createElement(dp,br({},t,{ref:e,sideCar:Z8}))});Ay.classNames=dp.classNames;var e9=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},qs=new WeakMap,qu=new WeakMap,Ku={},Df=0,QE=function(t){return t&&(t.host||QE(t.parentNode))},t9=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=QE(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},n9=function(t,e,n,r){var o=t9(e,Array.isArray(t)?t:[t]);Ku[n]||(Ku[n]=new WeakMap);var i=Ku[n],s=[],a=new Set,l=new Set(o),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};o.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var p=h.getAttribute(r),f=p!==null&&p!=="false",g=(qs.get(h)||0)+1,y=(i.get(h)||0)+1;qs.set(h,g),i.set(h,y),s.push(h),g===1&&f&&qu.set(h,!0),y===1&&h.setAttribute(n,"true"),f||h.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return u(e),a.clear(),Df++,function(){s.forEach(function(d){var h=qs.get(d)-1,p=i.get(d)-1;qs.set(d,h),i.set(d,p),h||(qu.has(d)||d.removeAttribute(r),qu.delete(d)),p||d.removeAttribute(n)}),Df--,Df||(qs=new WeakMap,qs=new WeakMap,qu=new WeakMap,Ku={})}},XE=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=e9(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),n9(r,o,n,"aria-hidden")):function(){return null}},Dy="Dialog",[ZE,uq]=Tn(Dy),[r9,ur]=ZE(Dy),e3=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!0}=t,a=v.useRef(null),l=v.useRef(null),[c=!1,u]=fo({prop:r,defaultProp:o,onChange:i});return m.jsx(r9,{scope:e,triggerRef:a,contentRef:l,contentId:eo(),titleId:eo(),descriptionId:eo(),open:c,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(d=>!d),[u]),modal:s,children:n})};e3.displayName=Dy;var t3="DialogTrigger",n3=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=ur(t3,n),i=$e(e,o.triggerRef);return m.jsx(ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":zy(o.open),...r,ref:i,onClick:le(t.onClick,o.onOpenToggle)})});n3.displayName=t3;var Iy="DialogPortal",[o9,r3]=ZE(Iy,{forceMount:void 0}),o3=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:o}=t,i=ur(Iy,e);return m.jsx(o9,{scope:e,forceMount:n,children:v.Children.map(r,s=>m.jsx(Bt,{present:n||i.open,children:m.jsx(Xh,{asChild:!0,container:o,children:s})}))})};o3.displayName=Iy;var ih="DialogOverlay",i3=v.forwardRef((t,e)=>{const n=r3(ih,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,i=ur(ih,t.__scopeDialog);return i.modal?m.jsx(Bt,{present:r||i.open,children:m.jsx(i9,{...o,ref:e})}):null});i3.displayName=ih;var i9=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=ur(ih,n);return m.jsx(Ay,{as:us,allowPinchZoom:!0,shards:[o.contentRef],children:m.jsx(ge.div,{"data-state":zy(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),fs="DialogContent",s3=v.forwardRef((t,e)=>{const n=r3(fs,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,i=ur(fs,t.__scopeDialog);return m.jsx(Bt,{present:r||i.open,children:i.modal?m.jsx(s9,{...o,ref:e}):m.jsx(a9,{...o,ref:e})})});s3.displayName=fs;var s9=v.forwardRef((t,e)=>{const n=ur(fs,t.__scopeDialog),r=v.useRef(null),o=$e(e,n.contentRef,r);return v.useEffect(()=>{const i=r.current;if(i)return XE(i)},[]),m.jsx(a3,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,i=>{const s=i.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&i.preventDefault()}),onFocusOutside:le(t.onFocusOutside,i=>i.preventDefault())})}),a9=v.forwardRef((t,e)=>{const n=ur(fs,t.__scopeDialog),r=v.useRef(!1),o=v.useRef(!1);return m.jsx(a3,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,a;(s=t.onCloseAutoFocus)==null||s.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{var s,a;(s=t.onInteractOutside)==null||s.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=i.target;(a=n.triggerRef.current)!=null&&a.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),a3=v.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...s}=t,a=ur(fs,n),l=v.useRef(null),c=$e(e,l);return UE(),m.jsxs(m.Fragment,{children:[m.jsx(Py,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:m.jsx(Qh,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":zy(a.open),...s,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(l9,{titleId:a.titleId}),m.jsx(u9,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Ly="DialogTitle",l3=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=ur(Ly,n);return m.jsx(ge.h2,{id:o.titleId,...r,ref:e})});l3.displayName=Ly;var c3="DialogDescription",u3=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=ur(c3,n);return m.jsx(ge.p,{id:o.descriptionId,...r,ref:e})});u3.displayName=c3;var d3="DialogClose",h3=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=ur(d3,n);return m.jsx(ge.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>o.onOpenChange(!1))})});h3.displayName=d3;function zy(t){return t?"open":"closed"}var p3="DialogTitleWarning",[dq,f3]=Q5(p3,{contentName:fs,titleName:Ly,docsSlug:"dialog"}),l9=({titleId:t})=>{const e=f3(p3),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return v.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},c9="DialogDescriptionWarning",u9=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${f3(c9).contentName}}.`;return v.useEffect(()=>{var r;const o=(r=t.current)==null?void 0:r.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},d9=e3,h9=n3,p9=o3,m3=i3,g3=s3,y3=l3,v3=u3,f9=h3;const ao=d9,m9=h9,g9=p9,b3=v.forwardRef(({className:t,...e},n)=>m.jsx(m3,{ref:n,className:ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));b3.displayName=m3.displayName;const Mr=v.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(g9,{children:[m.jsx(b3,{}),m.jsxs(g3,{ref:r,className:ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,m.jsxs(f9,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[m.jsx(Ia,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Mr.displayName=g3.displayName;const ms=({className:t,...e})=>m.jsx("div",{className:ve("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ms.displayName="DialogHeader";const gs=v.forwardRef(({className:t,...e},n)=>m.jsx(y3,{ref:n,className:ve("text-lg font-semibold leading-none tracking-tight",t),...e}));gs.displayName=y3.displayName;const w3=v.forwardRef(({className:t,...e},n)=>m.jsx(v3,{ref:n,className:ve("text-sm text-muted-foreground",t),...e}));w3.displayName=v3.displayName;function y9({isOpen:t,onClose:e,type:n,src:r,title:o}){return m.jsx(ao,{open:t,onOpenChange:e,children:m.jsx(Mr,{className:"max-w-4xl w-full p-0",children:m.jsxs("div",{className:"relative",children:[m.jsx(ce,{variant:"ghost",size:"icon",className:"absolute right-2 top-2 z-10 bg-black/20 hover:bg-black/40",onClick:e,children:m.jsx(Ia,{className:"h-4 w-4 text-white"})}),n==="image"?m.jsx("img",{src:r,alt:o,className:"w-full h-auto max-h-[80vh] object-contain"}):m.jsxs("video",{src:r,controls:!0,className:"w-full max-h-[80vh]",autoPlay:!0,children:[m.jsx("source",{src:r,type:"video/mp4"}),"הדפדפן שלך לא תומך בתגית וידאו."]})]})})})}function v9({type:t,src:e,title:n}){const[r,o]=v.useState(!1);if(t==="pdf")return m.jsxs(ct,{className:"p-4 flex items-center gap-2",children:[m.jsx(hg,{className:"w-6 h-6 text-red-500"}),m.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:n})]});const i=()=>{(t==="image"||t==="video")&&o(!0)};return m.jsxs(m.Fragment,{children:[m.jsx(ct,{className:"overflow-hidden cursor-pointer group relative",onClick:i,children:t==="image"?m.jsx("img",{src:e,alt:n,className:"w-full h-auto transition-transform duration-200 group-hover:scale-105",loading:"lazy"}):t==="video"?m.jsxs("video",{controls:!0,className:"w-full h-auto",children:[m.jsx("source",{src:e,type:"video/mp4"}),"הדפדפן שלך לא תומך בתגית וידאו."]}):null}),(t==="image"||t==="video")&&m.jsx(y9,{isOpen:r,onClose:()=>o(!1),type:t,src:e,title:n})]})}const jc=v.forwardRef(({className:t,...e},n)=>m.jsx("textarea",{className:ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));jc.displayName="Textarea";var ou=t=>t.type==="checkbox",Hi=t=>t instanceof Date,qt=t=>t==null;const x3=t=>typeof t=="object";var ut=t=>!qt(t)&&!Array.isArray(t)&&x3(t)&&!Hi(t),b9=t=>ut(t)&&t.target?ou(t.target)?t.target.checked:t.target.value:t,w9=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,x9=(t,e)=>t.has(w9(e)),k9=t=>{const e=t.constructor&&t.constructor.prototype;return ut(e)&&e.hasOwnProperty("isPrototypeOf")},$y=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function _n(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!($y&&(t instanceof Blob||r))&&(n||ut(t)))if(e=n?[]:{},!n&&!k9(t))e=t;else for(const o in t)t.hasOwnProperty(o)&&(e[o]=_n(t[o]));else return t;return e}var hp=t=>Array.isArray(t)?t.filter(Boolean):[],tt=t=>t===void 0,ie=(t,e,n)=>{if(!e||!ut(t))return n;const r=hp(e.split(/[,[\].]+?/)).reduce((o,i)=>qt(o)?o:o[i],t);return tt(r)||r===t?tt(t[e])?n:t[e]:r},yr=t=>typeof t=="boolean",Fy=t=>/^\w*$/.test(t),k3=t=>hp(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ke=(t,e,n)=>{let r=-1;const o=Fy(e)?[e]:k3(e),i=o.length,s=i-1;for(;++r<i;){const a=o[r];let l=n;if(r!==s){const c=t[a];l=ut(c)||Array.isArray(c)?c:isNaN(+o[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}return t};const hw={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},tr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Hr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};C.createContext(null);var S9=(t,e,n,r=!0)=>{const o={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(o,i,{get:()=>{const s=i;return e._proxyFormState[s]!==tr.all&&(e._proxyFormState[s]=!r||tr.all),t[s]}});return o},rn=t=>ut(t)&&!Object.keys(t).length,C9=(t,e,n,r)=>{n(t);const{name:o,...i}=t;return rn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(s=>e[s]===tr.all)},bd=t=>Array.isArray(t)?t:[t];function E9(t){const e=C.useRef(t);e.current=t,C.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var xr=t=>typeof t=="string",T9=(t,e,n,r,o)=>xr(t)?(r&&e.watch.add(t),ie(n,t,o)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),ie(n,i))):(r&&(e.watchAll=!0),n),N9=(t,e,n,r,o)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:o||!0}}:{},pw=t=>({isOnSubmit:!t||t===tr.onSubmit,isOnBlur:t===tr.onBlur,isOnChange:t===tr.onChange,isOnAll:t===tr.all,isOnTouch:t===tr.onTouched}),fw=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const oc=(t,e,n,r)=>{for(const o of n||Object.keys(t)){const i=ie(t,o);if(i){const{_f:s,...a}=i;if(s){if(s.refs&&s.refs[0]&&e(s.refs[0],o)&&!r||s.ref&&e(s.ref,s.name)&&!r)return!0;if(oc(a,e))break}else if(ut(a)&&oc(a,e))break}}};var M9=(t,e,n)=>{const r=bd(ie(t,n));return Ke(r,"root",e[n]),Ke(t,n,r),t},By=t=>t.type==="file",wr=t=>typeof t=="function",sh=t=>{if(!$y)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},wd=t=>xr(t),Vy=t=>t.type==="radio",ah=t=>t instanceof RegExp;const mw={value:!1,isValid:!1},gw={value:!0,isValid:!0};var S3=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!tt(t[0].attributes.value)?tt(t[0].value)||t[0].value===""?gw:{value:t[0].value,isValid:!0}:gw:mw}return mw};const yw={isValid:!1,value:null};var C3=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,yw):yw;function vw(t,e,n="validate"){if(wd(t)||Array.isArray(t)&&t.every(wd)||yr(t)&&!t)return{type:n,message:wd(t)?t:"",ref:e}}var Ks=t=>ut(t)&&!ah(t)?t:{value:t,message:""},bw=async(t,e,n,r,o)=>{const{ref:i,refs:s,required:a,maxLength:l,minLength:c,min:u,max:d,pattern:h,validate:p,name:f,valueAsNumber:g,mount:y,disabled:b}=t._f,w=ie(e,f);if(!y||b)return{};const x=s?s[0]:i,k=L=>{r&&x.reportValidity&&(x.setCustomValidity(yr(L)?"":L||""),x.reportValidity())},S={},E=Vy(i),T=ou(i),j=E||T,R=(g||By(i))&&tt(i.value)&&tt(w)||sh(i)&&i.value===""||w===""||Array.isArray(w)&&!w.length,D=N9.bind(null,f,n,S),H=(L,G,F,Q=Hr.maxLength,Y=Hr.minLength)=>{const se=L?G:F;S[f]={type:L?Q:Y,message:se,ref:i,...D(L?Q:Y,se)}};if(o?!Array.isArray(w)||!w.length:a&&(!j&&(R||qt(w))||yr(w)&&!w||T&&!S3(s).isValid||E&&!C3(s).isValid)){const{value:L,message:G}=wd(a)?{value:!!a,message:a}:Ks(a);if(L&&(S[f]={type:Hr.required,message:G,ref:x,...D(Hr.required,G)},!n))return k(G),S}if(!R&&(!qt(u)||!qt(d))){let L,G;const F=Ks(d),Q=Ks(u);if(!qt(w)&&!isNaN(w)){const Y=i.valueAsNumber||w&&+w;qt(F.value)||(L=Y>F.value),qt(Q.value)||(G=Y<Q.value)}else{const Y=i.valueAsDate||new Date(w),se=M=>new Date(new Date().toDateString()+" "+M),z=i.type=="time",A=i.type=="week";xr(F.value)&&w&&(L=z?se(w)>se(F.value):A?w>F.value:Y>new Date(F.value)),xr(Q.value)&&w&&(G=z?se(w)<se(Q.value):A?w<Q.value:Y<new Date(Q.value))}if((L||G)&&(H(!!L,F.message,Q.message,Hr.max,Hr.min),!n))return k(S[f].message),S}if((l||c)&&!R&&(xr(w)||o&&Array.isArray(w))){const L=Ks(l),G=Ks(c),F=!qt(L.value)&&w.length>+L.value,Q=!qt(G.value)&&w.length<+G.value;if((F||Q)&&(H(F,L.message,G.message),!n))return k(S[f].message),S}if(h&&!R&&xr(w)){const{value:L,message:G}=Ks(h);if(ah(L)&&!w.match(L)&&(S[f]={type:Hr.pattern,message:G,ref:i,...D(Hr.pattern,G)},!n))return k(G),S}if(p){if(wr(p)){const L=await p(w,e),G=vw(L,x);if(G&&(S[f]={...G,...D(Hr.validate,G.message)},!n))return k(G.message),S}else if(ut(p)){let L={};for(const G in p){if(!rn(L)&&!n)break;const F=vw(await p[G](w,e),x,G);F&&(L={...F,...D(G,F.message)},k(F.message),n&&(S[f]=L))}if(!rn(L)&&(S[f]={ref:x,...L},!n))return S}}return k(!0),S};function _9(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=tt(t)?r++:t[e[r++]];return t}function O9(t){for(const e in t)if(t.hasOwnProperty(e)&&!tt(t[e]))return!1;return!0}function ft(t,e){const n=Array.isArray(e)?e:Fy(e)?[e]:k3(e),r=n.length===1?t:_9(t,n),o=n.length-1,i=n[o];return r&&delete r[i],o!==0&&(ut(r)&&rn(r)||Array.isArray(r)&&O9(r))&&ft(t,n.slice(0,-1)),t}var If=()=>{let t=[];return{get observers(){return t},next:e=>{for(const n of t)n.next&&n.next(e)},subscribe:e=>(t.push(e),{unsubscribe:()=>{t=t.filter(n=>n!==e)}}),unsubscribe:()=>{t=[]}}},jg=t=>qt(t)||!x3(t);function Lo(t,e){if(jg(t)||jg(e))return t===e;if(Hi(t)&&Hi(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const o of n){const i=t[o];if(!r.includes(o))return!1;if(o!=="ref"){const s=e[o];if(Hi(i)&&Hi(s)||ut(i)&&ut(s)||Array.isArray(i)&&Array.isArray(s)?!Lo(i,s):i!==s)return!1}}return!0}var E3=t=>t.type==="select-multiple",j9=t=>Vy(t)||ou(t),Lf=t=>sh(t)&&t.isConnected,T3=t=>{for(const e in t)if(wr(t[e]))return!0;return!1};function lh(t,e={}){const n=Array.isArray(t);if(ut(t)||n)for(const r in t)Array.isArray(t[r])||ut(t[r])&&!T3(t[r])?(e[r]=Array.isArray(t[r])?[]:{},lh(t[r],e[r])):qt(t[r])||(e[r]=!0);return e}function N3(t,e,n){const r=Array.isArray(t);if(ut(t)||r)for(const o in t)Array.isArray(t[o])||ut(t[o])&&!T3(t[o])?tt(e)||jg(n[o])?n[o]=Array.isArray(t[o])?lh(t[o],[]):{...lh(t[o])}:N3(t[o],qt(e)?{}:e[o],n[o]):n[o]=!Lo(t[o],e[o]);return n}var Rl=(t,e)=>N3(t,e,lh(e)),M3=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>tt(t)?t:e?t===""?NaN:t&&+t:n&&xr(t)?new Date(t):r?r(t):t;function zf(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return By(e)?e.files:Vy(e)?C3(t.refs).value:E3(e)?[...e.selectedOptions].map(({value:n})=>n):ou(e)?S3(t.refs).value:M3(tt(e.value)?t.ref.value:e.value,t)}var R9=(t,e,n,r)=>{const o={};for(const i of t){const s=ie(e,i);s&&Ke(o,i,s._f)}return{criteriaMode:n,names:[...t],fields:o,shouldUseNativeValidation:r}},Pl=t=>tt(t)?t:ah(t)?t.source:ut(t)?ah(t.value)?t.value.source:t.value:t;const ww="AsyncFunction";var P9=t=>!!t&&!!t.validate&&!!(wr(t.validate)&&t.validate.constructor.name===ww||ut(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===ww)),A9=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function xw(t,e,n){const r=ie(t,n);if(r||Fy(n))return{error:r,name:n};const o=n.split(".");for(;o.length;){const i=o.join("."),s=ie(e,i),a=ie(t,i);if(s&&!Array.isArray(s)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};o.pop()}return{name:n}}var D9=(t,e,n,r,o)=>o.isOnAll?!1:!n&&o.isOnTouch?!(e||t):(n?r.isOnBlur:o.isOnBlur)?!t:(n?r.isOnChange:o.isOnChange)?t:!0,I9=(t,e)=>!hp(ie(t,e)).length&&ft(t,e);const L9={mode:tr.onSubmit,reValidateMode:tr.onChange,shouldFocusError:!0};function z9(t={}){let e={...L9,...t},n={submitCount:0,isDirty:!1,isLoading:wr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},o=ut(e.defaultValues)||ut(e.values)?_n(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:_n(o),s={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:If(),array:If(),state:If()},h=pw(e.mode),p=pw(e.reValidateMode),f=e.criteriaMode===tr.all,g=_=>P=>{clearTimeout(c),c=setTimeout(_,P)},y=async _=>{if(!e.disabled&&(u.isValid||_)){const P=e.resolver?rn((await j()).errors):await D(r,!0);P!==n.isValid&&d.state.next({isValid:P})}},b=(_,P)=>{!e.disabled&&(u.isValidating||u.validatingFields)&&((_||Array.from(a.mount)).forEach(I=>{I&&(P?Ke(n.validatingFields,I,P):ft(n.validatingFields,I))}),d.state.next({validatingFields:n.validatingFields,isValidating:!rn(n.validatingFields)}))},w=(_,P=[],I,J,q=!0,B=!0)=>{if(J&&I&&!e.disabled){if(s.action=!0,B&&Array.isArray(ie(r,_))){const de=I(ie(r,_),J.argA,J.argB);q&&Ke(r,_,de)}if(B&&Array.isArray(ie(n.errors,_))){const de=I(ie(n.errors,_),J.argA,J.argB);q&&Ke(n.errors,_,de),I9(n.errors,_)}if(u.touchedFields&&B&&Array.isArray(ie(n.touchedFields,_))){const de=I(ie(n.touchedFields,_),J.argA,J.argB);q&&Ke(n.touchedFields,_,de)}u.dirtyFields&&(n.dirtyFields=Rl(o,i)),d.state.next({name:_,isDirty:L(_,P),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ke(i,_,P)},x=(_,P)=>{Ke(n.errors,_,P),d.state.next({errors:n.errors})},k=_=>{n.errors=_,d.state.next({errors:n.errors,isValid:!1})},S=(_,P,I,J)=>{const q=ie(r,_);if(q){const B=ie(i,_,tt(I)?ie(o,_):I);tt(B)||J&&J.defaultChecked||P?Ke(i,_,P?B:zf(q._f)):Q(_,B),s.mount&&y()}},E=(_,P,I,J,q)=>{let B=!1,de=!1;const be={name:_};if(!e.disabled){const Re=!!(ie(r,_)&&ie(r,_)._f&&ie(r,_)._f.disabled);if(!I||J){u.isDirty&&(de=n.isDirty,n.isDirty=be.isDirty=L(),B=de!==be.isDirty);const Ie=Re||Lo(ie(o,_),P);de=!!(!Re&&ie(n.dirtyFields,_)),Ie||Re?ft(n.dirtyFields,_):Ke(n.dirtyFields,_,!0),be.dirtyFields=n.dirtyFields,B=B||u.dirtyFields&&de!==!Ie}if(I){const Ie=ie(n.touchedFields,_);Ie||(Ke(n.touchedFields,_,I),be.touchedFields=n.touchedFields,B=B||u.touchedFields&&Ie!==I)}B&&q&&d.state.next(be)}return B?be:{}},T=(_,P,I,J)=>{const q=ie(n.errors,_),B=u.isValid&&yr(P)&&n.isValid!==P;if(e.delayError&&I?(l=g(()=>x(_,I)),l(e.delayError)):(clearTimeout(c),l=null,I?Ke(n.errors,_,I):ft(n.errors,_)),(I?!Lo(q,I):q)||!rn(J)||B){const de={...J,...B&&yr(P)?{isValid:P}:{},errors:n.errors,name:_};n={...n,...de},d.state.next(de)}},j=async _=>{b(_,!0);const P=await e.resolver(i,e.context,R9(_||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return b(_),P},R=async _=>{const{errors:P}=await j(_);if(_)for(const I of _){const J=ie(P,I);J?Ke(n.errors,I,J):ft(n.errors,I)}else n.errors=P;return P},D=async(_,P,I={valid:!0})=>{for(const J in _){const q=_[J];if(q){const{_f:B,...de}=q;if(B){const be=a.array.has(B.name),Re=q._f&&P9(q._f);Re&&u.validatingFields&&b([J],!0);const Ie=await bw(q,i,f,e.shouldUseNativeValidation&&!P,be);if(Re&&u.validatingFields&&b([J]),Ie[B.name]&&(I.valid=!1,P))break;!P&&(ie(Ie,B.name)?be?M9(n.errors,Ie,B.name):Ke(n.errors,B.name,Ie[B.name]):ft(n.errors,B.name))}!rn(de)&&await D(de,P,I)}}return I.valid},H=()=>{for(const _ of a.unMount){const P=ie(r,_);P&&(P._f.refs?P._f.refs.every(I=>!Lf(I)):!Lf(P._f.ref))&&re(_)}a.unMount=new Set},L=(_,P)=>!e.disabled&&(_&&P&&Ke(i,_,P),!Lo(N(),o)),G=(_,P,I)=>T9(_,a,{...s.mount?i:tt(P)?o:xr(_)?{[_]:P}:P},I,P),F=_=>hp(ie(s.mount?i:o,_,e.shouldUnregister?ie(o,_,[]):[])),Q=(_,P,I={})=>{const J=ie(r,_);let q=P;if(J){const B=J._f;B&&(!B.disabled&&Ke(i,_,M3(P,B)),q=sh(B.ref)&&qt(P)?"":P,E3(B.ref)?[...B.ref.options].forEach(de=>de.selected=q.includes(de.value)):B.refs?ou(B.ref)?B.refs.length>1?B.refs.forEach(de=>(!de.defaultChecked||!de.disabled)&&(de.checked=Array.isArray(q)?!!q.find(be=>be===de.value):q===de.value)):B.refs[0]&&(B.refs[0].checked=!!q):B.refs.forEach(de=>de.checked=de.value===q):By(B.ref)?B.ref.value="":(B.ref.value=q,B.ref.type||d.values.next({name:_,values:{...i}})))}(I.shouldDirty||I.shouldTouch)&&E(_,q,I.shouldTouch,I.shouldDirty,!0),I.shouldValidate&&M(_)},Y=(_,P,I)=>{for(const J in P){const q=P[J],B=`${_}.${J}`,de=ie(r,B);(a.array.has(_)||ut(q)||de&&!de._f)&&!Hi(q)?Y(B,q,I):Q(B,q,I)}},se=(_,P,I={})=>{const J=ie(r,_),q=a.array.has(_),B=_n(P);Ke(i,_,B),q?(d.array.next({name:_,values:{...i}}),(u.isDirty||u.dirtyFields)&&I.shouldDirty&&d.state.next({name:_,dirtyFields:Rl(o,i),isDirty:L(_,B)})):J&&!J._f&&!qt(B)?Y(_,B,I):Q(_,B,I),fw(_,a)&&d.state.next({...n}),d.values.next({name:s.mount?_:void 0,values:{...i}})},z=async _=>{s.mount=!0;const P=_.target;let I=P.name,J=!0;const q=ie(r,I),B=()=>P.type?zf(q._f):b9(_),de=be=>{J=Number.isNaN(be)||Hi(be)&&isNaN(be.getTime())||Lo(be,ie(i,I,be))};if(q){let be,Re;const Ie=B(),Wn=_.type===hw.BLUR||_.type===hw.FOCUS_OUT,Rs=!A9(q._f)&&!e.resolver&&!ie(n.errors,I)&&!q._f.deps||D9(Wn,ie(n.touchedFields,I),n.isSubmitted,p,h),dr=fw(I,a,Wn);Ke(i,I,Ie),Wn?(q._f.onBlur&&q._f.onBlur(_),l&&l(0)):q._f.onChange&&q._f.onChange(_);const xi=E(I,Ie,Wn,!1),yo=!rn(xi)||dr;if(!Wn&&d.values.next({name:I,type:_.type,values:{...i}}),Rs)return u.isValid&&(e.mode==="onBlur"?Wn&&y():y()),yo&&d.state.next({name:I,...dr?{}:xi});if(!Wn&&dr&&d.state.next({...n}),e.resolver){const{errors:Nn}=await j([I]);if(de(Ie),J){const vo=xw(n.errors,r,I),Lr=xw(Nn,r,vo.name||I);be=Lr.error,I=Lr.name,Re=rn(Nn)}}else b([I],!0),be=(await bw(q,i,f,e.shouldUseNativeValidation))[I],b([I]),de(Ie),J&&(be?Re=!1:u.isValid&&(Re=await D(r,!0)));J&&(q._f.deps&&M(q._f.deps),T(I,Re,be,xi))}},A=(_,P)=>{if(ie(n.errors,P)&&_.focus)return _.focus(),1},M=async(_,P={})=>{let I,J;const q=bd(_);if(e.resolver){const B=await R(tt(_)?_:q);I=rn(B),J=_?!q.some(de=>ie(B,de)):I}else _?(J=(await Promise.all(q.map(async B=>{const de=ie(r,B);return await D(de&&de._f?{[B]:de}:de)}))).every(Boolean),!(!J&&!n.isValid)&&y()):J=I=await D(r);return d.state.next({...!xr(_)||u.isValid&&I!==n.isValid?{}:{name:_},...e.resolver||!_?{isValid:I}:{},errors:n.errors}),P.shouldFocus&&!J&&oc(r,A,_?q:a.mount),J},N=_=>{const P={...s.mount?i:o};return tt(_)?P:xr(_)?ie(P,_):_.map(I=>ie(P,I))},$=(_,P)=>({invalid:!!ie((P||n).errors,_),isDirty:!!ie((P||n).dirtyFields,_),error:ie((P||n).errors,_),isValidating:!!ie(n.validatingFields,_),isTouched:!!ie((P||n).touchedFields,_)}),V=_=>{_&&bd(_).forEach(P=>ft(n.errors,P)),d.state.next({errors:_?n.errors:{}})},K=(_,P,I)=>{const J=(ie(r,_,{_f:{}})._f||{}).ref,q=ie(n.errors,_)||{},{ref:B,message:de,type:be,...Re}=q;Ke(n.errors,_,{...Re,...P,ref:J}),d.state.next({name:_,errors:n.errors,isValid:!1}),I&&I.shouldFocus&&J&&J.focus&&J.focus()},te=(_,P)=>wr(_)?d.values.subscribe({next:I=>_(G(void 0,P),I)}):G(_,P,!0),re=(_,P={})=>{for(const I of _?bd(_):a.mount)a.mount.delete(I),a.array.delete(I),P.keepValue||(ft(r,I),ft(i,I)),!P.keepError&&ft(n.errors,I),!P.keepDirty&&ft(n.dirtyFields,I),!P.keepTouched&&ft(n.touchedFields,I),!P.keepIsValidating&&ft(n.validatingFields,I),!e.shouldUnregister&&!P.keepDefaultValue&&ft(o,I);d.values.next({values:{...i}}),d.state.next({...n,...P.keepDirty?{isDirty:L()}:{}}),!P.keepIsValid&&y()},X=({disabled:_,name:P,field:I,fields:J,value:q})=>{if(yr(_)&&s.mount||_){const B=_?void 0:tt(q)?zf(I?I._f:ie(J,P)._f):q;(_||!_&&!tt(B))&&Ke(i,P,B),E(P,B,!1,!1,!0)}},me=(_,P={})=>{let I=ie(r,_);const J=yr(P.disabled)||yr(e.disabled);return Ke(r,_,{...I||{},_f:{...I&&I._f?I._f:{ref:{name:_}},name:_,mount:!0,...P}}),a.mount.add(_),I?X({field:I,disabled:yr(P.disabled)?P.disabled:e.disabled,name:_,value:P.value}):S(_,!0,P.value),{...J?{disabled:P.disabled||e.disabled}:{},...e.progressive?{required:!!P.required,min:Pl(P.min),max:Pl(P.max),minLength:Pl(P.minLength),maxLength:Pl(P.maxLength),pattern:Pl(P.pattern)}:{},name:_,onChange:z,onBlur:z,ref:q=>{if(q){me(_,P),I=ie(r,_);const B=tt(q.value)&&q.querySelectorAll&&q.querySelectorAll("input,select,textarea")[0]||q,de=j9(B),be=I._f.refs||[];if(de?be.find(Re=>Re===B):B===I._f.ref)return;Ke(r,_,{_f:{...I._f,...de?{refs:[...be.filter(Lf),B,...Array.isArray(ie(o,_))?[{}]:[]],ref:{type:B.type,name:_}}:{ref:B}}}),S(_,!1,void 0,B)}else I=ie(r,_,{}),I._f&&(I._f.mount=!1),(e.shouldUnregister||P.shouldUnregister)&&!(x9(a.array,_)&&s.action)&&a.unMount.add(_)}}},pe=()=>e.shouldFocusError&&oc(r,A,a.mount),Ae=_=>{yr(_)&&(d.state.next({disabled:_}),oc(r,(P,I)=>{const J=ie(r,I);J&&(P.disabled=J._f.disabled||_,Array.isArray(J._f.refs)&&J._f.refs.forEach(q=>{q.disabled=J._f.disabled||_}))},0,!1))},Ne=(_,P)=>async I=>{let J;if(I&&(I.preventDefault&&I.preventDefault(),I.persist&&I.persist()),e.disabled){P&&await P({...n.errors},I);return}let q=_n(i);if(d.state.next({isSubmitting:!0}),e.resolver){const{errors:B,values:de}=await j();n.errors=B,q=de}else await D(r);if(ft(n.errors,"root"),rn(n.errors)){d.state.next({errors:{}});try{await _(q,I)}catch(B){J=B}}else P&&await P({...n.errors},I),pe(),setTimeout(pe);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:rn(n.errors)&&!J,submitCount:n.submitCount+1,errors:n.errors}),J)throw J},Ve=(_,P={})=>{ie(r,_)&&(tt(P.defaultValue)?se(_,_n(ie(o,_))):(se(_,P.defaultValue),Ke(o,_,_n(P.defaultValue))),P.keepTouched||ft(n.touchedFields,_),P.keepDirty||(ft(n.dirtyFields,_),n.isDirty=P.defaultValue?L(_,_n(ie(o,_))):L()),P.keepError||(ft(n.errors,_),u.isValid&&y()),d.state.next({...n}))},Fe=(_,P={})=>{const I=_?_n(_):o,J=_n(I),q=rn(_),B=q?o:J;if(P.keepDefaultValues||(o=I),!P.keepValues){if(P.keepDirtyValues){const de=new Set([...a.mount,...Object.keys(Rl(o,i))]);for(const be of Array.from(de))ie(n.dirtyFields,be)?Ke(B,be,ie(i,be)):se(be,ie(B,be))}else{if($y&&tt(_))for(const de of a.mount){const be=ie(r,de);if(be&&be._f){const Re=Array.isArray(be._f.refs)?be._f.refs[0]:be._f.ref;if(sh(Re)){const Ie=Re.closest("form");if(Ie){Ie.reset();break}}}}r={}}i=e.shouldUnregister?P.keepDefaultValues?_n(o):{}:_n(B),d.array.next({values:{...B}}),d.values.next({values:{...B}})}a={mount:P.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!u.isValid||!!P.keepIsValid||!!P.keepDirtyValues,s.watch=!!e.shouldUnregister,d.state.next({submitCount:P.keepSubmitCount?n.submitCount:0,isDirty:q?!1:P.keepDirty?n.isDirty:!!(P.keepDefaultValues&&!Lo(_,o)),isSubmitted:P.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:q?{}:P.keepDirtyValues?P.keepDefaultValues&&i?Rl(o,i):n.dirtyFields:P.keepDefaultValues&&_?Rl(o,_):P.keepDirty?n.dirtyFields:{},touchedFields:P.keepTouched?n.touchedFields:{},errors:P.keepErrors?n.errors:{},isSubmitSuccessful:P.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Se=(_,P)=>Fe(wr(_)?_(i):_,P);return{control:{register:me,unregister:re,getFieldState:$,handleSubmit:Ne,setError:K,_executeSchema:j,_getWatch:G,_getDirty:L,_updateValid:y,_removeUnmounted:H,_updateFieldArray:w,_updateDisabledField:X,_getFieldArray:F,_reset:Fe,_resetDefaultValues:()=>wr(e.defaultValues)&&e.defaultValues().then(_=>{Se(_,e.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:_=>{n={...n,..._}},_disableForm:Ae,_subjects:d,_proxyFormState:u,_setErrors:k,get _fields(){return r},get _formValues(){return i},get _state(){return s},set _state(_){s=_},get _defaultValues(){return o},get _names(){return a},set _names(_){a=_},get _formState(){return n},set _formState(_){n=_},get _options(){return e},set _options(_){e={...e,..._}}},trigger:M,register:me,handleSubmit:Ne,watch:te,setValue:se,getValues:N,reset:Se,resetField:Ve,clearErrors:V,unregister:re,setError:K,setFocus:(_,P={})=>{const I=ie(r,_),J=I&&I._f;if(J){const q=J.refs?J.refs[0]:J.ref;q.focus&&(q.focus(),P.shouldSelect&&wr(q.select)&&q.select())}},getFieldState:$}}function $9(t={}){const e=C.useRef(void 0),n=C.useRef(void 0),[r,o]=C.useState({isDirty:!1,isValidating:!1,isLoading:wr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:wr(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...z9(t),formState:r});const i=e.current.control;return i._options=t,E9({subject:i._subjects.state,next:s=>{C9(s,i._proxyFormState,i._updateFormState)&&o({...i._formState})}}),C.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),C.useEffect(()=>{if(i._proxyFormState.isDirty){const s=i._getDirty();s!==r.isDirty&&i._subjects.state.next({isDirty:s})}},[i,r.isDirty]),C.useEffect(()=>{t.values&&!Lo(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,o(s=>({...s}))):i._resetDefaultValues()},[t.values,i]),C.useEffect(()=>{t.errors&&i._setErrors(t.errors)},[t.errors,i]),C.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),C.useEffect(()=>{t.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[t.shouldUnregister,i]),e.current.formState=S9(r,i),e.current}function F9({isOpen:t,onClose:e,onSubmit:n,initialData:r}){const{register:o,handleSubmit:i,reset:s,watch:a}=$9({defaultValues:r||{title:"",content:"",type:"note"}}),l=a("type"),[c,u]=C.useState(null),d=p=>{const f={...p,file:c};n(f),u(null),s()},h=p=>{var f;const g=(f=p.target.files)==null?void 0:f[0];g&&u(g)};return m.jsx(ao,{open:t,onOpenChange:e,children:m.jsxs(Mr,{children:[m.jsx(ms,{children:m.jsx(gs,{children:r?"ערוך פריט":"הוסף פריט חדש"})}),m.jsxs("form",{onSubmit:i(d),className:"space-y-4",children:[m.jsx("div",{children:m.jsx(to,{placeholder:"כותרת",...o("title",{required:!0})})}),m.jsx("div",{children:m.jsxs("select",{className:"w-full p-2 border rounded-md",...o("type",{required:!0}),children:[m.jsx("option",{value:"note",children:"הערה"}),m.jsx("option",{value:"link",children:"קישור"}),m.jsx("option",{value:"image",children:"תמונה"}),m.jsx("option",{value:"video",children:"וידאו"}),m.jsx("option",{value:"whatsapp",children:"וואטסאפ"}),m.jsx("option",{value:"pdf",children:"PDF"}),m.jsx("option",{value:"question",children:"שאלה"})]})}),m.jsx("div",{children:m.jsx(jc,{placeholder:l==="question"?"מה השאלה שלך?":"תוכן",...o("content",{required:!0})})}),(l==="image"||l==="video"||l==="pdf")&&m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:l==="image"?"העלה תמונה":l==="video"?"העלה וידאו":"העלה PDF"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(to,{type:"file",accept:l==="image"?"image/*":l==="video"?"video/*":"application/pdf",onChange:h,className:"flex-1"}),c&&m.jsx("span",{className:"text-sm text-gray-500",children:c.name})]})]}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx(ce,{type:"button",variant:"outline",onClick:e,children:"ביטול"}),m.jsx(ce,{type:"submit",children:r?"עדכן":"הוסף"})]})]})]})})}const B9=t=>{switch(t){case"link":return m.jsx(Gj,{className:"w-4 h-4"});case"note":return m.jsx(hg,{className:"w-4 h-4"});case"image":return m.jsx(iC,{className:"w-4 h-4"});case"video":return m.jsx(sR,{className:"w-4 h-4"});case"whatsapp":return m.jsx(sC,{className:"w-4 h-4"});case"pdf":return m.jsx(hg,{className:"w-4 h-4 text-red-500"});case"question":return m.jsx(Hj,{className:"w-4 h-4 text-purple-500"})}},V9=()=>{const{items:t,isLoading:e,filter:n,setFilter:r,addItem:o,deleteItem:i,toggleStar:s,updateItem:a}=u8(),[l,c]=v.useState(!1),[u,d]=v.useState(null),h=async f=>{try{u?await a.mutateAsync({id:u.id,...f}):await o.mutateAsync(f),c(!1),d(null)}catch(g){console.error("Error adding/updating item:",g)}},p=f=>{d(f),c(!0)};return e?m.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h2",{className:"text-2xl font-bold",children:"ספריית תוכן"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx(to,{type:"search",placeholder:"חיפוש...",value:n,onChange:f=>r(f.target.value),className:"max-w-xs"}),m.jsx(ce,{onClick:()=>{d(null),c(!0)},className:"gap-2",children:"הוסף פריט"})]})]}),m.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(f=>{var g;return m.jsxs(ct,{className:"p-4 hover:shadow-lg transition-shadow",children:[m.jsxs("div",{className:"flex justify-between items-start mb-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[B9(f.type),m.jsx("h3",{className:"font-semibold",children:f.title})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>s.mutate({id:f.id,is_starred:!f.is_starred}),className:"hover:text-yellow-400",children:m.jsx(rR,{className:`w-4 h-4 ${f.is_starred?"fill-yellow-400 text-yellow-400":""}`})}),m.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>p(f),className:"hover:text-blue-500",children:m.jsx(pg,{className:"w-4 h-4"})}),m.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>i.mutate(f.id),className:"hover:text-red-500",children:m.jsx(ds,{className:"w-4 h-4"})})]})]}),m.jsx("p",{className:"text-sm text-gray-600 mb-3",children:f.content}),((g=f.file_details)==null?void 0:g.path)&&(f.type==="image"||f.type==="video"||f.type==="pdf")&&m.jsx("div",{className:"mt-2",children:m.jsx(v9,{type:f.type,src:f.file_details.path,title:f.title})})]},f.id)})}),m.jsx(F9,{onSubmit:h,initialData:u,isOpen:l,onClose:()=>{c(!1),d(null)}})]})};var $f="rovingFocusGroup.onEntryFocus",U9={bubbles:!1,cancelable:!0},pp="RovingFocusGroup",[Rg,_3,H9]=Yh(pp),[W9,fp]=Tn(pp,[H9]),[q9,K9]=W9(pp),O3=v.forwardRef((t,e)=>m.jsx(Rg.Provider,{scope:t.__scopeRovingFocusGroup,children:m.jsx(Rg.Slot,{scope:t.__scopeRovingFocusGroup,children:m.jsx(J9,{...t,ref:e})})}));O3.displayName=pp;var J9=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=v.useRef(null),p=$e(e,h),f=ru(i),[g=null,y]=fo({prop:s,defaultProp:a,onChange:l}),[b,w]=v.useState(!1),x=ot(c),k=_3(n),S=v.useRef(!1),[E,T]=v.useState(0);return v.useEffect(()=>{const j=h.current;if(j)return j.addEventListener($f,x),()=>j.removeEventListener($f,x)},[x]),m.jsx(q9,{scope:n,orientation:r,dir:f,loop:o,currentTabStopId:g,onItemFocus:v.useCallback(j=>y(j),[y]),onItemShiftTab:v.useCallback(()=>w(!0),[]),onFocusableItemAdd:v.useCallback(()=>T(j=>j+1),[]),onFocusableItemRemove:v.useCallback(()=>T(j=>j-1),[]),children:m.jsx(ge.div,{tabIndex:b||E===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:le(t.onMouseDown,()=>{S.current=!0}),onFocus:le(t.onFocus,j=>{const R=!S.current;if(j.target===j.currentTarget&&R&&!b){const D=new CustomEvent($f,U9);if(j.currentTarget.dispatchEvent(D),!D.defaultPrevented){const H=k().filter(Q=>Q.focusable),L=H.find(Q=>Q.active),G=H.find(Q=>Q.id===g),F=[L,G,...H].filter(Boolean).map(Q=>Q.ref.current);P3(F,u)}}S.current=!1}),onBlur:le(t.onBlur,()=>w(!1))})})}),j3="RovingFocusGroupItem",R3=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,...s}=t,a=eo(),l=i||a,c=K9(j3,n),u=c.currentTabStopId===l,d=_3(n),{onFocusableItemAdd:h,onFocusableItemRemove:p}=c;return v.useEffect(()=>{if(r)return h(),()=>p()},[r,h,p]),m.jsx(Rg.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:m.jsx(ge.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...s,ref:e,onMouseDown:le(t.onMouseDown,f=>{r?c.onItemFocus(l):f.preventDefault()}),onFocus:le(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:le(t.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){c.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const g=Q9(f,c.orientation,c.dir);if(g!==void 0){if(f.metaKey||f.ctrlKey||f.altKey||f.shiftKey)return;f.preventDefault();let y=d().filter(b=>b.focusable).map(b=>b.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const b=y.indexOf(f.currentTarget);y=c.loop?X9(y,b+1):y.slice(b+1)}setTimeout(()=>P3(y))}})})})});R3.displayName=j3;var G9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Y9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Q9(t,e,n){const r=Y9(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return G9[r]}function P3(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function X9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var A3=O3,D3=R3,Uy="Tabs",[Z9,hq]=Tn(Uy,[fp]),I3=fp(),[eI,Hy]=Z9(Uy),L3=v.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:i,orientation:s="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=ru(a),[d,h]=fo({prop:r,onChange:o,defaultProp:i});return m.jsx(eI,{scope:n,baseId:eo(),value:d,onValueChange:h,orientation:s,dir:u,activationMode:l,children:m.jsx(ge.div,{dir:u,"data-orientation":s,...c,ref:e})})});L3.displayName=Uy;var z3="TabsList",$3=v.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...o}=t,i=Hy(z3,n),s=I3(n);return m.jsx(A3,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:r,children:m.jsx(ge.div,{role:"tablist","aria-orientation":i.orientation,...o,ref:e})})});$3.displayName=z3;var F3="TabsTrigger",B3=v.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...i}=t,s=Hy(F3,n),a=I3(n),l=H3(s.baseId,r),c=W3(s.baseId,r),u=r===s.value;return m.jsx(D3,{asChild:!0,...a,focusable:!o,active:u,children:m.jsx(ge.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...i,ref:e,onMouseDown:le(t.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?s.onValueChange(r):d.preventDefault()}),onKeyDown:le(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&s.onValueChange(r)}),onFocus:le(t.onFocus,()=>{const d=s.activationMode!=="manual";!u&&!o&&d&&s.onValueChange(r)})})})});B3.displayName=F3;var V3="TabsContent",U3=v.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:o,children:i,...s}=t,a=Hy(V3,n),l=H3(a.baseId,r),c=W3(a.baseId,r),u=r===a.value,d=v.useRef(u);return v.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),m.jsx(Bt,{present:o||u,children:({present:h})=>m.jsx(ge.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...s,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&i})})});U3.displayName=V3;function H3(t,e){return`${t}-trigger-${e}`}function W3(t,e){return`${t}-content-${e}`}var tI=L3,q3=$3,K3=B3,J3=U3;const G3=tI,Wy=v.forwardRef(({className:t,...e},n)=>m.jsx(q3,{ref:n,className:ve("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Wy.displayName=q3.displayName;const Rc=v.forwardRef(({className:t,...e},n)=>m.jsx(K3,{ref:n,className:ve("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Rc.displayName=K3.displayName;const Pc=v.forwardRef(({className:t,...e},n)=>m.jsx(J3,{ref:n,className:ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Pc.displayName=J3.displayName;const nI=()=>{const{session:t}=Ts(),{toast:e}=Pr(),[n,r]=C.useState(""),[o,i]=C.useState(""),[s,a]=C.useState("general"),[l,c]=C.useState(!1),[u,d]=C.useState(null),[h,p]=C.useState(!1),f=Ns(),{data:g,isLoading:y}=Ry({queryKey:["questions"],queryFn:async()=>{const{data:E,error:T}=await ue.from("questions").select("*").order("created_at",{ascending:!1});if(T)throw T;return E}}),b=ui({mutationFn:async E=>{const{error:T}=await ue.from("questions").insert([{content:E,user_id:t==null?void 0:t.user.id,type:s}]);if(T)throw T},onSuccess:()=>{f.invalidateQueries({queryKey:["questions"]}),r(""),c(!1),e({title:"השאלה נשמרה בהצלחה",description:"נענה בהקדם האפשרי"})},onError:()=>{e({title:"שגיאה בשמירת השאלה",description:"אנא נסה שוב מאוחר יותר",variant:"destructive"})}}),w=ui({mutationFn:async({questionId:E,answer:T})=>{const{error:j}=await ue.from("questions").update({answer:T,is_answered:!0}).eq("id",E);if(j)throw j},onSuccess:()=>{f.invalidateQueries({queryKey:["questions"]}),i(""),p(!1),d(null),e({title:"התשובה נשמרה בהצלחה",description:"התשובה נוספה לשאלה"})},onError:()=>{e({title:"שגיאה בשמירת התשובה",description:"אנא נסה שוב מאוחר יותר",variant:"destructive"})}}),x=E=>{E.preventDefault(),n.trim()&&b.mutate(n)},k=E=>{E.preventDefault(),!(!o.trim()||!u)&&w.mutate({questionId:u,answer:o})},S=E=>{const T=(g==null?void 0:g.filter(j=>j.type===E))||[];return T.length===0?m.jsx("div",{className:"text-center py-4 text-gray-500",children:"עדיין אין שאלות. אתה מוזמן להוסיף את השאלה הראשונה!"}):m.jsx("div",{className:"space-y-4",children:T.map(j=>m.jsxs(ct,{className:"bg-background text-foreground transition-colors duration-300",children:[m.jsxs(Vi,{children:[m.jsx(Ui,{className:"text-lg",children:j.content}),m.jsx(UC,{children:new Date(j.created_at).toLocaleDateString("he-IL")})]}),j.answer&&m.jsxs(Vo,{className:"pt-4 border-t",children:[m.jsx("p",{className:"font-semibold mb-2",children:"תשובה:"}),m.jsx("p",{children:j.answer})]}),m.jsx(HC,{className:"pt-4",children:m.jsxs(ce,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{d(j.id),p(!0)},children:[m.jsx(Xj,{className:"h-4 w-4"}),j.answer?"ערוך תשובה":"הוסף תשובה"]})})]},j.id))})};return m.jsxs("div",{className:"bg-background text-foreground transition-colors duration-300 rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2 text-foreground",children:[m.jsx(sC,{className:"h-6 w-6"}),"שאלות"]}),m.jsxs(ao,{open:l,onOpenChange:c,children:[m.jsx(m9,{asChild:!0,children:m.jsxs(ce,{className:"flex items-center gap-2",children:[m.jsx(uy,{className:"h-4 w-4"}),"שאלה חדשה"]})}),m.jsxs(Mr,{children:[m.jsx(ms,{children:m.jsx(gs,{children:"הוספת שאלה חדשה"})}),m.jsxs("form",{onSubmit:x,className:"space-y-4",children:[m.jsxs("div",{className:"flex gap-4 mb-4",children:[m.jsx(ce,{type:"button",variant:s==="general"?"default":"outline",onClick:()=>a("general"),children:"שאלה כללית"}),m.jsx(ce,{type:"button",variant:s==="trading"?"default":"outline",onClick:()=>a("trading"),children:"שאלה ליועץ המסחר"})]}),m.jsx(jc,{value:n,onChange:E=>r(E.target.value),placeholder:"מה תרצה לשאול?",className:"min-h-[100px]"}),m.jsx(ce,{type:"submit",disabled:!n.trim(),children:"שלח שאלה"})]})]})]})]}),m.jsx(ao,{open:h,onOpenChange:p,children:m.jsxs(Mr,{children:[m.jsx(ms,{children:m.jsx(gs,{children:"הוספת תשובה"})}),m.jsxs("form",{onSubmit:k,className:"space-y-4",children:[m.jsx(jc,{value:o,onChange:E=>i(E.target.value),placeholder:"כתוב את התשובה כאן...",className:"min-h-[100px]"}),m.jsx(ce,{type:"submit",disabled:!o.trim(),children:"שמור תשובה"})]})]})}),y?m.jsx("div",{className:"text-center py-4",children:"טוען..."}):m.jsxs(G3,{defaultValue:"general",className:"w-full",children:[m.jsxs(Wy,{className:"grid w-full grid-cols-2",children:[m.jsx(Rc,{value:"general",children:"שאלות כלליות"}),m.jsx(Rc,{value:"trading",children:"שאלות ליועץ המסחר"})]}),m.jsx(Pc,{value:"general",className:"mt-6",children:S("general")}),m.jsx(Pc,{value:"trading",className:"mt-6",children:S("trading")})]})]})};function rI(t,[e,n]){return Math.min(n,Math.max(e,t))}function oI(t,e){return v.useReducer((n,r)=>e[n][r]??n,t)}var qy="ScrollArea",[Y3,pq]=Tn(qy),[iI,Un]=Y3(qy),Q3=v.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:i=600,...s}=t,[a,l]=v.useState(null),[c,u]=v.useState(null),[d,h]=v.useState(null),[p,f]=v.useState(null),[g,y]=v.useState(null),[b,w]=v.useState(0),[x,k]=v.useState(0),[S,E]=v.useState(!1),[T,j]=v.useState(!1),R=$e(e,H=>l(H)),D=ru(o);return m.jsx(iI,{scope:n,type:r,dir:D,scrollHideDelay:i,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:p,onScrollbarXChange:f,scrollbarXEnabled:S,onScrollbarXEnabledChange:E,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:T,onScrollbarYEnabledChange:j,onCornerWidthChange:w,onCornerHeightChange:k,children:m.jsx(ge.div,{dir:D,...s,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":x+"px",...t.style}})})});Q3.displayName=qy;var X3="ScrollAreaViewport",Z3=v.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:o,...i}=t,s=Un(X3,n),a=v.useRef(null),l=$e(e,a,s.onViewportChange);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),m.jsx(ge.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t.style},children:m.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Z3.displayName=X3;var Ar="ScrollAreaScrollbar",Ky=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=Un(Ar,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=o,a=t.orientation==="horizontal";return v.useEffect(()=>(a?i(!0):s(!0),()=>{a?i(!1):s(!1)}),[a,i,s]),o.type==="hover"?m.jsx(sI,{...r,ref:e,forceMount:n}):o.type==="scroll"?m.jsx(aI,{...r,ref:e,forceMount:n}):o.type==="auto"?m.jsx(e4,{...r,ref:e,forceMount:n}):o.type==="always"?m.jsx(Jy,{...r,ref:e}):null});Ky.displayName=Ar;var sI=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=Un(Ar,t.__scopeScrollArea),[i,s]=v.useState(!1);return v.useEffect(()=>{const a=o.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),s(!0)},u=()=>{l=window.setTimeout(()=>s(!1),o.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[o.scrollArea,o.scrollHideDelay]),m.jsx(Bt,{present:n||i,children:m.jsx(e4,{"data-state":i?"visible":"hidden",...r,ref:e})})}),aI=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=Un(Ar,t.__scopeScrollArea),i=t.orientation==="horizontal",s=gp(()=>l("SCROLL_END"),100),[a,l]=oI("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return v.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,o.scrollHideDelay,l]),v.useEffect(()=>{const c=o.viewport,u=i?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const p=c[u];d!==p&&(l("SCROLL"),s()),d=p};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[o.viewport,i,l,s]),m.jsx(Bt,{present:n||a!=="hidden",children:m.jsx(Jy,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:le(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:le(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),e4=v.forwardRef((t,e)=>{const n=Un(Ar,t.__scopeScrollArea),{forceMount:r,...o}=t,[i,s]=v.useState(!1),a=t.orientation==="horizontal",l=gp(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;s(a?c:u)}},10);return $a(n.viewport,l),$a(n.content,l),m.jsx(Bt,{present:r||i,children:m.jsx(Jy,{"data-state":i?"visible":"hidden",...o,ref:e})})}),Jy=v.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,o=Un(Ar,t.__scopeScrollArea),i=v.useRef(null),s=v.useRef(0),[a,l]=v.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=i4(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:h=>s.current=h};function d(h,p){return pI(h,s.current,a,p)}return n==="horizontal"?m.jsx(lI,{...u,ref:e,onThumbPositionChange:()=>{if(o.viewport&&i.current){const h=o.viewport.scrollLeft,p=kw(h,a,o.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollLeft=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollLeft=d(h,o.dir))}}):n==="vertical"?m.jsx(cI,{...u,ref:e,onThumbPositionChange:()=>{if(o.viewport&&i.current){const h=o.viewport.scrollTop,p=kw(h,a);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollTop=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollTop=d(h))}}):null}),lI=v.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...o}=t,i=Un(Ar,t.__scopeScrollArea),[s,a]=v.useState(),l=v.useRef(null),c=$e(e,l,i.onScrollbarXChange);return v.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),m.jsx(n4,{"data-orientation":"horizontal",...o,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":mp(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),a4(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:uh(s.paddingLeft),paddingEnd:uh(s.paddingRight)}})}})}),cI=v.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...o}=t,i=Un(Ar,t.__scopeScrollArea),[s,a]=v.useState(),l=v.useRef(null),c=$e(e,l,i.onScrollbarYChange);return v.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),m.jsx(n4,{"data-orientation":"vertical",...o,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":mp(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),a4(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:uh(s.paddingTop),paddingEnd:uh(s.paddingBottom)}})}})}),[uI,t4]=Y3(Ar),n4=v.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=t,p=Un(Ar,n),[f,g]=v.useState(null),y=$e(e,R=>g(R)),b=v.useRef(null),w=v.useRef(""),x=p.viewport,k=r.content-r.viewport,S=ot(u),E=ot(l),T=gp(d,10);function j(R){if(b.current){const D=R.clientX-b.current.left,H=R.clientY-b.current.top;c({x:D,y:H})}}return v.useEffect(()=>{const R=D=>{const H=D.target;f!=null&&f.contains(H)&&S(D,k)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[x,f,k,S]),v.useEffect(E,[r,E]),$a(f,T),$a(p.content,T),m.jsx(uI,{scope:n,scrollbar:f,hasThumb:o,onThumbChange:ot(i),onThumbPointerUp:ot(s),onThumbPositionChange:E,onThumbPointerDown:ot(a),children:m.jsx(ge.div,{...h,ref:y,style:{position:"absolute",...h.style},onPointerDown:le(t.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),b.current=f.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),j(R))}),onPointerMove:le(t.onPointerMove,j),onPointerUp:le(t.onPointerUp,R=>{const D=R.target;D.hasPointerCapture(R.pointerId)&&D.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=w.current,p.viewport&&(p.viewport.style.scrollBehavior=""),b.current=null})})})}),ch="ScrollAreaThumb",r4=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=t4(ch,t.__scopeScrollArea);return m.jsx(Bt,{present:n||o.hasThumb,children:m.jsx(dI,{ref:e,...r})})}),dI=v.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...o}=t,i=Un(ch,n),s=t4(ch,n),{onThumbPositionChange:a}=s,l=$e(e,d=>s.onThumbChange(d)),c=v.useRef(void 0),u=gp(()=>{c.current&&(c.current(),c.current=void 0)},100);return v.useEffect(()=>{const d=i.viewport;if(d){const h=()=>{if(u(),!c.current){const p=fI(d,a);c.current=p,a()}};return a(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[i.viewport,u,a]),m.jsx(ge.div,{"data-state":s.hasThumb?"visible":"hidden",...o,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:le(t.onPointerDownCapture,d=>{const h=d.target.getBoundingClientRect(),p=d.clientX-h.left,f=d.clientY-h.top;s.onThumbPointerDown({x:p,y:f})}),onPointerUp:le(t.onPointerUp,s.onThumbPointerUp)})});r4.displayName=ch;var Gy="ScrollAreaCorner",o4=v.forwardRef((t,e)=>{const n=Un(Gy,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?m.jsx(hI,{...t,ref:e}):null});o4.displayName=Gy;var hI=v.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,o=Un(Gy,n),[i,s]=v.useState(0),[a,l]=v.useState(0),c=!!(i&&a);return $a(o.scrollbarX,()=>{var u;const d=((u=o.scrollbarX)==null?void 0:u.offsetHeight)||0;o.onCornerHeightChange(d),l(d)}),$a(o.scrollbarY,()=>{var u;const d=((u=o.scrollbarY)==null?void 0:u.offsetWidth)||0;o.onCornerWidthChange(d),s(d)}),c?m.jsx(ge.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function uh(t){return t?parseInt(t,10):0}function i4(t,e){const n=t/e;return isNaN(n)?0:n}function mp(t){const e=i4(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function pI(t,e,n,r="ltr"){const o=mp(n),i=o/2,s=e||i,a=o-s,l=n.scrollbar.paddingStart+s,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return s4([l,c],d)(t)}function kw(t,e,n="ltr"){const r=mp(e),o=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-o,s=e.content-e.viewport,a=i-r,l=n==="ltr"?[0,s]:[s*-1,0],c=rI(t,l);return s4([0,s],[0,a])(c)}function s4(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function a4(t,e){return t>0&&t<e}var fI=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function o(){const i={left:t.scrollLeft,top:t.scrollTop},s=n.left!==i.left,a=n.top!==i.top;(s||a)&&e(),n=i,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function gp(t,e){const n=ot(t),r=v.useRef(0);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),v.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function $a(t,e){const n=ot(e);Nr(()=>{let r=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(t),()=>{window.cancelAnimationFrame(r),o.unobserve(t)}}},[t,n])}var l4=Q3,mI=Z3,gI=o4;const c4=v.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(l4,{ref:r,className:ve("relative overflow-hidden",t),...n,children:[m.jsx(mI,{className:"h-full w-full rounded-[inherit]",children:e}),m.jsx(u4,{}),m.jsx(gI,{})]}));c4.displayName=l4.displayName;const u4=v.forwardRef(({className:t,orientation:e="vertical",...n},r)=>m.jsx(Ky,{ref:r,orientation:e,className:ve("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:m.jsx(r4,{className:"relative flex-1 rounded-full bg-border"})}));u4.displayName=Ky.displayName;function yI(){const[t,e]=v.useState([]),[n,r]=v.useState(""),[o,i]=v.useState(!1),{toast:s}=Pr(),{session:a}=Ts(),l=async c=>{var u,d,h;if(c.preventDefault(),!n.trim()||!((u=a==null?void 0:a.user)!=null&&u.id))return;const p=n;r(""),e(f=>[...f,{role:"user",content:p}]),i(!0);try{const{data:f,error:g}=await ue.functions.invoke("chat-assistant",{body:{message:p,userId:a.user.id}});if(g)throw g;if(f.error){if(f.error==="Rate limit exceeded")s({title:"נא להמתין",description:"נא להמתין מעט לפני שליחת הודעה נוספת",variant:"destructive"});else throw new Error(f.error);e(y=>y.slice(0,-1));return}e(y=>[...y,{role:"assistant",content:f.response}])}catch(f){console.error("Error sending message:",f);let g="אנא נסה שוב מאוחר יותר";((d=f.message)!=null&&d.includes("Rate limit exceeded")||f.status===429||(h=f.message)!=null&&h.includes("RATE_LIMIT_EXCEEDED"))&&(g="נא להמתין מעט לפני שליחת הודעה נוספת"),s({title:"שגיאה בשליחת ההודעה",description:g,variant:"destructive"}),e(y=>y.slice(0,-1))}finally{i(!1)}};return m.jsxs(ct,{className:"p-4 h-[500px] flex flex-col",children:[m.jsx(c4,{className:"flex-grow mb-4 pr-4",children:m.jsxs("div",{className:"space-y-4",children:[t.map((c,u)=>m.jsx("div",{className:`flex ${c.role==="user"?"justify-end":"justify-start"}`,children:m.jsx("div",{className:`max-w-[80%] p-3 rounded-lg ${c.role==="user"?"bg-primary text-primary-foreground ml-auto":"bg-muted"}`,children:c.content})},u)),o&&m.jsx("div",{className:"flex justify-start",children:m.jsx("div",{className:"bg-muted p-3 rounded-lg",children:m.jsx(Zd,{className:"h-4 w-4 animate-spin"})})})]})}),m.jsxs("form",{onSubmit:l,className:"flex gap-2",children:[m.jsx(jc,{value:n,onChange:c=>r(c.target.value),placeholder:"שאל את העוזר האישי שלך...",className:"min-h-[60px]"}),m.jsx(ce,{type:"submit",disabled:o||!n.trim(),children:m.jsx(tR,{className:"h-4 w-4"})})]})]})}function vI({day:t,schedule:e,onUpdateSchedule:n,onUpdateDayName:r,onDeleteDay:o}){const[i,s]=v.useState(!1),[a,l]=v.useState(e),[c,u]=v.useState(t),[d,h]=v.useState(!1),p=(S,E)=>{const T=[...a];T[S]={...T[S],time:E},l(T)},f=(S,E)=>{const T=[...a];T[S]={...T[S],activity:E},l(T)},g=()=>{const S={time:"00:00–00:00",activity:"משימה חדשה"},E=[...a,S];l(E),s(!0)},y=S=>{const E=a.filter((T,j)=>j!==S);l(E)},b=()=>{n(a),s(!1)},w=()=>{l(e),s(!1)},x=()=>{r(c),h(!1)},k=()=>{u(t),h(!1)};return m.jsxs(ct,{className:"overflow-hidden transition-all hover:shadow-md",children:[m.jsxs(Vi,{className:"bg-muted/50 flex flex-row items-center justify-between",children:[m.jsx("div",{className:"flex items-center gap-2",children:d?m.jsxs("div",{className:"flex gap-2",children:[m.jsx(to,{value:c,onChange:S=>u(S.target.value),className:"w-32"}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:x,children:m.jsx(db,{className:"h-4 w-4"})}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:k,children:m.jsx(Ia,{className:"h-4 w-4"})})]}):m.jsxs(m.Fragment,{children:[m.jsx(Ui,{className:"text-lg font-bold",children:t}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>h(!0),children:m.jsx(pg,{className:"h-4 w-4"})})]})}),m.jsx("div",{className:"flex gap-2",children:i?m.jsxs(m.Fragment,{children:[m.jsx(ce,{variant:"ghost",size:"sm",onClick:b,children:m.jsx(db,{className:"h-4 w-4"})}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:w,children:m.jsx(Ia,{className:"h-4 w-4"})})]}):m.jsxs(m.Fragment,{children:[m.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>s(!0),children:m.jsx(pg,{className:"h-4 w-4"})}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:o,className:"hover:text-red-500",children:m.jsx(ds,{className:"h-4 w-4"})})]})})]}),m.jsxs(Vo,{className:"pt-4",children:[m.jsx("ul",{className:"space-y-2",children:(i?a:e).map((S,E)=>m.jsx("li",{className:"flex justify-between items-center py-2 border-b last:border-0",children:i?m.jsxs(m.Fragment,{children:[m.jsx(to,{value:S.time,onChange:T=>p(E,T.target.value),className:"w-32 ml-2"}),m.jsx(to,{value:S.activity,onChange:T=>f(E,T.target.value),className:"flex-1 mx-2"}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>y(E),className:"hover:text-red-500",children:m.jsx(ds,{className:"h-4 w-4"})})]}):m.jsxs(m.Fragment,{children:[m.jsx(_c,{variant:"outline",className:"bg-primary/5",children:S.time}),m.jsx("span",{className:"flex-1 text-right mr-4",children:S.activity})]})},E))}),m.jsxs(ce,{variant:"outline",size:"sm",onClick:g,className:"w-full mt-4 border-dashed",children:[m.jsx(uy,{className:"h-4 w-4 mr-2"}),"הוסף משימה חדשה"]})]})]})}function bI({schedule:t,onUpdateDay:e,onUpdateDayName:n,onAddDay:r,onDeleteDay:o}){return m.jsxs("div",{className:"space-y-6",children:[t.map((i,s)=>m.jsx(vI,{day:i.day,schedule:i.schedule,onUpdateSchedule:a=>e(s,a),onUpdateDayName:a=>n(s,a),onDeleteDay:()=>o(s)},s)),m.jsxs(ce,{onClick:r,variant:"outline",className:"w-full py-6 border-dashed hover:border-primary hover:bg-primary/5",children:[m.jsx(uy,{className:"h-4 w-4 mr-2"}),"הוסף יום חדש"]})]})}const wI=t=>t,xI=t=>Array.isArray(t)?t.map(e=>{const n=e;return{time:String(n.time||""),activity:String(n.activity||"")}}):[],Sw=[{day:"יום שני",schedule:[{time:"16:00–16:15",activity:"הכנה מנטלית ופיזית"},{time:"16:15–17:00",activity:"צפייה בפרק מהקורס וסיכומים"},{time:"17:00–17:10",activity:"הפסקת ריענון קצרה"},{time:"17:10–18:00",activity:"תרגול מעשי"},{time:"18:00–18:10",activity:"הפסקה קצרה נוספת"},{time:"18:10–19:00",activity:"חזרה על החומר וכתיבת שאלות פתוחות"}]},{day:"יום שלישי",schedule:[{time:"16:00–16:15",activity:"הכנה מנטלית ופיזית"},{time:"16:15–17:00",activity:"צפייה בפרק מהקורס וסיכומים"},{time:"17:00–17:10",activity:"הפסקת ריענון קצרה"},{time:"17:10–18:00",activity:"תרגול מעשי"},{time:"18:00–18:10",activity:"הפסקה קצרה נוספת"},{time:"18:10–19:00",activity:"חזרה על החומר וכתיבת שאלות פתוחות"}]},{day:"יום רביעי",schedule:[{time:"16:00–16:15",activity:"הכנה מנטלית ופיזית"},{time:"16:15–17:00",activity:"צפייה בפרק מהקורס וסיכומים"},{time:"17:00–17:10",activity:"הפסקת ריענון קצרה"},{time:"17:10–18:00",activity:"תרגול מעשי"},{time:"18:00–18:10",activity:"הפסקה קצרה נוספת"},{time:"18:10–19:00",activity:"חזרה על החומר וכתיבת שאלות פתוחות"}]},{day:"יום חמישי",schedule:[{time:"16:00–16:15",activity:"הכנה מנטלית ופיזית"},{time:"16:15–17:00",activity:"צפייה בפרק מהקורס וסיכומים"},{time:"17:00–17:10",activity:"הפסקת ריענון קצרה"},{time:"17:10–18:00",activity:"תרגול מעשי"},{time:"18:00–18:10",activity:"הפסקה קצרה נוספת"},{time:"18:10–19:00",activity:"חזרה על החומר וכתיבת שאלות פתוחות"}]}],kI=[{week:1,title:"יסודות הקריפטו",topics:["יסודות הקריפטו","מסחר בסיסי","ניתוח טכני ראשוני"]},{week:2,title:"פלטפורמות ואינדיקטורים",topics:["תפעול פלטפורמות","עבודה עם ארנקים","אינדיקטורים","יישום בסיסי בשוק"]},{week:3,title:"אסטרטגיות מתקדמות",topics:["אסטרטגיות מתקדמות","וייקוף","מבנה שוק","המשקפיים של חי טל","תוכנית עבודה וניהול סיכונים"]},{week:4,title:"מסחר מעשי",topics:["נזילות","היצע/ביקוש","מסחר בספוט","כלים מנטליים","סקירות שוק מעשיות"]}],SI=[{title:"בלוק גיבוי",sessions:["שלישי בערב (20:30–21:30): זמן להשלמות",'שישי אחה"צ (14:00–15:00): סשן חירום להשלמת חומר']}],CI=[{title:"כללים חשובים",rules:["שגרת הכנה: סידור המקום והכנה מנטלית בכל תחילת סשן","הפסקות מובנות: כל 50 דקות לימוד, 10 דקות הפסקה","מעקב יומי: רשום במחברת מה למדת ומה דורש העמקה","תגמולים ועונשים: תגמל את עצמך על התמדה, הענש את עצמך בעדינות במקרה של התחמקות ללא סיבה"]}];function EI(){var t;const[e,n]=v.useState(Sw),{toast:r}=Pr(),{session:o}=Ts();v.useEffect(()=>{var d;(d=o==null?void 0:o.user)!=null&&d.id&&i()},[(t=o==null?void 0:o.user)==null?void 0:t.id]);const i=async()=>{var d;try{const{data:h,error:p}=await ue.from("schedules").select("*").eq("user_id",(d=o==null?void 0:o.user)==null?void 0:d.id).order("created_at",{ascending:!0});if(p)throw p;if(h&&h.length>0){const f=h.map(g=>({day:g.day_name,schedule:xI(g.schedule)}));n(f)}else await s(Sw)}catch(h){console.error("Error loading schedule:",h),r({title:"שגיאה בטעינת לוח הזמנים",description:"אנא נסה שוב מאוחר יותר",variant:"destructive"})}},s=async d=>{var h;if((h=o==null?void 0:o.user)!=null&&h.id)try{await ue.from("schedules").delete().eq("user_id",o.user.id);const{error:p}=await ue.from("schedules").insert(d.map(f=>({user_id:o.user.id,day_name:f.day,schedule:wI(f.schedule)})));if(p)throw p}catch(p){throw console.error("Error saving schedule:",p),p}},a=async(d,h)=>{try{const p=[...e];p[d]={...p[d],schedule:h},await s(p),n(p),r({title:"לוח הזמנים עודכן",description:"השינויים נשמרו בהצלחה"})}catch{r({title:"שגיאה בשמירת לוח הזמנים",description:"אנא נסה שוב מאוחר יותר",variant:"destructive"})}},l=async(d,h)=>{try{const p=[...e];p[d]={...p[d],day:h},await s(p),n(p),r({title:"שם היום עודכן",description:"השינויים נשמרו בהצלחה"})}catch{r({title:"שגיאה בשמירת שם היום",description:"אנא נסה שוב מאוחר יותר",variant:"destructive"})}},c=async()=>{try{const d={day:`יום ${e.length+1}`,schedule:[{time:"16:00–16:15",activity:"הכנה מנטלית ופיזית"},{time:"16:15–17:00",activity:"צפייה בפרק מהקורס וסיכומים"}]},h=[...e,d];await s(h),n(h),r({title:"יום חדש נוסף",description:"יום חדש נוסף ללוח הזמנים"})}catch{r({title:"שגיאה בהוספת יום חדש",description:"אנא נסה שוב מאוחר יותר",variant:"destructive"})}},u=async d=>{try{const h=e.filter((p,f)=>f!==d);await s(h),n(h),r({title:"יום הוסר",description:"היום הוסר מלוח הזמנים"})}catch{r({title:"שגיאה במחיקת היום",description:"אנא נסה שוב מאוחר יותר",variant:"destructive"})}};return m.jsxs(ct,{className:"mt-6",children:[m.jsx(Vi,{children:m.jsx(Ui,{children:"לוח זמנים לקורס הקריפטו"})}),m.jsx(Vo,{children:m.jsxs(G3,{defaultValue:"schedule",className:"w-full",children:[m.jsxs(Wy,{className:"grid w-full grid-cols-2",children:[m.jsx(Rc,{value:"schedule",children:"לוח זמנים שבועי"}),m.jsx(Rc,{value:"topics",children:"נושאים שבועיים"})]}),m.jsx(Pc,{value:"schedule",children:m.jsxs("div",{className:"space-y-8",children:[m.jsx(bI,{schedule:e,onUpdateDay:a,onUpdateDayName:l,onAddDay:c,onDeleteDay:u}),m.jsxs("div",{className:"space-y-8",children:[SI.map((d,h)=>m.jsxs(ct,{className:"bg-muted/50",children:[m.jsx(Vi,{children:m.jsx(Ui,{className:"text-lg",children:d.title})}),m.jsx(Vo,{children:m.jsx("ul",{className:"space-y-2",children:d.sessions.map((p,f)=>m.jsxs("li",{className:"flex items-center py-2",children:[m.jsx(_c,{variant:"secondary",className:"mr-2",children:"גיבוי"}),m.jsx("span",{children:p})]},f))})})]},h)),CI.map((d,h)=>m.jsxs(ct,{className:"border-2 border-primary/20",children:[m.jsx(Vi,{children:m.jsx(Ui,{className:"text-lg",children:d.title})}),m.jsx(Vo,{children:m.jsx("ul",{className:"space-y-2 list-disc list-inside",children:d.rules.map((p,f)=>m.jsx("li",{className:"text-muted-foreground",children:p},f))})})]},h))]})]})}),m.jsx(Pc,{value:"topics",children:m.jsx("div",{className:"grid gap-6",children:kI.map(d=>m.jsxs(ct,{className:"overflow-hidden",children:[m.jsx(Vi,{className:"bg-muted",children:m.jsxs(Ui,{className:"text-lg",children:["שבוע ",d.week,": ",d.title]})}),m.jsx(Vo,{className:"pt-4",children:m.jsx("ul",{className:"space-y-2",children:d.topics.map((h,p)=>m.jsxs("li",{className:"flex items-center py-2 border-b last:border-0",children:[m.jsx(_c,{variant:"outline",className:"mr-2",children:p+1}),m.jsx("span",{children:h})]},p))})})]},d.week))})})]})})]})}function Nt(t){this.content=t}Nt.prototype={constructor:Nt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return o==-1?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new Nt(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Nt(n)},addToStart:function(t,e){return new Nt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Nt(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(i==-1?o.length:i,0,e,n),new Nt(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Nt.from(t),t.size?new Nt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Nt.from(t),t.size?new Nt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Nt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Nt.from=function(t){if(t instanceof Nt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Nt(e)};function d4(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),i=e.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){let s=d4(o.content,i.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function h4(t,e,n,r){for(let o=t.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};let s=t.child(--o),a=e.child(--i),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=h4(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class U{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,i){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,o+a,i||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let i="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new U(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let i=0,s=0;s<n;i++){let a=this.content[i],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=l}return new U(r,o)}cutByIndex(e,n){return e==n?U.empty:e==0&&n==this.content.length?this:new U(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new U(o,i)}addToStart(e){return new U([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new U(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return d4(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return h4(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Ju(0,e);if(e==this.size)return Ju(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let i=this.child(r),s=o+i.nodeSize;if(s>=e)return s==e||n>0?Ju(r+1,s):Ju(r,o);o=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return U.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new U(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return U.empty;let n,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new U(n||e,r)}static from(e){if(!e)return U.empty;if(e instanceof U)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new U([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}U.empty=new U([],0);const Ff={index:0,offset:0};function Ju(t,e){return Ff.index=t,Ff.offset=e,Ff}function dh(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!dh(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!dh(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Be=class Pg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&dh(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Pg.none;if(e instanceof Pg)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Be.none=[];class hh extends Error{}class Z{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=f4(this.content,e+this.openStart,n);return r&&new Z(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Z(p4(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Z.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Z(U.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)o++;return new Z(e,r,o)}}Z.empty=new Z(U.empty,0,0);function p4(t,e,n){let{index:r,offset:o}=t.findIndex(e),i=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(o==e||i.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(p4(i.content,e-o-1,n-o-1)))}function f4(t,e,n,r){let{index:o,offset:i}=t.findIndex(e),s=t.maybeChild(o);if(i==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=f4(s.content,e-i-1,n);return a&&t.replaceChild(o,s.copy(a))}function TI(t,e,n){if(n.openStart>t.depth)throw new hh("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new hh("Inconsistent open depths");return m4(t,e,n,0)}function m4(t,e,n,r){let o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let s=m4(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Zi(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=NI(n,t);return Zi(i,y4(t,s,a,e,r))}else return Zi(i,ph(t,e,r))}function g4(t,e){if(!e.type.compatibleContent(t.type))throw new hh("Cannot join "+e.type.name+" onto "+t.type.name)}function Ag(t,e,n){let r=t.node(n);return g4(r,e.node(n)),r}function Xi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ic(t,e,n,r){let o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Xi(t.nodeAfter,r),i++));for(let a=i;a<s;a++)Xi(o.child(a),r);e&&e.depth==n&&e.textOffset&&Xi(e.nodeBefore,r)}function Zi(t,e){return t.type.checkContent(e),t.copy(e)}function y4(t,e,n,r,o){let i=t.depth>o&&Ag(t,e,o+1),s=r.depth>o&&Ag(n,r,o+1),a=[];return ic(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(g4(i,s),Xi(Zi(i,y4(t,e,n,r,o+1)),a)):(i&&Xi(Zi(i,ph(t,e,o+1)),a),ic(e,n,o,a),s&&Xi(Zi(s,ph(n,r,o+1)),a)),ic(r,null,o,a),new U(a)}function ph(t,e,n){let r=[];if(ic(null,t,n,r),t.depth>n){let o=Ag(t,e,n+1);Xi(Zi(o,ph(t,e,n+1)),r)}return ic(e,null,n,r),new U(r)}function NI(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)r=e.node(o).copy(U.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}class Ac{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Be.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new fh(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(i),c=i-l;if(r.push(s,a,o+l),!c||(s=s.child(a),s.isText))break;i=c-1,o+=l+1}return new Ac(n,r,i)}static resolveCached(e,n){let r=Cw.get(e);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==n)return s}else Cw.set(e,r=new MI);let o=r.elts[r.i]=Ac.resolve(e,n);return r.i=(r.i+1)%_I,o}}class MI{constructor(){this.elts=[],this.i=0}}const _I=12,Cw=new WeakMap;class fh{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const OI=Object.create(null);let ti=class Dg{constructor(e,n,r,o=Be.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||U.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&dh(this.attrs,n||e.defaultAttrs||OI)&&Be.sameSet(this.marks,r||Be.none)}copy(e=null){return e==this.content?this:new Dg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Dg(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Z.empty;let o=this.resolve(e),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),l=o.node(s).content.cut(o.pos-a,i.pos-a);return new Z(l,o.depth-s,i.depth-s)}replace(e,n,r){return TI(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return Ac.resolveCached(this,e)}resolveNoCache(e){return Ac.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),v4(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=U.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Be.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Be.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=U.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};ti.prototype.text=void 0;class mh extends ti{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):v4(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new mh(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new mh(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function v4(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ys{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new jI(e,n);if(r.next==null)return ys.empty;let o=b4(r);r.next&&r.err("Unexpected trailing text");let i=zI(LI(o));return $I(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function i(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return U.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let h=i(d,a.concat(u));if(h)return h}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:a,next:l}=i.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}ys.empty=new ys(!0);class jI{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function b4(t){let e=[];do e.push(RI(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function RI(t){let e=[];do e.push(PI(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function PI(t){let e=II(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=AI(t,e);else break;return e}function Ew(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function AI(t,e){let n=Ew(t),r=n;return t.eat(",")&&(t.next!="}"?r=Ew(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function DI(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let i in n){let s=n[i];s.isInGroup(e)&&o.push(s)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function II(t){if(t.eat("(")){let e=b4(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=DI(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function LI(t){let e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function o(s,a){s.forEach(l=>l.to=a)}function i(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=i(s.exprs[l],a);if(l==s.exprs.length-1)return c;o(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),o(i(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return o(i(s.expr,a),l),o(i(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();o(i(s.expr,l),u),l=u}if(s.max==-1)o(i(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),o(i(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function w4(t,e){return e-t}function Tw(t,e){let n=[];return r(e),n.sort(w4);function r(o){let i=t[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(let s=0;s<i.length;s++){let{term:a,to:l}=i[s];!a&&n.indexOf(l)==-1&&r(l)}}}function zI(t){let e=Object.create(null);return n(Tw(t,0));function n(r){let o=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);Tw(t,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new ys(r.indexOf(t.length-1)>-1);for(let s=0;s<o.length;s++){let a=o[s][1].sort(w4);i.next.push({type:o[s][0],next:e[a.join(",")]||n(a)})}return i}}function $I(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],i=!o.validEnd,s=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function x4(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function k4(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let i=t[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function S4(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let i=t[o];i.validate&&i.validate(e[o])}}function C4(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new BI(t,r,e[r]);return n}let Nw=class E4{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=C4(e,r.attrs),this.defaultAttrs=x4(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ys.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:k4(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ti(this,this.computeAttrs(e),U.from(n),Be.setFrom(r))}createChecked(e=null,n,r){return n=U.from(n),this.checkContent(n),new ti(this,this.computeAttrs(e),n,Be.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=U.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(U.empty,!0);return i?new ti(this,e,n.append(i),Be.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){S4(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Be.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,s)=>r[i]=new E4(i,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function FI(t,e,n){let r=n.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class BI{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?FI(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class yp{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=C4(e,o.attrs),this.excluded=null;let i=x4(this.attrs);this.instance=i?new Be(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Be(this,k4(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new yp(i,o++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){S4(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class T4{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=Nt.from(e.nodes),n.marks=Nt.from(e.marks||{}),this.nodes=Nw.compile(this.spec.nodes,this),this.marks=yp.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=ys.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?Mw(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:Mw(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Nw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new mh(r,r.defaultAttrs,e,Be.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return ti.fromJSON(this,e)}markFromJSON(e){return Be.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Mw(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function VI(t){return t.tag!=null}function UI(t){return t.style!=null}class ni{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(VI(o))this.tags.push(o);else if(UI(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=e.nodes[o.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new Ow(this,n,!1);return r.addAll(e,Be.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Ow(this,n,!0);return r.addAll(e,Be.none,n.from,n.to),Z.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(qI(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<i)break}n.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=jw(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=jw(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ni(e,ni.schemaRules(e)))}}const N4={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},HI={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},M4={ol:!0,ul:!0},Dc=1,Ig=2,sc=4;function _w(t,e,n){return e!=null?(e?Dc:0)|(e==="full"?Ig:0):t&&t.whitespace=="pre"?Dc|Ig:n&~sc}class Gu{constructor(e,n,r,o,i,s){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=Be.none,this.match=i||(s&sc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(U.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Dc)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let n=U.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(U.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!N4.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ow{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,i,s=_w(null,n.preserveWhitespace,0)|(r?sc:0);o?i=new Gu(o.type,o.attrs,Be.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new Gu(null,null,Be.none,!0,null,s):i=new Gu(e.schema.topNodeType,null,Be.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,i=o.options&Ig?"full":this.localPreserveWS||(o.options&Dc)>0;if(i==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=o.content[o.content.length-1],a=e.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;M4.hasOwnProperty(s)&&this.parser.normalizeLists&&WI(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:HI.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(N4.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(i,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let i,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,n);this.findAtPoint(e,i)}findPlace(e,n){let r,o;for(let i=this.open;i>=0;i--){let s=this.nodes[i],a=s.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,o=s,!a.length)||s.solid)break}if(!r)return null;this.sync(o);for(let i=0;i<r.length;i++)n=this.enterInner(r[i],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let i=Be.none;for(let s of r.concat(e.marks))(o.type?o.type.allowsMarkType(s.type):Rw(s.type,e.type))&&(i=s.addToSet(i));return o.content.push(e.mark(i)),!0}return!1}enter(e,n,r,o){let i=this.findPlace(e.create(n),r);return i&&(i=this.enterInner(e,n,r,!0,o)),i}enterInner(e,n,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=_w(e,i,s.options);s.options&sc&&s.content.length==0&&(a|=sc);let l=Be.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Rw(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Gu(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Dc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function WI(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&M4.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function qI(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function jw(t){let e={};for(let n in t)e[n]=t[n];return e}function Rw(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let i=[],s=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||i.indexOf(u)<0&&s(u))return!0}};if(s(o.contentMatch))return!0}}class Ms{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Bf(n).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let a=0,l=0;for(;a<i.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)o=i.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(i.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=xd(Bf(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&xd(Bf(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return xd(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ms(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Pw(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Pw(e.marks)}}function Pw(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Bf(t){return t.document||window.document}const Aw=new WeakMap;function KI(t){let e=Aw.get(t);return e===void 0&&Aw.set(t,e=JI(t)),e}function JI(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function xd(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=KI(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:f}=xd(t,h,n,r);if(l.appendChild(p),f){if(a)throw new RangeError("Multiple content holes");a=f}}}return{dom:l,contentDOM:a}}const _4=65535,O4=Math.pow(2,16);function GI(t,e){return t+e*O4}function Dw(t){return t&_4}function YI(t){return(t-(t&_4))/O4}const j4=1,R4=2,kd=4,P4=8;class Lg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&P4)>0}get deletedBefore(){return(this.delInfo&(j4|kd))>0}get deletedAfter(){return(this.delInfo&(R4|kd))>0}get deletedAcross(){return(this.delInfo&kd)>0}}class bn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&bn.empty)return bn.empty}recover(e){let n=0,r=Dw(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+YI(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+i],u=this.ranges[a+s],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,p=l+o+(h<0?0:u);if(r)return p;let f=e==(n<0?l:d)?null:GI(a/3,e-l),g=e==l?R4:e==d?j4:kd;return(n<0?e!=l:e!=d)&&(g|=P4),new Lg(p,g,f)}o+=u-c}return r?e+o:new Lg(e+o,0,null)}touches(e,n){let r=0,o=Dw(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],u=l+c;if(e<=u&&a==o*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),c=this.ranges[o+n],u=this.ranges[o+r];e(a,a+c,l,l+u),i+=u-c}}invert(){return new bn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?bn.empty:new bn(e<0?[0,-e,0]:[0,0,e])}}bn.empty=new bn([]);class Ca{constructor(e=[],n,r=0,o=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=o}slice(e=0,n=this.maps.length){return new Ca(this.maps,this.mirror,e,n)}copy(){return new Ca(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let o=e.getMirror(n);this.appendMap(e.maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e.maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Ca;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this.maps[i],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this.maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new Lg(e,o,null)}}const Vf=Object.create(null);class Vt{getMap(){return bn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Vf[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Vf)throw new RangeError("Duplicate use of step JSON ID "+e);return Vf[e]=n,n.prototype.jsonID=e,n}}class ht{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ht(e,null)}static fail(e){return new ht(null,e)}static fromReplace(e,n,r,o){try{return ht.ok(e.replace(n,r,o))}catch(i){if(i instanceof hh)return ht.fail(i.message);throw i}}}function Yy(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let i=t.child(o);i.content.size&&(i=i.copy(Yy(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return U.fromArray(r)}class Uo extends Vt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Z(Yy(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return ht.fromReplace(e,this.from,this.to,i)}invert(){return new kr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Uo(n.pos,r.pos,this.mark)}merge(e){return e instanceof Uo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Uo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Uo(n.from,n.to,e.markFromJSON(n.mark))}}Vt.jsonID("addMark",Uo);class kr extends Vt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Z(Yy(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return ht.fromReplace(e,this.from,this.to,r)}invert(){return new Uo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new kr(n.pos,r.pos,this.mark)}merge(e){return e instanceof kr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new kr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new kr(n.from,n.to,e.markFromJSON(n.mark))}}Vt.jsonID("removeMark",kr);class Ho extends Vt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ht.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ht.fromReplace(e,this.pos,this.pos+1,new Z(U.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new Ho(this.pos,n.marks[o]);return new Ho(this.pos,this.mark)}}return new Fa(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ho(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ho(n.pos,e.markFromJSON(n.mark))}}Vt.jsonID("addNodeMark",Ho);class Fa extends Vt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ht.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ht.fromReplace(e,this.pos,this.pos+1,new Z(U.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ho(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Fa(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Fa(n.pos,e.markFromJSON(n.mark))}}Vt.jsonID("removeNodeMark",Fa);class xt extends Vt{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&zg(e,this.from,this.to)?ht.fail("Structure replace would overwrite content"):ht.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new bn([this.from,this.to-this.from,this.slice.size])}invert(e){return new xt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new xt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof xt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Z.empty:new Z(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new xt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Z.empty:new Z(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new xt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new xt(n.from,n.to,Z.fromJSON(e,n.slice),!!n.structure)}}Vt.jsonID("replace",xt);class St extends Vt{constructor(e,n,r,o,i,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(e){if(this.structure&&(zg(e,this.from,this.gapFrom)||zg(e,this.gapTo,this.to)))return ht.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ht.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ht.fromReplace(e,this.from,this.to,r):ht.fail("Content does not fit in gap")}getMap(){return new bn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new St(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new St(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new St(n.from,n.to,n.gapFrom,n.gapTo,Z.fromJSON(e,n.slice),n.insert,!!n.structure)}}Vt.jsonID("replaceAround",St);function zg(t,e,n){let r=t.resolve(e),o=n-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function QI(t,e,n,r){let o=[],i=[],s,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),p=Math.min(c+l.nodeSize,n),f=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(f)||(s&&s.to==h&&s.mark.eq(d[g])?s.to=p:o.push(s=new kr(h,p,d[g])));a&&a.to==h?a.to=p:i.push(a=new Uo(h,p,r))}}),o.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function XI(t,e,n,r){let o=[],i=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;i++;let l=null;if(r instanceof yp){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let p=0;p<o.length;p++){let f=o[p];f.step==i-1&&d.eq(o[p].style)&&(h=f)}h?(h.to=c,h.step=i):o.push({style:d,from:Math.max(a,e),to:c,step:i})}}}),o.forEach(s=>t.step(new kr(s.from,s.to,s.style)))}function Qy(t,e,n,r=n.contentMatch,o=!0){let i=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new xt(a,u,Z.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new kr(a,u,c.marks[h]));if(o&&c.isText&&n.whitespace!="pre"){let h,p=/\r?\n|\r/g,f;for(;h=p.exec(c.text);)f||(f=new Z(U.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new xt(a+h.index,a+h.index+h[0].length,f))}}a=u}if(!r.validEnd){let l=r.fillBefore(U.empty,!0);t.replace(a,a,new Z(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function ZI(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function tl(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(n==0||r.type.spec.isolating||!ZI(r,o,i))break}return null}function e7(t,e,n){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),a=o.after(i+1),l=s,c=a,u=U.empty,d=0;for(let f=i,g=!1;f>n;f--)g||r.index(f)>0?(g=!0,u=U.from(r.node(f).copy(u)),d++):l--;let h=U.empty,p=0;for(let f=i,g=!1;f>n;f--)g||o.after(f+1)<o.end(f)?(g=!0,h=U.from(o.node(f).copy(h)),p++):c++;t.step(new St(l,c,s,a,new Z(u.append(h),d,p),u.size-d,!0))}function Xy(t,e,n=null,r=t){let o=t7(t,e),i=o&&n7(r,e);return i?o.map(Iw).concat({type:e,attrs:n}).concat(i.map(Iw)):null}function Iw(t){return{type:t,attrs:null}}function t7(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}function n7(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let l=r;a&&l<o;l++)a=a.matchType(n.child(l).type);return!a||!a.validEnd?null:s}function r7(t,e,n){let r=U.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=U.from(n[s].type.create(n[s].attrs,r))}let o=e.start,i=e.end;t.step(new St(o,i,o,i,new Z(r,0,0),n.length,!0))}function o7(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{let l=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,l)&&i7(t.doc,t.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",f=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!f?c=!1:!p&&f&&(c=!0)}c===!1&&D4(t,s,a,i),Qy(t,t.mapping.slice(i).map(a,1),r,void 0,c===null);let u=t.mapping.slice(i),d=u.map(a,1),h=u.map(a+s.nodeSize,1);return t.step(new St(d,h,d+1,h-1,new Z(U.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&A4(t,s,a,i),!1}})}function A4(t,e,n,r){e.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+i+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function D4(t,e,n,r){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+i);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function i7(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function s7(t,e,n,r,o){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new St(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Z(U.from(s),0,0),1,!0))}function Ea(t,e,n=1,r){let o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){let d=o.node(c),h=o.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(h,d.childCount),f=r&&r[u+1];f&&(p=p.replaceChild(0,f.type.create(f.attrs)));let g=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!g.type.validContent(p))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function a7(t,e,n=1,r){let o=t.doc.resolve(e),i=U.empty,s=U.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){i=U.from(o.node(a).copy(i));let u=r&&r[c];s=U.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}t.step(new xt(e,e,new Z(i.append(s),n,n),!0))}function vi(t,e){let n=t.resolve(e),r=n.index();return I4(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function l7(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function I4(t,e){return!!(t&&e&&!t.isLeaf&&l7(t,e))}function vp(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let i,s,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&I4(i,s)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function c7(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,i=t.doc.resolve(e-n),s=i.node().type;if(o&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(o);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);D4(t,u.node(),u.before(),a)}s.inlineContent&&Qy(t,e+n-1,s,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new xt(c,l.map(e+n,-1),Z.empty,!0)),r===!0){let u=t.doc.resolve(c);A4(t,u.node(),u.before(),t.steps.length)}return t}function u7(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function L4(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(i==1)u=c.canReplace(l,l,o);else{let d=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function bp(t,e,n=e,r=Z.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),i=t.resolve(n);return z4(o,i,r)?new xt(e,n,r):new d7(o,i,r).fit()}function z4(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class d7{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=U.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=U.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let l=new Z(i,s,a);return e>-1?new St(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new xt(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=Uf(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(U.from(s),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Uf(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Z(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Uf(e,n);if(o.childCount<=1&&n>0){let i=e.size-n<=n+o.size;this.unplaced=new Z(Bl(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Z(Bl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let g=0;g<i.length;g++)this.openFrontierNode(i[g]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(o){for(let g=0;g<o.childCount;g++)u.push(o.child(g));d=d.matchFragment(o)}let p=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let g=a.child(c),y=d.matchType(g.type);if(!y)break;c++,(c>1||l==0||g.content.size)&&(d=y,u.push($4(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let f=c==a.childCount;f||(p=-1),this.placed=Vl(this.placed,n,U.from(u)),this.frontier[n].match=d,f&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=a;g<p;g++){let b=y.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),y=b.content}this.unplaced=f?e==0?Z.empty:new Z(Bl(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new Z(Bl(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Hf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=Hf(e,n,o,r,i);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Hf(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Vl(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Vl(this.placed,this.depth,U.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(U.empty,!0);e.childCount&&(this.placed=Vl(this.placed,this.frontier.length,e))}}function Bl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Bl(t.firstChild.content,e-1,n)))}function Vl(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Vl(t.lastChild.content,e-1,n)))}function Uf(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function $4(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,$4(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(U.empty,!0)))),t.copy(r)}function Hf(t,e,n,r,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!h7(n,i.content,s)?a:null}function h7(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function p7(t){return t.spec.defining||t.spec.definingForContent}function f7(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),i=t.doc.resolve(n);if(z4(o,i,r))return t.step(new xt(e,n,r));let s=B4(o,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let h=o.depth,p=o.pos-1;h>0;h--,p--){let f=o.node(h).type.spec;if(f.defining||f.definingAsContext||f.isolating)break;s.indexOf(h)>-1?a=h:o.before(h)==p&&s.splice(1,0,-h)}let l=s.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let f=h.firstChild;if(c.push(f),p==r.openStart)break;h=f.content}for(let h=u-1;h>=0;h--){let p=c[h],f=p7(p.type);if(f&&!p.sameMarkup(o.node(Math.abs(a)-1)))u=h;else if(f||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+u+1)%(r.openStart+1),f=c[p];if(f)for(let g=0;g<s.length;g++){let y=s[(g+l)%s.length],b=!0;y<0&&(b=!1,y=-y);let w=o.node(y-1),x=o.index(y-1);if(w.canReplaceWith(x,x,f.type,f.marks))return t.replace(o.before(y),b?i.after(y):n,new Z(F4(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let h=s.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let p=s[h];p<0||(e=o.before(p),n=i.after(p))}}function F4(t,e,n,r,o){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(F4(i.content,e+1,n,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(t).append(t);t=s.append(i.matchFragment(s).fillBefore(U.empty,!0))}return t}function m7(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=u7(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new Z(U.from(r),0,0))}function g7(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),i=B4(r,o);for(let s=0;s<i.length;s++){let a=i[s],l=s==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function B4(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&n.push(o)}return n}class Ta extends Vt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ht.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return ht.fromReplace(e,this.pos,this.pos+1,new Z(U.from(o),0,n.isLeaf?0:1))}getMap(){return bn.empty}invert(e){return new Ta(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ta(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ta(n.pos,n.attr,n.value)}}Vt.jsonID("attr",Ta);class Ic extends Vt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ht.ok(r)}getMap(){return bn.empty}invert(e){return new Ic(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ic(n.attr,n.value)}}Vt.jsonID("docAttr",Ic);let Ba=class extends Error{};Ba=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Ba.prototype=Object.create(Error.prototype);Ba.prototype.constructor=Ba;Ba.prototype.name="TransformError";class y7{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ca}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Ba(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Z.empty){let o=bp(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new Z(U.from(r),0,0))}delete(e,n){return this.replace(e,n,Z.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return f7(this,e,n,r),this}replaceRangeWith(e,n,r){return m7(this,e,n,r),this}deleteRange(e,n){return g7(this,e,n),this}lift(e,n){return e7(this,e,n),this}join(e,n=1){return c7(this,e,n),this}wrap(e,n){return r7(this,e,n),this}setBlockType(e,n=e,r,o=null){return o7(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return s7(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Ta(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ic(e,n)),this}addNodeMark(e,n){return this.step(new Ho(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Be)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Fa(e,n)),this}split(e,n=1,r){return a7(this,e,n,r),this}addMark(e,n,r){return QI(this,e,n,r),this}removeMark(e,n,r){return XI(this,e,n,r),this}clearIncompatible(e,n,r){return Qy(this,e,n,r),this}}const Wf=Object.create(null);class ke{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new v7(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Z.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),a?Z.empty:n),a==0&&$w(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),$w(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new ye(e):Qs(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=n<0?Qs(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):Qs(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new ir(e.node(0))}static atStart(e){return Qs(e,e,0,0,1)||new ir(e)}static atEnd(e){return Qs(e,e,e.content.size,e.childCount,-1)||new ir(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Wf[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Wf)throw new RangeError("Duplicate use of selection JSON ID "+e);return Wf[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ye.between(this.$anchor,this.$head).getBookmark()}}ke.prototype.visible=!0;class v7{constructor(e,n){this.$from=e,this.$to=n}}let Lw=!1;function zw(t){!Lw&&!t.parent.inlineContent&&(Lw=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ye extends ke{constructor(e,n=e){zw(e),zw(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ke.near(r);let o=e.resolve(n.map(this.anchor));return new ye(o.parent.inlineContent?o:r,r)}replace(e,n=Z.empty){if(super.replace(e,n),n==Z.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ye&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new wp(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ye(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let i=ke.findFrom(n,r,!0)||ke.findFrom(n,-r,!0);if(i)n=i.$head;else return ke.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(ke.findFrom(e,-r,!0)||ke.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new ye(e,n)}}ke.jsonID("text",ye);class wp{constructor(e,n){this.anchor=e,this.head=n}map(e){return new wp(e.map(this.anchor),e.map(this.head))}resolve(e){return ye.between(e.resolve(this.anchor),e.resolve(this.head))}}class he extends ke{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=e.resolve(o);return r?ke.near(i):new he(i)}content(){return new Z(U.from(this.node),0,0)}eq(e){return e instanceof he&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Zy(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new he(e.resolve(n.anchor))}static create(e,n){return new he(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}he.prototype.visible=!1;ke.jsonID("node",he);class Zy{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new wp(r,r):new Zy(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&he.isSelectable(r)?new he(n):ke.near(n)}}class ir extends ke{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Z.empty){if(n==Z.empty){e.delete(0,e.doc.content.size);let r=ke.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new ir(e)}map(e){return new ir(e)}eq(e){return e instanceof ir}getBookmark(){return b7}}ke.jsonID("all",ir);const b7={map(){return this},resolve(t){return new ir(t)}};function Qs(t,e,n,r,o,i=!1){if(e.inlineContent)return ye.create(t,n);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let a=e.child(s);if(a.isAtom){if(!i&&he.isSelectable(a))return he.create(t,n-(o<0?a.nodeSize:0))}else{let l=Qs(t,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}return null}function $w(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof xt||o instanceof St))return;let i=t.mapping.maps[r],s;i.forEach((a,l,c,u)=>{s==null&&(s=u)}),t.setSelection(ke.near(t.doc.resolve(s),n))}const Fw=1,Yu=2,Bw=4;class w7 extends y7{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Fw)&~Yu,this.storedMarks=null,this}get selectionSet(){return(this.updated&Fw)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Yu,this}ensureMarks(e){return Be.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Yu)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Yu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Be.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,i)),this.selection.empty||this.setSelection(ke.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Bw,this}get scrolledIntoView(){return(this.updated&Bw)>0}}function Vw(t,e){return!e||!t?t:t.bind(e)}class Ul{constructor(e,n,r){this.name=e,this.init=Vw(n.init,r),this.apply=Vw(n.apply,r)}}const x7=[new Ul("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ul("selection",{init(t,e){return t.selection||ke.atStart(e.doc)},apply(t){return t.selection}}),new Ul("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ul("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class qf{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=x7.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ul(r.key,r.spec.state,r))})}}class da{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=o?o[s].n:0,c=o?o[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new da(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new w7(this)}static create(e){let n=new qf(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new da(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new qf(this.schema,e.plugins),r=n.fields,o=new da(n);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new qf(e.schema,e.plugins),i=new da(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=ti.fromJSON(e.schema,n.doc);else if(s.name=="selection")i.selection=ke.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[s.name]=c.fromJSON.call(l,e,n[a],i);return}}i[s.name]=s.init(e,i)}}),i}}function V4(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=V4(o,e,{})),n[r]=o}return n}class hn{constructor(e){this.spec=e,this.props={},e.props&&V4(e.props,this,this.props),this.key=e.key?e.key.key:U4("plugin")}getState(e){return e[this.key]}}const Kf=Object.create(null);function U4(t){return t in Kf?t+"$"+ ++Kf[t]:(Kf[t]=0,t+"$")}class Dr{constructor(e="key"){this.key=U4(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Mt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Lc=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let $g=null;const Jr=function(t,e,n){let r=$g||($g=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},k7=function(){$g=null},vs=function(t,e,n,r){return n&&(Uw(t,e,n,r,-1)||Uw(t,e,n,r,1))},S7=/^(img|br|input|textarea|hr)$/i;function Uw(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:An(t))){let i=t.parentNode;if(!i||i.nodeType!=1||iu(t)||S7.test(t.nodeName)||t.contentEditable=="false")return!1;e=Mt(t)+(o<0?0:1),t=i}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?An(t):0}else return!1}}function An(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function C7(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=An(t)}else if(t.parentNode&&!iu(t))e=Mt(t),t=t.parentNode;else return null}}function E7(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!iu(t))e=Mt(t)+1,t=t.parentNode;else return null}}function T7(t,e,n){for(let r=e==0,o=e==An(t);r||o;){if(t==n)return!0;let i=Mt(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,o=o&&i==An(t)}}function iu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const xp=function(t){return t.focusNode&&vs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Li(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function N7(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function M7(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(An(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(An(r.startContainer),r.startOffset)}}}const _r=typeof navigator<"u"?navigator:null,Hw=typeof document<"u"?document:null,bi=_r&&_r.userAgent||"",Fg=/Edge\/(\d+)/.exec(bi),H4=/MSIE \d/.exec(bi),Bg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(bi),dn=!!(H4||Bg||Fg),ri=H4?document.documentMode:Bg?+Bg[1]:Fg?+Fg[1]:0,ar=!dn&&/gecko\/(\d+)/i.test(bi);ar&&+(/Firefox\/(\d+)/.exec(bi)||[0,0])[1];const Vg=!dn&&/Chrome\/(\d+)/.exec(bi),zt=!!Vg,W4=Vg?+Vg[1]:0,Jt=!dn&&!!_r&&/Apple Computer/.test(_r.vendor),Va=Jt&&(/Mobile\/\w+/.test(bi)||!!_r&&_r.maxTouchPoints>2),jn=Va||(_r?/Mac/.test(_r.platform):!1),_7=_r?/Win/.test(_r.platform):!1,Xr=/Android \d/.test(bi),su=!!Hw&&"webkitFontSmoothing"in Hw.documentElement.style,O7=su?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function j7(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Wr(t,e){return typeof t=="number"?t:t[e]}function R7(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Ww(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let s=n||t.dom;s;s=Lc(s)){if(s.nodeType!=1)continue;let a=s,l=a==i.body,c=l?j7(i):R7(a),u=0,d=0;if(e.top<c.top+Wr(r,"top")?d=-(c.top-e.top+Wr(o,"top")):e.bottom>c.bottom-Wr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Wr(o,"top")-c.top:e.bottom-c.bottom+Wr(o,"bottom")),e.left<c.left+Wr(r,"left")?u=-(c.left-e.left+Wr(o,"left")):e.right>c.right-Wr(r,"right")&&(u=e.right-c.right+Wr(o,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let f=a.scrollLeft-h,g=a.scrollTop-p;e={left:e.left-f,top:e.top-g,right:e.right-f,bottom:e.bottom-g}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function P7(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(i,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:q4(t.dom)}}function q4(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Lc(r));return e}function A7({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;K4(n,r==0?0:r-e)}function K4(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:i}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Js=null;function D7(t){if(t.setActive)return t.setActive();if(Js)return t.focus(Js);let e=q4(t);t.focus(Js==null?{get preventScroll(){return Js={preventScroll:!0},!0}}:void 0),Js||(Js=!1,K4(e,0))}function J4(t,e){let n,r=2e8,o,i=0,s=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Jr(u).getClientRects();else continue;for(let p=0;p<h.length;p++){let f=h[p];if(f.top<=s&&f.bottom>=a){s=Math.max(f.bottom,s),a=Math.min(f.top,a);let g=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(g<r){n=u,r=g,o=g&&n.nodeType==3?{left:f.right<e.left?f.right:f.left,top:e.top}:e,u.nodeType==1&&g&&(i=d+(e.left>=(f.left+f.right)/2?1:0));continue}}else f.top>e.top&&!l&&f.left<=e.left&&f.right>=e.left&&(l=u,c={left:Math.max(f.left,Math.min(f.right,e.left)),top:f.top});!n&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(i=d+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?I7(n,o):!n||r&&n.nodeType==1?{node:t,offset:i}:J4(n,o)}function I7(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let i=Mo(r,1);if(i.top!=i.bottom&&ev(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function ev(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function L7(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function z7(t,e,n){let{node:r,offset:o}=J4(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,o,i)}function $7(t,e,n,r){let o=-1;for(let i=e,s=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!s&&l.left>r.left||l.top>r.top?o=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),s=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function G4(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let s=t.childNodes[i];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(ev(e,c))return G4(s,e,c)}}if((i=(i+1)%r)==o)break}return t}function F7(t,e){let n=t.dom.ownerDocument,r,o=0,i=M7(n,e.left,e.top);i&&({node:r,offset:o}=i);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!ev(e,c)||(s=G4(t.dom,e,c),!s))return null}if(Jt)for(let c=s;r&&c;c=Lc(c))c.draggable&&(r=void 0);if(s=L7(s,e),r){if(ar&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}let c;su&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=$7(t,r,o,e))}a==null&&(a=z7(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function qw(t){return t.top<t.bottom||t.left<t.right}function Mo(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(qw(r))return r}return Array.prototype.find.call(n,qw)||t.getBoundingClientRect()}const B7=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Y4(t,e,n){let{node:r,offset:o,atom:i}=t.docView.domFromPos(e,n<0?-1:1),s=su||ar;if(r.nodeType==3)if(s&&(B7.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let a=Mo(Jr(r,o,o),n);if(ar&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let l=Mo(Jr(r,o-1,o-1),-1);if(l.top==a.top){let c=Mo(Jr(r,o,o+1),-1);if(c.top!=a.top)return Al(c,c.left<l.left)}}return a}else{let a=o,l=o,c=n<0?1:-1;return n<0&&!o?(l++,c=-1):n>=0&&o==r.nodeValue.length?(a--,c=1):n<0?a--:l++,Al(Mo(Jr(r,a,l),c),c<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(n<0||o==An(r))){let a=r.childNodes[o-1];if(a.nodeType==1)return Jf(a.getBoundingClientRect(),!1)}if(i==null&&o<An(r)){let a=r.childNodes[o];if(a.nodeType==1)return Jf(a.getBoundingClientRect(),!0)}return Jf(r.getBoundingClientRect(),n>=0)}if(i==null&&o&&(n<0||o==An(r))){let a=r.childNodes[o-1],l=a.nodeType==3?Jr(a,An(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(l)return Al(Mo(l,1),!1)}if(i==null&&o<An(r)){let a=r.childNodes[o];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let l=a?a.nodeType==3?Jr(a,0,s?0:1):a.nodeType==1?a:null:null;if(l)return Al(Mo(l,-1),!0)}return Al(Mo(r.nodeType==3?Jr(r):r,-n),n>=0)}function Al(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Jf(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Q4(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function V7(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return Q4(t,e,()=>{let{node:i}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let s=Y4(t,o.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Jr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const U7=/[\u0590-\u08ac]/;function H7(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=t.domSelection();return a?!U7.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:s:Q4(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:f,focusOffset:g}=t.domSelectionRange(),y=f&&!p.contains(f.nodeType==1?f:f.parentNode)||l==f&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),y}):r.pos==r.start()||r.pos==r.end()}let Kw=null,Jw=null,Gw=!1;function W7(t,e,n){return Kw==e&&Jw==n?Gw:(Kw=e,Jw=n,Gw=n=="up"||n=="down"?V7(t,e,n):H7(t,e,n))}const zn=0,Yw=1,Wi=2,Or=3;class au{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=zn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Mt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!n||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(a>e||s instanceof Z4){o=e-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof X4&&i.side>=0;r--);if(n<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&n&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Mt(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Mt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(o==-1&&e<=c){let u=s+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=s;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=Mt(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=Mt(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let i=Math.min(e,n),s=Math.max(e,n);for(let p=0,f=0;p<this.children.length;p++){let g=this.children[p],y=f+g.size;if(i>f&&s<y)return g.setSelection(e-f-g.border,n-f-g.border,r,o);f=y}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((ar||Jt)&&e==n){let{node:p,offset:f}=a;if(p.nodeType==3){if(d=!!(f&&p.nodeValue[f-1]==`
`),d&&f==p.nodeValue.length)for(let g=p,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:Mt(y)+1});break}let b=g.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let g=p.childNodes[f-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(ar&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(o=!0)}if(!(o||d&&Jt)&&vs(a.node,a.offset,u.anchorNode,u.anchorOffset)&&vs(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let f=a;a=l,l=f}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+i.border,l=s-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?Wi:Yw,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Or:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Wi:Or}r=s}this.dirty=Wi}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Wi:Yw;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class X4 extends au{constructor(e,n,r,o){let i,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==zn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class q7 extends au{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class bs extends au{constructor(e,n,r,o,i){super(e,[],r,o),this.mark=n,this.spec=i}static create(e,n,r,o){let i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return(!s||!s.dom)&&(s=Ms.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new bs(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Or||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Or&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=zn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=zn}}slice(e,n,r){let o=bs.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=Hg(i,n,s,r)),e>0&&(i=Hg(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class oi extends au{constructor(e,n,r,o,i,s,a,l,c){super(e,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,i,s){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Ms.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=nT(u,r,n),c?l=new K7(e,n,r,o,u,d||null,h,c,i,s+1):n.isText?new kp(e,n,r,o,u,h,i):new oi(e,n,r,o,u,d||null,h,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>U.empty)}return e}matchesNode(e,n,r){return this.dirty==zn&&e.eq(this.node)&&gh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,i=e.composing?this.localCompositionInfo(e,n):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new G7(this,s&&s.node,e);X7(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Be.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,o)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(p=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,h,o)||l.addNode(c,u,d,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Wi)&&(s&&this.protectLocalComposition(e,s),eT(this.contentDOM,this.children,e),Va&&Z7(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof ye)||r<n||o>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,a=eL(this.node.content,s,r-n,o-n);return a<0?null:{node:i,pos:a,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new q7(this,i,n,o);e.input.compositionNodes.push(s),this.children=Hg(this.children,r,r+o.length,e,s)}update(e,n,r,o){return this.dirty==Or||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=zn}updateOuterDeco(e){if(gh(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=tT(this.dom,this.nodeDOM,Ug(this.outerDeco,this.node,n),Ug(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Qw(t,e,n,r,o){nT(r,e,t);let i=new oi(void 0,t,e,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class kp extends oi{constructor(e,n,r,o,i,s,a){super(e,n,r,o,i,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==Or||this.dirty!=zn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=zn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=zn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),i=document.createTextNode(o.text);return new kp(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Or)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Z4 extends au{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==zn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class K7 extends oi{constructor(e,n,r,o,i,s,a,l,c,u){super(e,n,r,o,i,s,a,c,u),this.spec=l}update(e,n,r,o){if(this.dirty==Or)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function eT(t,e,n){let r=t.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=Xw(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(s instanceof bs){let l=r?r.previousSibling:t.lastChild;eT(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Xw(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const ac=function(t){t&&(this.nodeName=t)};ac.prototype=Object.create(null);const qi=[new ac];function Ug(t,e,n){if(t.length==0)return qi;let r=n?qi[0]:new ac,o=[r];for(let i=0;i<t.length;i++){let s=t[i].type.attrs;if(s){s.nodeName&&o.push(r=new ac(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&o.length==1&&o.push(r=new ac(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function tT(t,e,n,r){if(n==qi&&r==qi)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(i){let l;a&&a.nodeName==s.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=qi[0]),o=l}J7(o,a||qi[0],s)}return o}function J7(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&t.classList.add(o[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function nT(t,e,n){return tT(t,t,qi,Ug(e,n,t.nodeType!=1))}function gh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Xw(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class G7{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Y7(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=zn,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=bs.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,o,i){let s=this.top.children[o];return s.dirty==Or&&s.dom==s.contentDOM&&(s.dirty=Wi),s.update(e,n,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof oi){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Or&&gh(n,l.outerDeco));if(!h&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,o,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Wi,d.updateChildren(o,s+1),d.dirty=zn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,i,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!gh(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=oi.create(this.top,n,r,o,i,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,i){let s=oi.create(this.top,e,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new X4(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof bs;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof kp)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Jt||zt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new Z4(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Y7(t,e){let n=e,r=n.children.length,o=t.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof bs)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function Q7(t,e){return t.type.side-e.type.side}function X7(t,e,n,r){let o=e.locals(t),i=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(i,u),c),i+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d;for(;s<o.length&&o[s].to==i;){let y=o[s++];y.widget&&(u?(d||(d=[u])).push(y):u=y)}if(u)if(d){d.sort(Q7);for(let y=0;y<d.length;y++)n(d[y],c,!!l)}else n(u,c,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(c<t.childCount)p=c,h=t.child(c++);else break;for(let y=0;y<a.length;y++)a[y].to<=i&&a.splice(y--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let f=i+h.nodeSize;if(h.isText){let y=f;s<o.length&&o[s].from<y&&(y=o[s].from);for(let b=0;b<a.length;b++)a[b].to<y&&(y=a[b].to);y<f&&(l=h.cut(y-i),h=h.cut(0,y-i),f=y,p=-1)}else for(;s<o.length&&o[s].to<f;)s++;let g=h.isInline&&!h.isLeaf?a.filter(y=>!y.inline):a.slice();r(h,g,e.forChild(i,h),p),i=f}}function Z7(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function eL(t,e,n,r){for(let o=0,i=0;o<t.childCount&&i<=r;){let s=t.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<t.childCount;){let c=t.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Hg(t,e,n,r,o){let i=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,u=a+=l.size;c>=n||u<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function tv(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(xp(n)){for(l=s;o&&!o.node;)o=o.parent;let d=o.node;if(o&&d.isAtom&&he.isSelectable(d)&&o.parent&&!(d.isInline&&T7(n.focusNode,n.focusOffset,o.dom))){let h=o.posBefore;c=new he(s==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,h=s;for(let p=0;p<n.rangeCount;p++){let f=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(f.startContainer,f.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(f.endContainer,f.endOffset,-1))}if(d<0)return null;[l,s]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;c=nv(t,u,a,d)}return c}function rT(t){return t.editable?t.hasFocus():iT(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function no(t,e=!1){let n=t.state.selection;if(oT(t,n),!!rT(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&zt){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&vs(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)nL(t);else{let{anchor:r,head:o}=n,i,s;Zw&&!(n instanceof ye)&&(n.$from.parent.inlineContent||(i=ex(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=ex(t,n.to))),t.docView.setSelection(r,o,t,e),Zw&&(i&&tx(i),s&&tx(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&tL(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Zw=Jt||zt&&W4<63;function ex(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Jt&&o&&o.contentEditable=="false")return Gf(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return Gf(o);if(i)return Gf(i)}}function Gf(t){return t.contentEditable="true",Jt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function tx(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function tL(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!rT(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function nL(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Mt(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&dn&&ri<=11&&(r.disabled=!0,r.disabled=!1)}function oT(t,e){if(e instanceof he){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(nx(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else nx(t)}function nx(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function nv(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||ye.between(e,n,r)}function rx(t){return t.editable&&!t.hasFocus()?!1:iT(t)}function iT(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function rL(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return vs(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Wg(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return i&&ke.findFrom(i,e)}function Ro(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ox(t,e,n){let r=t.state.selection;if(r instanceof ye)if(n.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=t.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return Ro(t,new ye(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=Wg(t.state,e);return o&&o instanceof he?Ro(t,o):!1}else if(!(jn&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?he.isSelectable(i)?Ro(t,new he(e<0?t.state.doc.resolve(o.pos-i.nodeSize):o)):su?Ro(t,new ye(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof he&&r.node.isInline)return Ro(t,new ye(e>0?r.$to:r.$from));{let o=Wg(t.state,e);return o?Ro(t,o):!1}}}function yh(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function lc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Gs(t,e){return e<0?oL(t):iL(t)}function oL(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,i,s=!1;for(ar&&n.nodeType==1&&r<yh(n)&&lc(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(lc(a,-1))o=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(sT(n))break;{let a=n.previousSibling;for(;a&&lc(a,-1);)o=n.parentNode,i=Mt(a),a=a.previousSibling;if(a)n=a,r=yh(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?qg(t,n,r):o&&qg(t,o,i)}function iL(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=yh(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(lc(a,1))i=n,s=++r;else break}else{if(sT(n))break;{let a=n.nextSibling;for(;a&&lc(a,1);)i=a.parentNode,s=Mt(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=yh(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}i&&qg(t,i,s)}function sT(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function sL(t,e){for(;t&&e==t.childNodes.length&&!iu(t);)e=Mt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function aL(t,e){for(;t&&!e&&!iu(t);)e=Mt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function qg(t,e,n){if(e.nodeType!=3){let i,s;(s=sL(e,n))?(e=s,n=0):(i=aL(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(xp(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&no(t)},50)}function ix(t,e){let n=t.state.doc.resolve(e);if(!(zt||_7)&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),i=(o.top+o.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),i=(o.top+o.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(o.left-r.left)>1)return o.left>r.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function sx(t,e,n){let r=t.state.selection;if(r instanceof ye&&!r.empty||n.indexOf("s")>-1||jn&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Wg(t.state,e);if(s&&s instanceof he)return Ro(t,s)}if(!o.parent.inlineContent){let s=e<0?o:i,a=r instanceof ir?ke.near(s,e):ke.findFrom(s,e);return a?Ro(t,a):!1}return!1}function ax(t,e){if(!(t.state.selection instanceof ye))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=t.state.tr;return e<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),t.dispatch(s),!0}return!1}function lx(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function lL(t){if(!Jt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;lx(t,r,"true"),setTimeout(()=>lx(t,r,"false"),20)}return!1}function cL(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function uL(t,e){let n=e.keyCode,r=cL(e);if(n==8||jn&&n==72&&r=="c")return ax(t,-1)||Gs(t,-1);if(n==46&&!e.shiftKey||jn&&n==68&&r=="c")return ax(t,1)||Gs(t,1);if(n==13||n==27)return!0;if(n==37||jn&&n==66&&r=="c"){let o=n==37?ix(t,t.state.selection.from)=="ltr"?-1:1:-1;return ox(t,o,r)||Gs(t,o)}else if(n==39||jn&&n==70&&r=="c"){let o=n==39?ix(t,t.state.selection.from)=="ltr"?1:-1:1;return ox(t,o,r)||Gs(t,o)}else{if(n==38||jn&&n==80&&r=="c")return sx(t,-1,r)||Gs(t,-1);if(n==40||jn&&n==78&&r=="c")return lL(t)||sx(t,1,r)||Gs(t,1);if(r==(jn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function aT(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=t.someProp("clipboardSerializer")||Ms.fromSchema(t.state.schema),a=pT(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=hT[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let f=a.createElement(u[p]);for(;l.firstChild;)f.appendChild(l.firstChild);l.appendChild(f),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function lT(t,e,n,r,o){let i=o.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,i||r,t)}),i)return e?new Z(U.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Z.empty;let d=t.someProp("clipboardTextParser",h=>h(e,o,r,t));if(d)a=d;else{let h=o.marks(),{schema:p}=t.state,f=Ms.fromSchema(p);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=s.appendChild(document.createElement("p"));g&&y.appendChild(f.serializeNode(p.text(g,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=fL(n),su&&mL(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=s.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;s=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||ni.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!dL.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=gL(cx(a,+u[1],+u[2]),u[4]);else if(a=Z.maxOpen(hL(a.content,o),!0),a.openStart||a.openEnd){let d=0,h=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=cx(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const dL=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function hL(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.index(n)),o,i=[];if(t.forEach(s=>{if(!i)return;let a=r.findWrapping(s.type),l;if(!a)return i=null;if(l=i.length&&o.length&&uT(a,o,s,i[i.length-1],0))i[i.length-1]=l;else{i.length&&(i[i.length-1]=dT(i[i.length-1],o.length));let c=cT(s,a);i.push(c),r=r.matchType(c.type),o=a}}),i)return U.from(i)}return t}function cT(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,U.from(t));return t}function uT(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let i=uT(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(U.from(cT(n,t,o+1))))}}function dT(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,dT(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(U.empty,!0);return t.copy(n.append(r))}function Kg(t,e,n,r,o,i){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(i=0),o<r-1&&(a=Kg(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(U.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function cx(t,e,n){return e<t.openStart&&(t=new Z(Kg(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Z(Kg(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const hT={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ux=null;function pT(){return ux||(ux=document.implementation.createHTMLDocument("title"))}let Yf=null;function pL(t){let e=window.trustedTypes;return e?(Yf||(Yf=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Yf.createHTML(t)):t}function fL(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=pT().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&hT[r[1].toLowerCase()])&&(t=o.map(i=>"<"+i+">").join("")+t+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=pL(t),o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function mL(t){let e=t.querySelectorAll(zt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function gL(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:i,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=U.from(l.create(r[a+1],o)),i++,s++}return new Z(o,i,s)}const Gt={},Yt={},yL={touchstart:!0,touchmove:!0};class vL{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function bL(t){for(let e in Gt){let n=Gt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{xL(t,r)&&!rv(t,r)&&(t.editable||!(r.type in Yt))&&n(t,r)},yL[e]?{passive:!0}:void 0)}Jt&&t.dom.addEventListener("input",()=>null),Jg(t)}function Wo(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function wL(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Jg(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>rv(t,r))})}function rv(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function xL(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function kL(t,e){!rv(t,e)&&Gt[e.type]&&(t.editable||!(e.type in Yt))&&Gt[e.type](t,e)}Yt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!mT(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Xr&&zt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Va&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,Li(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||uL(t,n)?n.preventDefault():Wo(t,"key")};Yt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Yt.keypress=(t,e)=>{let n=e;if(mT(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||jn&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ye)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",i=>i(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function Sp(t){return{left:t.clientX,top:t.clientY}}function SL(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function ov(t,e,n,r,o){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(t.someProp(e,a=>s>i.depth?a(t,n,i.nodeAfter,i.before(s),o,!0):a(t,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function Na(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function CL(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&he.isSelectable(r)?(Na(t,new he(n)),!0):!1}function EL(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof he&&(r=n.node);let i=t.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(he.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(Na(t,he.create(t.state.doc,o)),!0):!1}function TL(t,e,n,r,o){return ov(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(o?EL(t,n):CL(t,n))}function NL(t,e,n,r){return ov(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function ML(t,e,n,r){return ov(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||_L(t,n,r)}function _L(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Na(t,ye.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)Na(t,ye.create(r,a+1,a+1+s.content.size));else if(he.isSelectable(s))Na(t,he.create(r,a));else continue;return!0}}function iv(t){return vh(t)}const fT=jn?"metaKey":"ctrlKey";Gt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=iv(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&SL(n,t.input.lastClick)&&!n[fT]&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=t.posAtCoords(Sp(n));s&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new OL(t,s,n,!!r)):(i=="doubleClick"?NL:ML)(t,s.pos,s.inside,n)?n.preventDefault():Wo(t,"pointer"))};class OL{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[fT],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);i=u.parent,s=u.depth?u.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof he&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ar&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Wo(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>no(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Sp(e))),this.updateAllowDefault(e),this.allowDefault||!n?Wo(this.view,"pointer"):TL(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Jt&&this.mightDrag&&!this.mightDrag.node.isAtom||zt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Na(this.view,ke.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Wo(this.view,"pointer")}move(e){this.updateAllowDefault(e),Wo(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Gt.touchstart=t=>{t.input.lastTouch=Date.now(),iv(t),Wo(t,"pointer")};Gt.touchmove=t=>{t.input.lastTouch=Date.now(),Wo(t,"pointer")};Gt.contextmenu=t=>iv(t);function mT(t,e){return t.composing?!0:Jt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const jL=Xr?5e3:-1;Yt.compositionstart=Yt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ye&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),vh(t,!0),t.markCursor=null;else if(vh(t,!e.selection.empty),ar&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let a=t.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}t.input.composing=!0}gT(t,jL)};Yt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,gT(t,20))};function gT(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>vh(t),e))}function yT(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=PL());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function RL(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=C7(e.focusNode,e.focusOffset),r=E7(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function PL(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function vh(t,e=!1){if(!(Xr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),yT(t),e||t.docView&&t.docView.dirty){let n=tv(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function AL(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const zc=dn&&ri<15||Va&&O7<604;Gt.copy=Yt.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let i=zc?null:n.clipboardData,s=r.content(),{dom:a,text:l}=aT(t,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):AL(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function DL(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function IL(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?$c(t,r.value,null,o,e):$c(t,r.textContent,r.innerHTML,o,e)},50)}function $c(t,e,n,r,o){let i=lT(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,i||Z.empty)))return!0;if(!i)return!1;let s=DL(i),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function vT(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Yt.paste=(t,e)=>{let n=e;if(t.composing&&!Xr)return;let r=zc?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&$c(t,vT(r),r.getData("text/html"),o,n)?n.preventDefault():IL(t,n)};class bT{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const wT=jn?"altKey":"ctrlKey";Gt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,i=o.empty?null:t.posAtCoords(Sp(n)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof he?o.to-1:o.to))){if(r&&r.mightDrag)s=he.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=he.create(t.state.doc,d.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:c,slice:u}=aT(t,a);(!n.dataTransfer.files.length||!zt||W4>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(zc?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",zc||n.dataTransfer.setData("text/plain",c),t.dragging=new bT(u,!n[wT],s)};Gt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Yt.dragover=Yt.dragenter=(t,e)=>e.preventDefault();Yt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(Sp(n));if(!o)return;let i=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",f=>{s=f(s,t)}):s=lT(t,vT(n.dataTransfer),zc?null:n.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&!n[wT]);if(t.someProp("handleDrop",f=>f(t,n,s||Z.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?L4(t.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let c=t.state.tr;if(a){let{node:f}=r;f?f.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&he.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new he(p));else{let f=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,y,b,w)=>f=w),c.setSelection(nv(t,p,c.doc.resolve(f)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Gt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&no(t)},20))};Gt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Gt.beforeinput=(t,e)=>{if(zt&&Xr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Li(8,"Backspace")))))return;let{$cursor:r}=t.state.selection;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let t in Yt)Gt[t]=Yt[t];function Fc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class bh{constructor(e,n){this.toDOM=e,this.spec=n||es,this.side=this.spec.side||0}map(e,n,r,o){let{pos:i,deleted:s}=e.mapResult(n.from+o,this.side<0?-1:1);return s?null:new In(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof bh&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Fc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ii{constructor(e,n){this.attrs=e,this.spec=n||es}map(e,n,r,o){let i=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new In(i,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ii&&Fc(this.attrs,e.attrs)&&Fc(this.spec,e.spec)}static is(e){return e.type instanceof ii}destroy(){}}class sv{constructor(e,n){this.attrs=e,this.spec=n||es}map(e,n,r,o){let i=e.mapResult(n.from+o,1);if(i.deleted)return null;let s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new In(i.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),i;return o==n.from&&!(i=e.child(r)).isText&&o+i.nodeSize==n.to}eq(e){return this==e||e instanceof sv&&Fc(this.attrs,e.attrs)&&Fc(this.spec,e.spec)}destroy(){}}class In{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new In(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new In(e,e,new bh(n,r))}static inline(e,n,r,o){return new In(e,n,new ii(r,o))}static node(e,n,r,o){return new In(e,n,new sv(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof ii}get widget(){return this.type instanceof bh}}const Xs=[],es={};class gt{constructor(e,n){this.local=e.length?e:Xs,this.children=n.length?n:Xs}static create(e,n){return n.length?wh(n,e,0,es):It}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,o+a,i)}}map(e,n,r){return this==It||e.maps.length==0?this:this.mapInner(e,n,0,0,r||es)}mapInner(e,n,r,o,i){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?LL(this.children,s||[],e,n,r,o,i):s?new gt(s.sort(ts),Xs):It}add(e,n){return n.length?this==It?gt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,i=0;e.forEach((a,l)=>{let c=l+r,u;if(u=kT(n,a,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<l;)i+=3;o[i]==l?o[i+2]=o[i+2].addInner(a,u,c+1):o.splice(i,0,l,l+a.nodeSize,wh(u,a,c+1,es)),i+=3}});let s=xT(i?ST(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new gt(s.length?this.local.concat(s).sort(ts):this.local,o||this.children)}remove(e){return e.length==0||this==It?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+n,l=r[i+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,a+1);c!=It?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let a=0;a<o.length;a++)o[a].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new gt(o,r):It}forChild(e,n){if(this==It)return this;if(n.isLeaf)return gt.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,s=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof ii){let c=Math.max(i,l.from)-i,u=Math.min(s,l.to)-i;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new gt(o.sort(ts),Xs);return r?new zo([a,r]):a}return r||It}eq(e){if(this==e)return!0;if(!(e instanceof gt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return av(this.localsInner(e))}localsInner(e){if(this==It)return Xs;if(e.inlineContent||!this.local.some(ii.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ii||n.push(this.local[r]);return n}forEachSet(e){e(this)}}gt.empty=new gt([],[]);gt.removeOverlap=av;const It=gt.empty;class zo{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,es));return zo.from(r)}forChild(e,n){if(n.isLeaf)return gt.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,n);i!=It&&(i instanceof zo?r=r.concat(i.members):r.push(i))}return zo.from(r)}eq(e){if(!(e instanceof zo)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?av(r?n:n.sort(ts)):Xs}static from(e){switch(e.length){case 0:return It;case 1:return e[0];default:return new zo(e.every(n=>n instanceof gt)?e:e.reduce((n,r)=>n.concat(r instanceof gt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function LL(t,e,n,r,o,i,s){let a=t.slice();for(let c=0,u=i;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,p,f,g)=>{let y=g-f-(p-h);for(let b=0;b<a.length;b+=3){let w=a[b+1];if(w<0||h>w+u-d)continue;let x=a[b]+u-d;p>=x?a[b+1]=h<=x?-2:-1:h>=u&&y&&(a[b]+=y,a[b+1]+=y)}d+=y}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+i),d=u-o;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+i,-1),p=h-o,{index:f,offset:g}=r.content.findIndex(d),y=r.maybeChild(f);if(y&&g==d&&g+y.nodeSize==p){let b=a[c+2].mapInner(n,y,u+1,t[c]+i+1,s);b!=It?(a[c]=d,a[c+1]=p,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=zL(a,t,e,n,o,i,s),u=wh(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let p=u.children[d];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new gt(e.sort(ts),a)}function xT(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new In(o.from+e,o.to+e,o.type))}return n}function zL(t,e,n,r,o,i,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,o,c);d?n.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function kT(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let i=0,s;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function ST(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function wh(t,e,n,r){let o=[],i=!1;e.forEach((a,l)=>{let c=kT(t,a,l+n);if(c){i=!0;let u=wh(c,a,n+l+1,r);u!=It&&o.push(l,l+a.nodeSize,u)}});let s=xT(i?ST(t):t,-n).sort(ts);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new gt(s,o):It}function ts(t,e){return t.from-e.from||t.to-e.to}function av(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),dx(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),dx(e,o,r.copy(i.from,r.to)));break}}}return e}function dx(t,e,n){for(;e<t.length&&ts(n,t[e])>0;)e++;t.splice(e,0,n)}function Qf(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=It&&e.push(r)}),t.cursorWrapper&&e.push(gt.create(t.state.doc,[t.cursorWrapper.deco])),zo.from(e)}const $L={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},FL=dn&&ri<=11;class BL{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class VL{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new BL,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);dn&&ri<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),FL&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,$L)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(rx(this.view)){if(this.suppressingSelectionUpdates)return no(this.view);if(dn&&ri<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&vs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=Lc(i))n.add(i);for(let i=e.anchorNode;i;i=Lc(i))if(n.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&rx(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(i=i<0?d.from:Math.min(d.from,i),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(ar&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let p=h.parentNode;p&&p.nodeName=="LI"&&(!d||WL(e,d)!=p)&&h.remove()}}}let c=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&xp(r)&&(c=tv(e))&&c.eq(ke.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,no(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),UL(e)),this.handleDOMChange(i,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||no(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(dn&&ri<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h)}let s=o&&o.parentNode==e.target?Mt(o)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=i&&i.parentNode==e.target?Mt(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let hx=new WeakMap,px=!1;function UL(t){if(!hx.has(t)&&(hx.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ar,px)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),px=!0}}function fx(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return vs(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function HL(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return fx(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?fx(t,n):null}function WL(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function qL(t,e,n){let{node:r,fromOffset:o,toOffset:i,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],xp(l)||c.push({node:l.focusNode,offset:l.focusOffset})),zt&&t.input.lastKeyCode===8)for(let y=i;y>o;y--){let b=r.childNodes[y-1],w=b.pmViewDesc;if(b.nodeName=="BR"&&!w){i=y;break}if(!w||w.size)break}let d=t.state.doc,h=t.someProp("domParser")||ni.fromSchema(t.state.schema),p=d.resolve(s),f=null,g=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:i,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:KL,context:p});if(c&&c[0].pos!=null){let y=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=y),f={anchor:y+s,head:b+s}}return{doc:g,sel:f,from:s,to:a}}function KL(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Jt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Jt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const JL=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function GL(t,e,n,r,o){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,D=tv(t,R);if(D&&!t.state.selection.eq(D)){if(zt&&Xr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",L=>L(t,Li(13,"Enter"))))return;let H=t.state.tr.setSelection(D);R=="pointer"?H.setMeta("pointer",!0):R=="key"&&H.scrollIntoView(),i&&H.setMeta("composition",i),t.dispatch(H)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=qL(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let f=XL(d.content,c.doc.content,c.from,h,p);if(f&&t.input.domChangeCount++,(Va&&t.input.lastIOSEnter>Date.now()-225||Xr)&&o.some(R=>R.nodeType==1&&!JL.test(R.nodeName))&&(!f||f.endA>=f.endB)&&t.someProp("handleKeyDown",R=>R(t,Li(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!f)if(r&&l instanceof ye&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))f={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let R=mx(t,t.state.doc,c.sel);if(R&&!R.eq(t.state.selection)){let D=t.state.tr.setSelection(R);i&&D.setMeta("composition",i),t.dispatch(D)}}return}t.state.selection.from<t.state.selection.to&&f.start==f.endB&&t.state.selection instanceof ye&&(f.start>t.state.selection.from&&f.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?f.start=t.state.selection.from:f.endA<t.state.selection.to&&f.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(f.endB+=t.state.selection.to-f.endA,f.endA=t.state.selection.to)),dn&&ri<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>c.from&&c.doc.textBetween(f.start-c.from-1,f.start-c.from+1)=="  "&&(f.start--,f.endA--,f.endB--);let g=c.doc.resolveNoCache(f.start-c.from),y=c.doc.resolveNoCache(f.endB-c.from),b=u.resolve(f.start),w=g.sameParent(y)&&g.parent.inlineContent&&b.end()>=f.endA,x;if((Va&&t.input.lastIOSEnter>Date.now()-225&&(!w||o.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!w&&g.pos<c.doc.content.size&&!g.sameParent(y)&&(x=ke.findFrom(c.doc.resolve(g.pos+1),1,!0))&&x.head==y.pos)&&t.someProp("handleKeyDown",R=>R(t,Li(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>f.start&&QL(u,f.start,f.endA,g,y)&&t.someProp("handleKeyDown",R=>R(t,Li(8,"Backspace")))){Xr&&zt&&t.domObserver.suppressSelectionUpdates();return}zt&&f.endB==f.start&&(t.input.lastChromeDelete=Date.now()),Xr&&!w&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==f.endA&&(f.endB-=2,y=c.doc.resolveNoCache(f.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,Li(13,"Enter"))})},20));let k=f.start,S=f.endA,E,T,j;if(w){if(g.pos==y.pos)dn&&ri<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>no(t),20)),E=t.state.tr.delete(k,S),T=u.resolve(f.start).marksAcross(u.resolve(f.endA));else if(f.endA==f.endB&&(j=YL(g.parent.content.cut(g.parentOffset,y.parentOffset),b.parent.content.cut(b.parentOffset,f.endA-b.start()))))E=t.state.tr,j.type=="add"?E.addMark(k,S,j.mark):E.removeMark(k,S,j.mark);else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let R=g.parent.textBetween(g.parentOffset,y.parentOffset);if(t.someProp("handleTextInput",D=>D(t,k,S,R)))return;E=t.state.tr.insertText(R,k,S)}}if(E||(E=t.state.tr.replace(k,S,c.doc.slice(f.start-c.from,f.endB-c.from))),c.sel){let R=mx(t,E.doc,c.sel);R&&!(zt&&t.composing&&R.empty&&(f.start!=f.endB||t.input.lastChromeDelete<Date.now()-100)&&(R.head==k||R.head==E.mapping.map(S)-1)||dn&&R.empty&&R.head==k)&&E.setSelection(R)}T&&E.ensureMarks(T),i&&E.setMeta("composition",i),t.dispatch(E.scrollIntoView())}function mx(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:nv(t,e.resolve(n.anchor),e.resolve(n.head))}function YL(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,i=r,s,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&i.length==1)a=i[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(U.from(c).eq(t))return{mark:a,type:s}}function QL(t,e,n,r,o){if(n-e<=o.pos-r.pos||Xf(r,!0,!1)<o.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=t.resolve(Xf(i,!0,!0));return!s.parent.isTextblock||s.pos>n||Xf(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Xf(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function XL(t,e,n,r,o){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,i-Math.min(s,a));r-=s+l-i}if(s<i&&t.size<e.size){let l=r<=i&&r>=s?i-r:0;i-=l,i&&i<e.size&&gx(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-s),s=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<t.size&&gx(t.textBetween(i-1,i+1))&&(i+=l?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}function gx(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class ZL{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new vL,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(xx),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=bx(this),vx(this),this.nodeViews=wx(this),this.docView=Qw(this.state.doc,yx(this),Qf(this),this.dom,this),this.domObserver=new VL(this,(r,o,i,s)=>GL(this,r,o,i,s)),this.domObserver.start(),bL(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Jg(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(xx),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(yT(this),s=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=wx(this);tz(p,this.nodeViews)&&(this.nodeViews=p,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Jg(this),this.editable=bx(this),vx(this);let l=Qf(this),c=yx(this),u=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(o.selection))&&(s=!0);let h=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&P7(this);if(s){this.domObserver.stop();let p=d&&(dn||zt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&ez(o.selection,e.selection);if(d){let f=zt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=RL(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Qw(e.doc,c,l,this.dom,this)),f&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&rL(this))?no(this,p):(oT(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&A7(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof he){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Ww(this,n.getBoundingClientRect(),e)}else Ww(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new bT(e.slice,e.move,o<0?void 0:he.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(o=n?n(a):a))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let a=i[s].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(dn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&D7(this.dom),no(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return F7(this,e)}coordsAtPos(e,n=1){return Y4(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return W7(this,n||this.state,e)}pasteHTML(e,n){return $c(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return $c(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(wL(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Qf(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,k7())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return kL(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Jt&&this.root.nodeType===11&&N7(this.dom.ownerDocument)==this.dom&&HL(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function yx(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[In.node(0,t.state.doc.content.size,e)]}function vx(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:In.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function bx(t){return!t.someProp("editable",e=>e(t.state)===!1)}function ez(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function wx(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function tz(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function xx(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var di={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},xh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nz=typeof navigator<"u"&&/Mac/.test(navigator.platform),rz=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var _t=0;_t<10;_t++)di[48+_t]=di[96+_t]=String(_t);for(var _t=1;_t<=24;_t++)di[_t+111]="F"+_t;for(var _t=65;_t<=90;_t++)di[_t]=String.fromCharCode(_t+32),xh[_t]=String.fromCharCode(_t);for(var Zf in di)xh.hasOwnProperty(Zf)||(xh[Zf]=di[Zf]);function oz(t){var e=nz&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||rz&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?xh:di)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const iz=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function sz(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))iz?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function az(t){let e=Object.create(null);for(let n in t)e[sz(n)]=t[n];return e}function em(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function lz(t){return new hn({props:{handleKeyDown:CT(t)}})}function CT(t){let e=az(t);return function(n,r){let o=oz(r),i,s=e[em(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[em(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(i=di[r.keyCode])&&i!=o){let a=e[em(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const cz=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function ET(t,e){let{$cursor:n}=t.selection;return!n||n.parentOffset>0?null:n}const uz=(t,e,n)=>{let r=ET(t);if(!r)return!1;let o=lv(r);if(!o){let s=r.blockRange(),a=s&&tl(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let i=o.nodeBefore;if(_T(t,o,e,-1))return!0;if(r.parent.content.size==0&&(Ua(i,"end")||he.isSelectable(i)))for(let s=r.depth;;s--){let a=bp(t.doc,r.before(s),r.after(s),Z.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ua(i,"end")?ke.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):he.create(l.doc,o.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},dz=(t,e,n)=>{let r=ET(t);if(!r)return!1;let o=lv(r);return o?TT(t,o,e):!1},hz=(t,e,n)=>{let r=NT(t);if(!r)return!1;let o=cv(r);return o?TT(t,o,e):!1};function TT(t,e,n){let r=e.nodeBefore,o=r,i=e.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=bp(t.doc,i,l,Z.empty);if(!c||c.from!=i||c instanceof xt&&c.slice.size>=l-i)return!1;if(n){let u=t.tr.step(c);u.setSelection(ye.create(u.doc,i)),n(u.scrollIntoView())}return!0}function Ua(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const pz=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(r.parentOffset>0)return!1;i=lv(r)}let s=i&&i.nodeBefore;return!s||!he.isSelectable(s)?!1:(e&&e(t.tr.setSelection(he.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function lv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function NT(t,e){let{$cursor:n}=t.selection;return!n||n.parentOffset<n.parent.content.size?null:n}const fz=(t,e,n)=>{let r=NT(t);if(!r)return!1;let o=cv(r);if(!o)return!1;let i=o.nodeAfter;if(_T(t,o,e,1))return!0;if(r.parent.content.size==0&&(Ua(i,"start")||he.isSelectable(i))){let s=bp(t.doc,r.before(),r.after(),Z.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(Ua(i,"start")?ke.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):he.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},mz=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(r.parentOffset<r.parent.content.size)return!1;i=cv(r)}let s=i&&i.nodeAfter;return!s||!he.isSelectable(s)?!1:(e&&e(t.tr.setSelection(he.create(t.doc,i.pos)).scrollIntoView()),!0)};function cv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const gz=(t,e)=>{let n=t.selection,r=n instanceof he,o;if(r){if(n.node.isTextblock||!vi(t.doc,n.from))return!1;o=n.from}else if(o=vp(t.doc,n.from,-1),o==null)return!1;if(e){let i=t.tr.join(o);r&&i.setSelection(he.create(i.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},yz=(t,e)=>{let n=t.selection,r;if(n instanceof he){if(n.node.isTextblock||!vi(t.doc,n.to))return!1;r=n.to}else if(r=vp(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},vz=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),i=o&&tl(o);return i==null?!1:(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)},bz=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function MT(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const wz=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=MT(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(ke.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},xz=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof ir||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=MT(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(s,i.createAndFill());a.setSelection(ye.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},kz=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Ea(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),o=r&&tl(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)},Sz=(t,e)=>{let{$from:n,to:r}=t.selection,o,i=n.sharedDepth(r);return i==0?!1:(o=n.before(i),e&&e(t.tr.setSelection(he.create(t.doc,o))),!0)};function Cz(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||vi(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function _T(t,e,n,r){let o=e.nodeBefore,i=e.nodeAfter,s,a,l=o.type.spec.isolating||i.type.spec.isolating;if(!l&&Cz(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&a.matchType(s[0]||i.type).validEnd){if(n){let p=e.pos+i.nodeSize,f=U.empty;for(let b=s.length-1;b>=0;b--)f=U.from(s[b].create(null,f));f=U.from(o.copy(f));let g=t.tr.step(new St(e.pos-1,p,e.pos,p,new Z(f,1,0),s.length,!0)),y=g.doc.resolve(p+2*s.length);y.nodeAfter&&y.nodeAfter.type==o.type&&vi(g.doc,y.pos)&&g.join(y.pos),n(g.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&l?null:ke.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&tl(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&Ua(i,"start",!0)&&Ua(o,"end")){let p=o,f=[];for(;f.push(p),!p.isTextblock;)p=p.lastChild;let g=i,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(n){let b=U.empty;for(let x=f.length-1;x>=0;x--)b=U.from(f[x].copy(b));let w=t.tr.step(new St(e.pos-f.length,e.pos+i.nodeSize,e.pos+y,e.pos+i.nodeSize-y,new Z(b,f.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function OT(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(n&&n(e.tr.setSelection(ye.create(e.doc,t<0?o.start(i):o.end(i)))),!0):!1}}const Ez=OT(-1),Tz=OT(1);function Nz(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&Xy(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function kx(t,e=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(s,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let u=n.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,t)}})}if(!o)return!1;if(r){let i=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Mz(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i);if(!s)return!1;let a=r?n.tr:null;return _z(a,s,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function _z(t,e,n,r=null){let o=!1,i=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);i=new fh(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new fh(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=Xy(i,n,r,e);return a?(t&&Oz(t,e,a,o,n),!0):!1}function Oz(t,e,n,r,o){let i=U.empty;for(let u=n.length-1;u>=0;u--)i=U.from(n[u].type.create(n[u].attrs,i));t.step(new St(e.start-(r?2:0),e.end,e.start,e.end,new Z(i,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==o&&(s=u+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&Ea(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function jz(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?Rz(e,n,t,i):Pz(e,n,i):!0:!1}}function Rz(t,e,n,r){let o=t.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new St(i-1,s,i,s,new Z(U.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new fh(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=tl(r);if(a==null)return!1;o.lift(r,a);let l=o.mapping.map(i,-1)-1;return vi(o.doc,l)&&o.join(l),e(o.scrollIntoView()),!0}function Pz(t,e,n){let r=t.tr,o=n.parent;for(let p=n.end,f=n.endIndex-1,g=n.startIndex;f>g;f--)p-=o.child(f).nodeSize,r.delete(p-1,p+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?U.empty:U.from(o))))return!1;let d=i.pos,h=d+s.nodeSize;return r.step(new St(d-(a?1:0),h+(l?1:0),d+1,h-1,new Z((a?U.empty:U.from(o.copy(U.empty))).append(l?U.empty:U.from(o.copy(U.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Az(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=U.from(c?t.create():null),d=new Z(U.from(t.create(null,U.from(a.type.create(null,u)))),c?3:1,0),h=i.start,p=i.end;n(e.tr.step(new St(h-(c?3:1),p,h,p,d,1,!0)).scrollIntoView())}return!0}}function Cp(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class Ep{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>{const u=l(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],l=!!e,c=e||i.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,p])=>[h,(...f)=>{const g=this.buildProps(c,n),y=p(...f)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,o=!1,i=e||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a={tr:e,editor:o,view:s,state:Cp({state:i,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class Dz{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ae(t,e,n){return t.config[e]===void 0&&t.parent?ae(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?ae(t.parent,e,n):null}):t.config[e]}function Tp(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function jT(t){const e=[],{nodeExtensions:n,markExtensions:r}=Tp(t),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:o},l=ae(s,"addGlobalAttributes",a);l&&l().forEach(c=>{c.types.forEach(u=>{Object.entries(c.attributes).forEach(([d,h])=>{e.push({type:u,name:d,attribute:{...i,...h}})})})})}),o.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=ae(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...i,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:s.name,name:u,attribute:h})})}),e}function Et(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Rt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const s=i?i.split(" "):[],a=r[o]?r[o].split(" "):[],l=s.filter(c=>!a.includes(c));r[o]=[...a,...l].join(" ")}else if(o==="style"){const s=i?i.split(";").map(c=>c.trim()).filter(Boolean):[],a=r[o]?r[o].split(";").map(c=>c.trim()).filter(Boolean):[],l=new Map;a.forEach(c=>{const[u,d]=c.split(":").map(h=>h.trim());l.set(u,d)}),s.forEach(c=>{const[u,d]=c.split(":").map(h=>h.trim());l.set(u,d)}),r[o]=Array.from(l.entries()).map(([c,u])=>`${c}: ${u}`).join("; ")}else r[o]=i}),r},{})}function Gg(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Rt(n,r),{})}function RT(t){return typeof t=="function"}function Te(t,e=void 0,...n){return RT(t)?e?t.bind(e)(...n):t(...n):t}function Iz(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Lz(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Sx(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((i,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):Lz(n.getAttribute(s.name));return a==null?i:{...i,[s.name]:a}},{});return{...r,...o}}}}function Cx(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Iz(n)?!1:n!=null))}function zz(t,e){var n;const r=jT(t),{nodeExtensions:o,markExtensions:i}=Tp(t),s=(n=o.find(c=>ae(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(b=>b.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((b,w)=>{const x=ae(w,"extendNodeSchema",d);return{...b,...x?x(c):{}}},{}),p=Cx({...h,content:Te(ae(c,"content",d)),marks:Te(ae(c,"marks",d)),group:Te(ae(c,"group",d)),inline:Te(ae(c,"inline",d)),atom:Te(ae(c,"atom",d)),selectable:Te(ae(c,"selectable",d)),draggable:Te(ae(c,"draggable",d)),code:Te(ae(c,"code",d)),whitespace:Te(ae(c,"whitespace",d)),linebreakReplacement:Te(ae(c,"linebreakReplacement",d)),defining:Te(ae(c,"defining",d)),isolating:Te(ae(c,"isolating",d)),attrs:Object.fromEntries(u.map(b=>{var w;return[b.name,{default:(w=b==null?void 0:b.attribute)===null||w===void 0?void 0:w.default}]}))}),f=Te(ae(c,"parseHTML",d));f&&(p.parseDOM=f.map(b=>Sx(b,u)));const g=ae(c,"renderHTML",d);g&&(p.toDOM=b=>g({node:b,HTMLAttributes:Gg(b,u)}));const y=ae(c,"renderText",d);return y&&(p.toText=y),[c.name,p]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((y,b)=>{const w=ae(b,"extendMarkSchema",d);return{...y,...w?w(c):{}}},{}),p=Cx({...h,inclusive:Te(ae(c,"inclusive",d)),excludes:Te(ae(c,"excludes",d)),group:Te(ae(c,"group",d)),spanning:Te(ae(c,"spanning",d)),code:Te(ae(c,"code",d)),attrs:Object.fromEntries(u.map(y=>{var b;return[y.name,{default:(b=y==null?void 0:y.attribute)===null||b===void 0?void 0:b.default}]}))}),f=Te(ae(c,"parseHTML",d));f&&(p.parseDOM=f.map(y=>Sx(y,u)));const g=ae(c,"renderHTML",d);return g&&(p.toDOM=y=>g({mark:y,HTMLAttributes:Gg(y,u)})),[c.name,p]}));return new T4({topNode:s,nodes:a,marks:l})}function tm(t,e){return e.nodes[t]||e.marks[t]||null}function Ex(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function uv(t,e){const n=Ms.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}const $z=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,i,s,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:i,parent:s,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-i))}),n};function dv(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Np{constructor(e){this.find=e.find,this.handler=e.handler}}const Fz=(t,e)=>{if(dv(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Qu(t){var e;const{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=$z(c)+i;return s.forEach(h=>{if(u)return;const p=Fz(d,h.find);if(!p)return;const f=l.state.tr,g=Cp({state:l.state,transaction:f}),y={from:r-(p[0].length-i.length),to:o},{commands:b,chain:w,can:x}=new Ep({editor:n,state:g});h.handler({state:g,range:y,match:p,commands:b,chain:w,can:x})===null||!f.steps.length||(f.setMeta(a,{transform:f,from:r,to:o,text:i}),l.dispatch(f),u=!0)}),u}function Bz(t){const{editor:e,rules:n}=t,r=new hn({state:{init(){return null},apply(o,i,s){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=uv(U.from(c),s.schema);const{from:u}=l,d=u+c.length;Qu({editor:e,from:u,to:d,text:c,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,a){return Qu({editor:e,from:i,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&Qu({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?Qu({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Vz(t){return Object.prototype.toString.call(t).slice(8,-1)}function Xu(t){return Vz(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Mp(t,e){const n={...t};return Xu(t)&&Xu(e)&&Object.keys(e).forEach(r=>{Xu(e[r])&&Xu(t[r])?n[r]=Mp(t[r],e[r]):n[r]=e[r]}),n}class lo{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Te(ae(this,"addOptions",{name:this.name}))),this.storage=Te(ae(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new lo(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Mp(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new lo(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Te(ae(n,"addOptions",{name:n.name})),n.storage=Te(ae(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const i=o.marks();if(!i.find(a=>(a==null?void 0:a.type.name)===n.name))return!1;const s=i.find(a=>(a==null?void 0:a.type.name)===n.name);return s&&r.removeStoredMark(s),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function Uz(t){return typeof t=="number"}class Hz{constructor(e){this.find=e.find,this.handler=e.handler}}const Wz=(t,e,n)=>{if(dv(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=t,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function qz(t){const{editor:e,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Ep({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,o,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const f=Math.max(r,p),g=Math.min(o,p+h.content.size),y=h.textBetween(f-p,g-p,void 0,"￼");Wz(y,i.find,s).forEach(b=>{if(b.index===void 0)return;const w=f+b.index+1,x=w+b[0].length,k={from:n.tr.mapping.map(w),to:n.tr.mapping.map(x)},S=i.handler({state:n,range:k,match:b,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});d.push(S)})}),d.every(h=>h!==null)}const Kz=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function Jz(t){const{editor:e,rules:n}=t;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:c,from:u,to:d,rule:h,pasteEvt:p})=>{const f=c.tr,g=Cp({state:c,transaction:f});if(!(!qz({editor:e,state:g,from:Math.max(u-1,0),to:d.b-1,rule:h,pasteEvent:p,dropEvent:a})||!f.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,f}};return n.map(c=>new hn({view(u){const d=h=>{var p;r=!((p=u.dom.parentElement)===null||p===void 0)&&p.contains(h.target)?u.dom.parentElement:null};return window.addEventListener("dragstart",d),{destroy(){window.removeEventListener("dragstart",d)}}},props:{handleDOMEvents:{drop:(u,d)=>(i=r===u.dom.parentElement,a=d,!1),paste:(u,d)=>{var h;const p=(h=d.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=d,o=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(u,d,h)=>{const p=u[0],f=p.getMeta("uiEvent")==="paste"&&!o,g=p.getMeta("uiEvent")==="drop"&&!i,y=p.getMeta("applyPasteRules"),b=!!y;if(!f&&!g&&!b)return;if(b){let{text:k}=y;typeof k=="string"?k=k:k=uv(U.from(k),h.schema);const{from:S}=y,E=S+k.length,T=Kz(k);return l({rule:c,state:h,from:S,to:{b:E},pasteEvt:T})}const w=d.doc.content.findDiffStart(h.doc.content),x=d.doc.content.findDiffEnd(h.doc.content);if(!(!Uz(w)||!x||w===x.b))return l({rule:c,state:h,from:w,to:x,pasteEvt:s})}}))}function Gz(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class ha{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=ha.resolve(e),this.schema=zz(this.extensions,n),this.setupExtensions()}static resolve(e){const n=ha.sort(ha.flatten(e)),r=Gz(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=ae(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((n,r)=>{const o=ae(n,"priority")||100,i=ae(r,"priority")||100;return o>i?-1:o<i?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:tm(n.name,this.schema)},o=ae(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=ha.sort([...this.extensions].reverse()),r=[],o=[],i=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:tm(s.name,this.schema)},l=[],c=ae(s,"addKeyboardShortcuts",a);let u={};if(s.type==="mark"&&ae(s,"exitable",a)&&(u.ArrowRight=()=>lo.handleExit({editor:e,mark:s})),c){const g=Object.fromEntries(Object.entries(c()).map(([y,b])=>[y,()=>b({editor:e})]));u={...u,...g}}const d=lz(u);l.push(d);const h=ae(s,"addInputRules",a);Ex(s,e.options.enableInputRules)&&h&&r.push(...h());const p=ae(s,"addPasteRules",a);Ex(s,e.options.enablePasteRules)&&p&&o.push(...p());const f=ae(s,"addProseMirrorPlugins",a);if(f){const g=f();l.push(...g)}return l}).flat();return[Bz({editor:e,rules:r}),...Jz({editor:e,rules:o}),...i]}get attributes(){return jT(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Tp(this.extensions);return Object.fromEntries(n.filter(r=>!!ae(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:Et(r.name,this.schema)},s=ae(r,"addNodeView",i);if(!s)return[];const a=(l,c,u,d,h)=>{const p=Gg(l,o);return s()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:p})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:tm(e.name,this.schema)};e.type==="mark"&&(!((n=Te(ae(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=ae(e,"onBeforeCreate",r),i=ae(e,"onCreate",r),s=ae(e,"onUpdate",r),a=ae(e,"onSelectionUpdate",r),l=ae(e,"onTransaction",r),c=ae(e,"onFocus",r),u=ae(e,"onBlur",r),d=ae(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Ft{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Te(ae(this,"addOptions",{name:this.name}))),this.storage=Te(ae(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ft(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Mp(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ft({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Te(ae(n,"addOptions",{name:n.name})),n.storage=Te(ae(n,"addStorage",{name:n.name,options:n.options})),n}}function PT(t,e,n){const{from:r,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=i);const p=s==null?void 0:s[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c))}),a}function AT(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const Yz=Ft.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new hn({key:new Dr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(c=>c.$from.pos)),a=Math.max(...i.map(c=>c.$to.pos)),l=AT(n);return PT(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Qz=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Xz=(t=!1)=>({commands:e})=>e.setContent("",t),Zz=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:i,$to:s})=>{t.doc.nodesBetween(i.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),p=d.blockRange(h);if(!p)return;const f=tl(p);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,g)}(f||f===0)&&e.lift(p,f)})}),!0},e$=t=>e=>t(e),t$=()=>({state:t,dispatch:e})=>xz(t,e),n$=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,i=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new ye(r.doc.resolve(s-1))),!0},r$=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(e){const s=o.before(i),a=o.after(i);t.delete(s,a).scrollIntoView()}return!0}return!1},o$=t=>({tr:e,state:n,dispatch:r})=>{const o=Et(t,n.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const a=i.before(s),l=i.after(s);e.delete(a,l).scrollIntoView()}return!0}return!1},i$=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},s$=()=>({state:t,dispatch:e})=>cz(t,e),a$=()=>({commands:t})=>t.keyboardShortcut("Enter"),l$=()=>({state:t,dispatch:e})=>wz(t,e);function kh(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:dv(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function DT(t,e,n={}){return t.find(r=>r.type===e&&kh(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function Tx(t,e,n={}){return!!DT(t,e,n)}function hv(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(c=>c.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(c=>c.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!DT([...o.node.marks],e,n)))return;let i=o.index,s=t.start()+o.offset,a=i+1,l=s+o.node.nodeSize;for(;i>0&&Tx([...t.parent.child(i-1).marks],e,n);)i-=1,s-=t.parent.child(i).nodeSize;for(;a<t.parent.childCount&&Tx([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function wi(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const c$=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const i=wi(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const d=hv(l,i,e);if(d&&d.from<=c&&d.to>=u){const h=ye.create(s,d.from,d.to);n.setSelection(h)}}return!0},u$=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function IT(t){return t instanceof ye}function Ki(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function LT(t,e=null){if(!e)return null;const n=ke.atStart(t),r=ke.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,i=r.to;return e==="all"?ye.create(t,Ki(0,o,i),Ki(t.content.size,o,i)):ye.create(t,Ki(e,o,i),Ki(e,o,i))}function pv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const d$=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{pv()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!IT(n.state.selection))return s(),!0;const a=LT(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},h$=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),p$=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),zT=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&zT(r)}return t};function Zu(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return zT(n)}function Sh(t,e,n){if(t instanceof ti||t instanceof U)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return U.fromArray(t.map(s=>e.nodeFromJSON(s)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Sh("",e,n)}if(o){if(n.errorOnInvalidContent){let s=!1,a="";const l=new T4({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?ni.fromSchema(l).parseSlice(Zu(t),n.parseOptions):ni.fromSchema(l).parse(Zu(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=ni.fromSchema(e);return n.slice?i.parseSlice(Zu(t),n.parseOptions).content:i.parse(Zu(t),n.parseOptions)}return Sh("",e,n)}function f$(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof xt||o instanceof St))return;const i=t.mapping.maps[r];let s=0;i.forEach((a,l,c,u)=>{s===0&&(s=u)}),t.setSelection(ke.near(t.doc.resolve(s),n))}const m$=t=>!("type"in t),g$=(t,e,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=Sh(e,i.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(p){return i.emit("contentError",{editor:i,error:p,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((m$(a)?a:[a]).forEach(p=>{p.check(),u=u?p.isText&&p.marks.length===0:!1,d=d?p.isBlock:!1}),l===c&&d){const{parent:p}=r.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,c+=1)}let h;if(u){if(Array.isArray(e))h=e.map(p=>p.text||"").join("");else if(e instanceof U){let p="";e.forEach(f=>{f.text&&(p+=f.text)}),h=p}else typeof e=="object"&&e&&e.text?h=e.text:h=e;r.insertText(h,l,c)}else h=a,r.replaceWith(l,c,h);n.updateSelection&&f$(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:h}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:h})}return!0},y$=()=>({state:t,dispatch:e})=>gz(t,e),v$=()=>({state:t,dispatch:e})=>yz(t,e),b$=()=>({state:t,dispatch:e})=>uz(t,e),w$=()=>({state:t,dispatch:e})=>fz(t,e),x$=()=>({state:t,dispatch:e,tr:n})=>{try{const r=vp(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},k$=()=>({state:t,dispatch:e,tr:n})=>{try{const r=vp(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},S$=()=>({state:t,dispatch:e})=>dz(t,e),C$=()=>({state:t,dispatch:e})=>hz(t,e);function $T(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function E$(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))pv()||$T()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const T$=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const i=E$(t).split(/-(?!$)/),s=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function Bc(t,e,n={}){const{from:r,to:o,empty:i}=t.selection,s=e?Et(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(u,d)=>{if(u.isText)return;const h=Math.max(r,d),p=Math.min(o,d+u.nodeSize);a.push({node:u,from:h,to:p})});const l=o-r,c=a.filter(u=>s?s.name===u.node.type.name:!0).filter(u=>kh(u.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((u,d)=>u+d.to-d.from,0)>=l}const N$=(t,e={})=>({state:n,dispatch:r})=>{const o=Et(t,n.schema);return Bc(n,o,e)?vz(n,r):!1},M$=()=>({state:t,dispatch:e})=>kz(t,e),_$=t=>({state:e,dispatch:n})=>{const r=Et(t,e.schema);return jz(r)(e,n)},O$=()=>({state:t,dispatch:e})=>bz(t,e);function _p(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Nx(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const j$=(t,e)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=_p(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=Et(t,r.schema)),a==="mark"&&(s=wi(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{i&&i===c.type&&n.setNodeMarkup(u,void 0,Nx(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(Nx(d.attrs,e)))})})}),!0):!1},R$=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),P$=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),A$=()=>({state:t,dispatch:e})=>pz(t,e),D$=()=>({state:t,dispatch:e})=>mz(t,e),I$=()=>({state:t,dispatch:e})=>Sz(t,e),L$=()=>({state:t,dispatch:e})=>Tz(t,e),z$=()=>({state:t,dispatch:e})=>Ez(t,e);function Yg(t,e,n={},r={}){return Sh(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const $$=(t,e=!1,n={},r={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{var l,c;const{doc:u}=i;if(n.preserveWhitespace!=="full"){const d=Yg(t,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return s&&i.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function FT(t,e){const n=wi(e,t.schema),{from:r,to:o,empty:i}=t.selection,s=[];i?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function F$(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function B$(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function fv(t){return e=>B$(e.$from,t)}function V$(t,e){const n={from:0,to:t.content.size};return PT(t,n,e)}function U$(t,e){const n=Et(e,t.schema),{from:r,to:o}=t.selection,i=[];t.doc.nodesBetween(r,o,a=>{i.push(a)});const s=i.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function H$(t,e){const n=_p(typeof e=="string"?e:e.name,t.schema);return n==="node"?U$(t,e):n==="mark"?FT(t,e):{}}function BT(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const i=n.resolve(t),s=hv(i,o.type);s&&r.push({mark:o,...s})}):n.nodesBetween(t,e,(o,i)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function Sd(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(i=>i.type===e&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function Qg(t,e,n={}){const{empty:r,ranges:o}=t.selection,i=e?wi(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>i?i.name===u.type.name:!0).find(u=>kh(u.attrs,n,{strict:!1}));let s=0;const a=[];if(o.forEach(({$from:u,$to:d})=>{const h=u.pos,p=d.pos;t.doc.nodesBetween(h,p,(f,g)=>{if(!f.isText&&!f.marks.length)return;const y=Math.max(h,g),b=Math.min(p,g+f.nodeSize),w=b-y;s+=w,a.push(...f.marks.map(x=>({mark:x,from:y,to:b})))})}),s===0)return!1;const l=a.filter(u=>i?i.name===u.mark.type.name:!0).filter(u=>kh(u.mark.attrs,n,{strict:!1})).reduce((u,d)=>u+d.to-d.from,0),c=a.filter(u=>i?u.mark.type!==i&&u.mark.type.excludes(i):!0).reduce((u,d)=>u+d.to-d.from,0);return(l>0?l+c:l)>=s}function W$(t,e,n={}){if(!e)return Bc(t,null,n)||Qg(t,null,n);const r=_p(e,t.schema);return r==="node"?Bc(t,e,n):r==="mark"?Qg(t,e,n):!1}function Mx(t,e){const{nodeExtensions:n}=Tp(e),r=n.find(s=>s.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=Te(ae(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function mv(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(i=>{o!==!1&&(mv(i,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function q$(t){return t instanceof he}function K$(t,e,n){var r;const{selection:o}=e;let i=null;if(IT(o)&&(i=o.$cursor),i){const a=(r=t.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=o;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const p=!h||h.type.allowsMarkType(n),f=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=p&&f}return!c}),c})}const J$=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,l=wi(t,r.schema);if(o)if(s){const c=FT(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,p)=>{const f=Math.max(p,u),g=Math.min(p+h.nodeSize,d);h.marks.find(y=>y.type===l)?h.marks.forEach(y=>{l===y.type&&n.addMark(f,g,l.create({...y.attrs,...e}))}):n.addMark(f,g,l.create(e))})});return K$(r,n,l)},G$=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),Y$=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const i=Et(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:a})=>kx(i,{...s,...e})(n)?!0:a.clearNodes()).command(({state:a})=>kx(i,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Q$=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=Ki(t,0,r.content.size),i=he.create(r,o);e.setSelection(i)}return!0},X$=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:i}=typeof t=="number"?{from:t,to:t}:t,s=ye.atStart(r).from,a=ye.atEnd(r).to,l=Ki(o,s,a),c=Ki(i,s,a),u=ye.create(r,l,c);e.setSelection(u)}return!0},Z$=t=>({state:e,dispatch:n})=>{const r=Et(t,e.schema);return Az(r)(e,n)};function _x(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const eF=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:a,$to:l}=i,c=o.extensionManager.attributes,u=Sd(c,a.node().type.name,a.node().attrs);if(i instanceof he&&i.node.isBlock)return!a.parentOffset||!Ea(s,a.pos)?!1:(r&&(t&&_x(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:F$(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&h?[{type:h,attrs:u}]:void 0,f=Ea(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!f&&Ea(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(f=!0,p=h?[{type:h,attrs:u}]:void 0),r){if(f&&(i instanceof ye&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),y=e.doc.resolve(g);a.node(-1).canReplaceWith(y.index(),y.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&_x(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return f},tF=(t,e={})=>({tr:n,state:r,dispatch:o,editor:i})=>{var s;const a=Et(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let b=U.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let j=l.depth-w;j>=l.depth-3;j-=1)b=U.from(l.node(j).copy(b));const x=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k={...Sd(h,l.node().type.name,l.node().attrs),...e},S=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(k))||void 0;b=b.append(U.from(a.createAndFill(null,S)||void 0));const E=l.before(l.depth-(w-1));n.replace(E,l.after(-x),new Z(b,4-w,0));let T=-1;n.doc.nodesBetween(E,n.doc.content.size,(j,R)=>{if(T>-1)return!1;j.isTextblock&&j.content.size===0&&(T=R+1)}),T>-1&&n.setSelection(ye.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,f={...Sd(h,d.type.name,d.attrs),...e},g={...Sd(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const y=p?[{type:a,attrs:f},{type:p,attrs:g}]:[{type:a,attrs:f}];if(!Ea(n.doc,l.pos,2))return!1;if(o){const{selection:b,storedMarks:w}=r,{splittableMarks:x}=i.extensionManager,k=w||b.$to.parentOffset&&b.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!k||!o)return!0;const S=k.filter(E=>x.includes(E.type.name));n.ensureMarks(S)}return!0},nm=(t,e)=>{const n=fv(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&vi(t.doc,n.pos)&&t.join(n.pos),!0},rm=(t,e)=>{const n=fv(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&vi(t.doc,r)&&t.join(r),!0},nF=(t,e,n,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=o.extensionManager,p=Et(t,s.schema),f=Et(e,s.schema),{selection:g,storedMarks:y}=s,{$from:b,$to:w}=g,x=b.blockRange(w),k=y||g.$to.parentOffset&&g.$from.marks();if(!x)return!1;const S=fv(E=>Mx(E.type.name,d))(g);if(x.depth>=1&&S&&x.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(f);if(Mx(S.node.type.name,d)&&p.validContent(S.node.content)&&a)return l().command(()=>(i.setNodeMarkup(S.pos,p),!0)).command(()=>nm(i,p)).command(()=>rm(i,p)).run()}return!n||!k||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>nm(i,p)).command(()=>rm(i,p)).run():l().command(()=>{const E=u().wrapInList(p,r),T=k.filter(j=>h.includes(j.type.name));return i.ensureMarks(T),E?!0:c.clearNodes()}).wrapInList(p,r).command(()=>nm(i,p)).command(()=>rm(i,p)).run()},rF=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=wi(t,r.schema);return Qg(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},oF=(t,e,n={})=>({state:r,commands:o})=>{const i=Et(t,r.schema),s=Et(e,r.schema),a=Bc(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(s,l):o.setNode(i,{...l,...n})},iF=(t,e={})=>({state:n,commands:r})=>{const o=Et(t,n.schema);return Bc(n,o,e)?r.lift(o):r.wrapIn(o,e)},sF=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){const s=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else s.delete(i.from,i.to)}return!0}}return!1},aF=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},lF=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=wi(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!o)return!0;if(u&&s){let{from:h,to:p}=a;const f=(i=c.marks().find(y=>y.type===l))===null||i===void 0?void 0:i.attrs,g=hv(c,l,f);g&&(h=g.from,p=g.to),n.removeMark(h,p,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},cF=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=_p(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=Et(t,r.schema)),a==="mark"&&(s=wi(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,p,f;n.selection.empty?r.doc.nodesBetween(c,u,(g,y)=>{i&&i===g.type&&(p=Math.max(y,c),f=Math.min(y+g.nodeSize,u),d=y,h=g)}):r.doc.nodesBetween(c,u,(g,y)=>{y<c&&i&&i===g.type&&(p=Math.max(y,c),f=Math.min(y+g.nodeSize,u),d=y,h=g),y>=c&&y<=u&&(i&&i===g.type&&n.setNodeMarkup(y,void 0,{...g.attrs,...e}),s&&g.marks.length&&g.marks.forEach(b=>{if(s===b.type){const w=Math.max(y,c),x=Math.min(y+g.nodeSize,u);n.addMark(w,x,s.create({...b.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(g=>{s===g.type&&n.addMark(p,f,s.create({...g.attrs,...e}))}))}),!0):!1},uF=(t,e={})=>({state:n,dispatch:r})=>{const o=Et(t,n.schema);return Nz(o,e)(n,r)},dF=(t,e={})=>({state:n,dispatch:r})=>{const o=Et(t,n.schema);return Mz(o,e)(n,r)};var hF=Object.freeze({__proto__:null,blur:Qz,clearContent:Xz,clearNodes:Zz,command:e$,createParagraphNear:t$,cut:n$,deleteCurrentNode:r$,deleteNode:o$,deleteRange:i$,deleteSelection:s$,enter:a$,exitCode:l$,extendMarkRange:c$,first:u$,focus:d$,forEach:h$,insertContent:p$,insertContentAt:g$,joinBackward:b$,joinDown:v$,joinForward:w$,joinItemBackward:x$,joinItemForward:k$,joinTextblockBackward:S$,joinTextblockForward:C$,joinUp:y$,keyboardShortcut:T$,lift:N$,liftEmptyBlock:M$,liftListItem:_$,newlineInCode:O$,resetAttributes:j$,scrollIntoView:R$,selectAll:P$,selectNodeBackward:A$,selectNodeForward:D$,selectParentNode:I$,selectTextblockEnd:L$,selectTextblockStart:z$,setContent:$$,setMark:J$,setMeta:G$,setNode:Y$,setNodeSelection:Q$,setTextSelection:X$,sinkListItem:Z$,splitBlock:eF,splitListItem:tF,toggleList:nF,toggleMark:rF,toggleNode:oF,toggleWrap:iF,undoInputRule:sF,unsetAllMarks:aF,unsetMark:lF,updateAttributes:cF,wrapIn:uF,wrapInList:dF});const pF=Ft.create({name:"commands",addCommands(){return{...hF}}}),fF=Ft.create({name:"drop",addProseMirrorPlugins(){return[new hn({key:new Dr("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),mF=Ft.create({name:"editable",addProseMirrorPlugins(){return[new hn({key:new Dr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),gF=Ft.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new hn({key:new Dr("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),yF=Ft.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:s})=>{const{selection:a,doc:l}=s,{empty:c,$anchor:u}=a,{pos:d,parent:h}=u,p=u.parent.isTextblock&&d>0?s.doc.resolve(d-1):u,f=p.parent.type.spec.isolating,g=u.pos-u.parentOffset,y=f&&p.parent.childCount===1?g===u.pos:ke.atStart(l).from===d;return!c||!h.type.isTextblock||h.textContent.length||!y||y&&u.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},o={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return pv()||$T()?o:r},addProseMirrorPlugins(){return[new hn({key:new Dr("clearDocument"),appendTransaction:(t,e,n)=>{const r=t.some(p=>p.docChanged)&&!e.doc.eq(n.doc),o=t.some(p=>p.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:a}=e.selection,l=ke.atStart(e.doc).from,c=ke.atEnd(e.doc).to;if(i||!(s===l&&a===c)||!mv(n.doc))return;const u=n.tr,d=Cp({state:n,transaction:u}),{commands:h}=new Ep({editor:this.editor,state:d});if(h.clearNodes(),!!u.steps.length)return u}})]}}),vF=Ft.create({name:"paste",addProseMirrorPlugins(){return[new hn({key:new Dr("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),bF=Ft.create({name:"tabindex",addProseMirrorPlugins(){return[new hn({key:new Dr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class zi{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new zi(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new zi(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new zi(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,s=this.pos+r+(i?0:1),a=this.resolvedPos.doc.resolve(s);if(!o&&a.depth<=this.depth)return;const l=new zi(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new zi(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const i=o.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a];if(i[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(n);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&i.every(a=>n[a]===s.node.attrs[a])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const wF=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function xF(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}let kF=class extends Dz{constructor(t={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:n,moved:r})=>this.options.onDrop(e,n,r)),this.on("paste",({event:e,slice:n})=>this.options.onPaste(e,n)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=xF(wF,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const n=RT(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(o=>{const i=typeof o=="string"?`${o}$`:o.key;n=e.filter(s=>!s.key.startsWith(i))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[mF,Yz.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)===null||t===void 0?void 0:t.clipboardTextSerializer)===null||e===void 0?void 0:e.blockSeparator}),pF,gF,yF,bF,fF,vF].filter(r=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[r.name]!==!1:!0):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new ha(n,this)}createCommandManager(){this.commandManager=new Ep({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var t;let e;try{e=Yg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(s=>s.name!=="collaboration"),this.createExtensionManager()}}),e=Yg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=LT(e,this.options.autofocus);this.view=new ZL(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)===null||t===void 0?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:da.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(i=>{var s;return(s=this.capturedTransaction)===null||s===void 0?void 0:s.step(i)});return}const e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const r=t.getMeta("focus"),o=t.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:t}),o&&this.emit("blur",{editor:this,event:o.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return H$(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return W$(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return uv(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return V$(this.state.doc,{blockSeparator:e,textSerializers:{...AT(this.schema),...n}})}get isEmpty(){return mv(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const t=this.view.dom;t&&t.editor&&delete t.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}$node(t,e){var n;return((n=this.$doc)===null||n===void 0?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)===null||n===void 0?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new zi(e,this)}get $doc(){return this.$pos(0)}};function Ha(t){return new Np({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Te(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length;if(BT(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(p=>p===t.type&&p!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+l,c);const d=n.from+l+s.length;i.addMark(n.from+l,d,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}function VT(t){return new Np({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Te(t.getAttributes,void 0,r)||{},{tr:i}=e,s=n.from;let a=n.to;const l=t.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,s+r[0].length-1),i.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?s:s-1;i.insert(c,t.type.create(o)).delete(i.mapping.map(s),i.mapping.map(a))}i.scrollIntoView()}})}function Xg(t){return new Np({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),i=Te(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)}})}function Vc(t){return new Np({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const i=Te(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),l=a&&Xy(a,t.type,i);if(!l)return null;if(s.wrap(a,l),t.keepMarks&&t.editor){const{selection:u,storedMarks:d}=e,{splittableMarks:h}=t.editor.extensionManager,p=d||u.$to.parentOffset&&u.$from.marks();if(p){const f=p.filter(g=>h.includes(g.type.name));s.ensureMarks(f)}}if(t.keepAttributes){const u=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(u,i).run()}const c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&vi(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&s.join(n.from-1)}})}let Hn=class Zg{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Te(ae(this,"addOptions",{name:this.name}))),this.storage=Te(ae(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Zg(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Mp(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Zg(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Te(ae(n,"addOptions",{name:n.name})),n.storage=Te(ae(n,"addStorage",{name:n.name,options:n.options})),n}};function Wa(t){return new Hz({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const i=Te(t.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(BT(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(f=>f===t.type&&f!==p.mark.type)).filter(p=>p.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+a.length,s.addMark(n.from+u,c,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function SF(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var UT={exports:{}},om={};/**
* @license React
* use-sync-external-store-shim.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Ox;function CF(){if(Ox)return om;Ox=1;var t=C;function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,i=t.useLayoutEffect,s=t.useDebugValue;function a(d,h){var p=h(),f=r({inst:{value:p,getSnapshot:h}}),g=f[0].inst,y=f[1];return i(function(){g.value=p,g.getSnapshot=h,l(g)&&y({inst:g})},[d,p,h]),o(function(){return l(g)&&y({inst:g}),d(function(){l(g)&&y({inst:g})})},[d]),s(p),p}function l(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!n(d,p)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return om.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,om}UT.exports=CF();var gv=UT.exports;const EF=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},TF=({contentComponent:t})=>{const e=gv.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return C.createElement(C.Fragment,null,Object.values(e))};function NF(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:ny.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class MF extends C.Component{constructor(e){var n;super(e),this.editorContentRef=C.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=NF(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return C.createElement(C.Fragment,null,C.createElement("div",{ref:EF(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&C.createElement(TF,{contentComponent:e.contentComponent}))}}const _F=v.forwardRef((t,e)=>{const n=C.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return C.createElement(MF,{key:n,innerRef:e,...t})}),OF=C.memo(_F);var jF=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;for(o of e.entries())if(!t(o[1],n.get(o[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(e[o]!==n[o])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;o--!==0;){var s=i[o];if(!(s==="_owner"&&e.$$typeof)&&!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n},RF=SF(jF),HT={exports:{}},im={};/**
* @license React
* use-sync-external-store-shim/with-selector.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var jx;function PF(){if(jx)return im;jx=1;var t=C,e=gv;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,i=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return im.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var f=i(null);if(f.current===null){var g={hasValue:!1,value:null};f.current=g}else g=f.current;f=a(function(){function b(E){if(!w){if(w=!0,x=E,E=h(E),p!==void 0&&g.hasValue){var T=g.value;if(p(T,E))return k=T}return k=E}if(T=k,r(x,E))return T;var j=h(E);return p!==void 0&&p(T,j)?T:(x=E,k=j)}var w=!1,x,k,S=d===void 0?null:d;return[function(){return b(u())},S===null?void 0:function(){return b(S())}]},[u,d,h,p]);var y=o(c,f[0],f[1]);return s(function(){g.hasValue=!0,g.value=y},[y]),l(y),y},im}HT.exports=PF();var AF=HT.exports;const DF=typeof window<"u"?v.useLayoutEffect:v.useEffect;class IF{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function LF(t){var e;const[n]=v.useState(()=>new IF(t.editor)),r=AF.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:RF);return DF(()=>n.watch(t.editor),[t.editor,n]),v.useDebugValue(r),r}const zF=!1,e0=typeof window>"u",$F=e0||!!(typeof window<"u"&&window.next);class FF{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return e0||$F?null:this.createEditor();if(this.options.current.immediatelyRender&&e0&&zF)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var r,o;return(o=(r=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(r,...n)},onBlur:(...n)=>{var r,o;return(o=(r=this.options.current).onBlur)===null||o===void 0?void 0:o.call(r,...n)},onCreate:(...n)=>{var r,o;return(o=(r=this.options.current).onCreate)===null||o===void 0?void 0:o.call(r,...n)},onDestroy:(...n)=>{var r,o;return(o=(r=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(r,...n)},onFocus:(...n)=>{var r,o;return(o=(r=this.options.current).onFocus)===null||o===void 0?void 0:o.call(r,...n)},onSelectionUpdate:(...n)=>{var r,o;return(o=(r=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(r,...n)},onTransaction:(...n)=>{var r,o;return(o=(r=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(r,...n)},onUpdate:(...n)=>{var r,o;return(o=(r=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(r,...n)},onContentError:(...n)=>{var r,o;return(o=(r=this.options.current).onContentError)===null||o===void 0?void 0:o.call(r,...n)},onDrop:(...n)=>{var r,o;return(o=(r=this.options.current).onDrop)===null||o===void 0?void 0:o.call(r,...n)},onPaste:(...n)=>{var r,o;return(o=(r=this.options.current).onPaste)===null||o===void 0?void 0:o.call(r,...n)}};return new kF(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,r)=>n===e[r]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function BF(t={},e=[]){const n=v.useRef(t);n.current=t;const[r]=v.useState(()=>new FF(n)),o=gv.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return v.useDebugValue(o),v.useEffect(r.onRender(e)),LF({editor:o,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&i===0?0:i+1}),o}const VF=v.createContext({editor:null});VF.Consumer;const UF=v.createContext({onDragStart:void 0}),HF=()=>v.useContext(UF);C.forwardRef((t,e)=>{const{onDragStart:n}=HF(),r=t.as||"div";return C.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const WF=/^\s*>\s$/,qF=Hn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Vc({find:WF,type:this.type})]}}),KF=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,JF=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,GF=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,YF=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,QF=lo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ha({find:KF,type:this.type}),Ha({find:GF,type:this.type})]},addPasteRules(){return[Wa({find:JF,type:this.type}),Wa({find:YF,type:this.type})]}}),XF="listItem",Rx="textStyle",Px=/^\s*([-+*])\s$/,ZF=Hn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(XF,this.editor.getAttributes(Rx)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Vc({find:Px,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Vc({find:Px,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Rx),editor:this.editor})),[t]}}),eB=new RegExp("(?<!`)`([^`]+)`(?!`)"),tB=new RegExp("(?<!`)`([^`]+)`(?!`)","g"),nB=lo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ha({find:eB,type:this.type})]},addPasteRules(){return[Wa({find:tB,type:this.type})]}}),rB=/^```([a-z]+)?[\s\n]$/,oB=/^~~~([a-z]+)?[\s\n]$/,iB=Hn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;return[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0]||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Rt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!i||!s?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:i}=n;if(!i||o.parent.type!==this.type||o.parentOffset!==o.parent.nodeSize-2)return!1;const s=o.after();return s===void 0?!1:r.nodeAt(s)?t.commands.command(({tr:a})=>(a.setSelection(ke.near(r.resolve(s))),!0)):t.commands.exitCode()}}},addInputRules(){return[Xg({find:rB,type:this.type,getAttributes:t=>({language:t[1]})}),Xg({find:oB,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new hn({key:new Dr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=o==null?void 0:o.mode;if(!n||!i)return!1;const{tr:s,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:i},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(ye.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),sB=Hn.create({name:"doc",topNode:!0,content:"block+"});function aB(t={}){return new hn({view(e){return new lB(e,t)}})}class lB{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let i,s;if(!o||o==document.body&&getComputedStyle(o).position=="static")i=-pageXOffset,s=-pageYOffset;else{let a=o.getBoundingClientRect();i=a.left-o.scrollLeft,s=a.top-o.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=L4(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const cB=Ft.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[aB(this.options)]}});class rt extends ke{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return rt.valid(r)?new rt(r):ke.near(r)}content(){return Z.empty}eq(e){return e instanceof rt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new rt(e.resolve(n.pos))}getBookmark(){return new yv(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!uB(e)||!dB(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&rt.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=n;let l=e.doc.resolve(o);if(rt.valid(l))return l}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!he.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let a=e.doc.resolve(o);if(rt.valid(a))return a}return null}}}rt.prototype.visible=!1;rt.findFrom=rt.findGapCursorFrom;ke.jsonID("gapcursor",rt);class yv{constructor(e){this.pos=e}map(e){return new yv(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return rt.valid(n)?new rt(n):ke.near(n)}}function uB(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function dB(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function hB(){return new hn({props:{decorations:gB,createSelectionBetween(t,e,n){return e.pos==n.pos&&rt.valid(n)?new rt(n):null},handleClick:fB,handleKeyDown:pB,handleDOMEvents:{beforeinput:mB}}})}const pB=CT({ArrowLeft:ed("horiz",-1),ArrowRight:ed("horiz",1),ArrowUp:ed("vert",-1),ArrowDown:ed("vert",1)});function ed(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof ye){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=rt.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new rt(c))),!0):!1}}function fB(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!rt.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&he.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new rt(r))),!0)}function mB(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof rt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=U.empty;for(let s=r.length-1;s>=0;s--)o=U.from(r[s].createAndFill(null,o));let i=t.state.tr.replace(n.pos,n.pos,new Z(o,0,0));return i.setSelection(ye.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function gB(t){if(!(t.selection instanceof rt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",gt.create(t.doc,[In.widget(t.selection.head,e,{key:"gapcursor"})])}const yB=Ft.create({name:"gapCursor",addProseMirrorPlugins(){return[hB()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Te(ae(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),vB=Hn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Rt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:i}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=i||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&s){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),bB=Hn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Rt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Xg({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Ch=200,Ct=function(){};Ct.prototype.append=function(t){return t.length?(t=Ct.from(t),!this.length&&t||t.length<Ch&&this.leafAppend(t)||this.length<Ch&&t.leafPrepend(this)||this.appendInner(t)):this};Ct.prototype.prepend=function(t){return t.length?Ct.from(t).append(this):this};Ct.prototype.appendInner=function(t){return new wB(this,t)};Ct.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?Ct.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};Ct.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ct.prototype.forEach=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)};Ct.prototype.map=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length);var r=[];return this.forEach(function(o,i){return r.push(t(o,i))},e,n),r};Ct.from=function(t){return t instanceof Ct?t:t&&t.length?new WT(t):Ct.empty};var WT=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new e(this.values.slice(r,o))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,o,i,s){for(var a=o;a<i;a++)if(r(this.values[a],s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){for(var a=o-1;a>=i;a--)if(r(this.values[a],s+a)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=Ch)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=Ch)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Ct);Ct.empty=new WT([]);var wB=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,r,o,i){var s=this.left.length;if(r<s&&this.left.forEachInner(n,r,Math.min(o,s),i)===!1||o>s&&this.right.forEachInner(n,Math.max(r-s,0),Math.min(this.length,o)-s,i+s)===!1)return!1},e.prototype.forEachInvertedInner=function(n,r,o,i){var s=this.left.length;if(r>s&&this.right.forEachInvertedInner(n,r-s,Math.max(o,s)-s,i+s)===!1||o<s&&this.left.forEachInvertedInner(n,Math.min(r,s),o,i)===!1)return!1},e.prototype.sliceInner=function(n,r){if(n==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(n,r):n>=o?this.right.slice(n-o,r-o):this.left.slice(n,o).append(this.right.slice(0,r-o))},e.prototype.leafAppend=function(n){var r=this.right.leafAppend(n);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(n){var r=this.left.leafPrepend(n);if(r)return new e(r,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Ct);const xB=500;class nr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){o||(o=this.remapping(r,h+1),i=o.maps.length),i--,u.push(d);return}if(o){u.push(new gr(d.map));let p=d.step.map(o.slice(i)),f;p&&s.maybeStep(p).doc&&(f=s.mapping.maps[s.mapping.maps.length-1],c.push(new gr(f,void 0,void 0,c.length+u.length))),i--,f&&o.appendMap(f,i)}else s.maybeStep(d.step);if(d.selection)return a=o?d.selection.map(o.slice(i)):d.selection,l=new nr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,o){let i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new gr(e.mapping.maps[u],d,n),p;(p=l&&l.merge(h))&&(h=p,u?i.pop():a=a.slice(0,a.length-1)),i.push(h),n&&(s++,n=void 0),o||(l=h)}let c=s-r.depth;return c>SB&&(a=kB(a,c),s-=c),new nr(a.append(i),s)}remapping(e,n){let r=new Ca;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new nr(this.items.append(e.map(n=>new gr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},o);let l=n;this.items.forEach(h=>{let p=i.getMirror(--l);if(p==null)return;s=Math.min(s,p);let f=i.maps[p];if(h.step){let g=e.steps[p].invert(e.docs[p]),y=h.selection&&h.selection.map(i.slice(l+1,p));y&&a++,r.push(new gr(f,g,y))}else r.push(new gr(f))},o);let c=[];for(let h=n;h<s;h++)c.push(new gr(i.maps[h]));let u=this.items.slice(0,o).append(c).append(r),d=new nr(u,a);return d.emptyItemCount()>xB&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=e)o.push(s),s.selection&&i++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&i++;let d=new gr(c.invert(),l,u),h,p=o.length-1;(h=o.length&&o[p].merge(d))?o[p]=h:o.push(d)}}else s.map&&r--},this.items.length,0),new nr(Ct.from(o.reverse()),i)}}nr.empty=new nr(Ct.empty,0);function kB(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}class gr{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new gr(n.getMap().invert(),n,this.selection)}}}class Po{constructor(e,n,r,o,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const SB=20;function CB(t,e,n,r){let o=n.getMeta(ns),i;if(o)return o.historyState;n.getMeta(NB)&&(t=new Po(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(ns))return s.getMeta(ns).redo?new Po(t.done.addTransform(n,void 0,r,Cd(e)),t.undone,Ax(n.mapping.maps),t.prevTime,t.prevComposition):new Po(t.done,t.undone.addTransform(n,void 0,r,Cd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!EB(n,t.prevRanges)),c=s?sm(t.prevRanges,n.mapping):Ax(n.mapping.maps);return new Po(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Cd(e)),nr.empty,c,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new Po(t.done.rebased(n,i),t.undone.rebased(n,i),sm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Po(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),sm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function EB(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(n=!0)}),n}function Ax(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,i,s)=>e.push(i,s));return e}function sm(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function TB(t,e,n){let r=Cd(e),o=ns.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),l=new Po(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(ns,{redo:n,historyState:l})}let am=!1,Dx=null;function Cd(t){let e=t.plugins;if(Dx!=e){am=!1,Dx=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){am=!0;break}}return am}const ns=new Dr("history"),NB=new Dr("closeHistory");function MB(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new hn({key:ns,state:{init(){return new Po(nr.empty,nr.empty,null,0,-1)},apply(e,n,r){return CB(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?KT:r=="historyRedo"?JT:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function qT(t,e){return(n,r)=>{let o=ns.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let i=TB(o,n,t);i&&r(i.scrollIntoView())}return!0}}const KT=qT(!1),JT=qT(!0),_B=Ft.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>KT(t,e),redo:()=>({state:t,dispatch:e})=>JT(t,e)}},addProseMirrorPlugins(){return[MB(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),OB=Hn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Rt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:o}=n,i=t();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):q$(n)?i.insertContentAt(o.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:a})=>{var l;if(a){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(ye.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(he.create(s.doc,c.pos)):s.setSelection(ye.create(s.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(s.insert(u,d),s.setSelection(ye.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[VT({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),jB=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,RB=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,PB=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,AB=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,DB=lo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ha({find:jB,type:this.type}),Ha({find:PB,type:this.type})]},addPasteRules(){return[Wa({find:RB,type:this.type}),Wa({find:AB,type:this.type})]}}),IB=Hn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Rt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),LB="listItem",Ix="textStyle",Lx=/^(\d+)\.\s$/,zB=Hn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Rt(this.options.HTMLAttributes,n),0]:["ol",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(LB,this.editor.getAttributes(Ix)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Vc({find:Lx,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Vc({find:Lx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Ix)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),$B=Hn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),FB=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,BB=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,VB=lo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ha({find:FB,type:this.type})]},addPasteRules(){return[Wa({find:BB,type:this.type})]}}),UB=Hn.create({name:"text",group:"inline"}),HB=Ft.create({name:"starterKit",addExtensions(){var t,e,n,r,o,i,s,a,l,c,u,d,h,p,f,g,y,b;const w=[];return this.options.bold!==!1&&w.push(QF.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&w.push(qF.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&w.push(ZF.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&w.push(nB.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&w.push(iB.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&w.push(sB.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&w.push(cB.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&w.push(yB.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&w.push(vB.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&w.push(bB.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&w.push(_B.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&w.push(OB.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&w.push(DB.configure((h=this.options)===null||h===void 0?void 0:h.italic)),this.options.listItem!==!1&&w.push(IB.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&w.push(zB.configure((f=this.options)===null||f===void 0?void 0:f.orderedList)),this.options.paragraph!==!1&&w.push($B.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&w.push(VB.configure((y=this.options)===null||y===void 0?void 0:y.strike)),this.options.text!==!1&&w.push(UB.configure((b=this.options)===null||b===void 0?void 0:b.text)),w}}),WB=Ft.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign||this.options.defaultAlignment;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${t.textAlign}`}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),qB=lo.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),KB=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,JB=Hn.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Rt(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[VT({find:KB,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),GB=["top","right","bottom","left"],hi=Math.min,vn=Math.max,Eh=Math.round,td=Math.floor,Er=t=>({x:t,y:t}),YB={left:"right",right:"left",bottom:"top",top:"bottom"},QB={start:"end",end:"start"};function t0(t,e,n){return vn(t,hi(e,n))}function co(t,e){return typeof t=="function"?t(e):t}function uo(t){return t.split("-")[0]}function nl(t){return t.split("-")[1]}function vv(t){return t==="x"?"y":"x"}function bv(t){return t==="y"?"height":"width"}function pi(t){return["top","bottom"].includes(uo(t))?"y":"x"}function wv(t){return vv(pi(t))}function XB(t,e,n){n===void 0&&(n=!1);const r=nl(t),o=wv(t),i=bv(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=Th(s)),[s,Th(s)]}function ZB(t){const e=Th(t);return[n0(t),e,n0(e)]}function n0(t){return t.replace(/start|end/g,e=>QB[e])}function eV(t,e,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:r:e?r:o;case"left":case"right":return e?i:s;default:return[]}}function tV(t,e,n,r){const o=nl(t);let i=eV(uo(t),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),e&&(i=i.concat(i.map(n0)))),i}function Th(t){return t.replace(/left|right|bottom|top/g,e=>YB[e])}function nV(t){return{top:0,right:0,bottom:0,left:0,...t}}function GT(t){return typeof t!="number"?nV(t):{top:t,right:t,bottom:t,left:t}}function Nh(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function zx(t,e,n){let{reference:r,floating:o}=t;const i=pi(e),s=wv(e),a=bv(s),l=uo(e),c=i==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,h=r[a]/2-o[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(nl(e)){case"start":p[s]-=h*(n&&c?-1:1);break;case"end":p[s]+=h*(n&&c?-1:1);break}return p}const rV=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:o}),{x:u,y:d}=zx(c,r,l),h=r,p={},f=0;for(let g=0;g<a.length;g++){const{name:y,fn:b}=a[g],{x:w,y:x,data:k,reset:S}=await b({x:u,y:d,initialPlacement:r,placement:h,strategy:o,middlewareData:p,rects:c,platform:s,elements:{reference:t,floating:e}});u=w??u,d=x??d,p={...p,[y]:{...p[y],...k}},S&&f<=50&&(f++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(c=S.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:o}):S.rects),{x:u,y:d}=zx(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:o,middlewareData:p}};async function Uc(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=co(e,t),f=GT(p),g=a[h?d==="floating"?"reference":"floating":d],y=Nh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),b=d==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},k=Nh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:l}):b);return{top:(y.top-k.top+f.top)/x.y,bottom:(k.bottom-y.bottom+f.bottom)/x.y,left:(y.left-k.left+f.left)/x.x,right:(k.right-y.right+f.right)/x.x}}const oV=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:i,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=co(t,e)||{};if(c==null)return{};const d=GT(u),h={x:n,y:r},p=wv(o),f=bv(p),g=await s.getDimensions(c),y=p==="y",b=y?"top":"left",w=y?"bottom":"right",x=y?"clientHeight":"clientWidth",k=i.reference[f]+i.reference[p]-h[p]-i.floating[f],S=h[p]-i.reference[p],E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let T=E?E[x]:0;(!T||!await(s.isElement==null?void 0:s.isElement(E)))&&(T=a.floating[x]||i.floating[f]);const j=k/2-S/2,R=T/2-g[f]/2-1,D=hi(d[b],R),H=hi(d[w],R),L=D,G=T-g[f]-H,F=T/2-g[f]/2+j,Q=t0(L,F,G),Y=!l.arrow&&nl(o)!=null&&F!==Q&&i.reference[f]/2-(F<L?D:H)-g[f]/2<0,se=Y?F<L?F-L:F-G:0;return{[p]:h[p]+se,data:{[p]:Q,centerOffset:F-Q-se,...Y&&{alignmentOffset:se}},reset:Y}}}),iV=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0,...y}=co(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=uo(o),w=pi(a),x=uo(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=h||(x||!g?[Th(a)]:ZB(a)),E=f!=="none";!h&&E&&S.push(...tV(a,g,f,k));const T=[a,...S],j=await Uc(e,y),R=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&R.push(j[b]),d){const F=XB(o,s,k);R.push(j[F[0]],j[F[1]])}if(D=[...D,{placement:o,overflows:R}],!R.every(F=>F<=0)){var H,L;const F=(((H=i.flip)==null?void 0:H.index)||0)+1,Q=T[F];if(Q)return{data:{index:F,overflows:D},reset:{placement:Q}};let Y=(L=D.filter(se=>se.overflows[0]<=0).sort((se,z)=>se.overflows[1]-z.overflows[1])[0])==null?void 0:L.placement;if(!Y)switch(p){case"bestFit":{var G;const se=(G=D.filter(z=>{if(E){const A=pi(z.placement);return A===w||A==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(A=>A>0).reduce((A,M)=>A+M,0)]).sort((z,A)=>z[1]-A[1])[0])==null?void 0:G[0];se&&(Y=se);break}case"initialPlacement":Y=a;break}if(o!==Y)return{reset:{placement:Y}}}return{}}}};function $x(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Fx(t){return GB.some(e=>t[e]>=0)}const sV=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=co(t,e);switch(r){case"referenceHidden":{const i=await Uc(e,{...o,elementContext:"reference"}),s=$x(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Fx(s)}}}case"escaped":{const i=await Uc(e,{...o,altBoundary:!0}),s=$x(i,n.floating);return{data:{escapedOffsets:s,escaped:Fx(s)}}}default:return{}}}}};async function aV(t,e){const{placement:n,platform:r,elements:o}=t,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=uo(n),a=nl(n),l=pi(n)==="y",c=["left","top"].includes(s)?-1:1,u=i&&l?-1:1,d=co(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:f}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof f=="number"&&(p=a==="end"?f*-1:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const lV=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=e,l=await aV(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:s}}}}},cV=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:y=>{let{x:b,y:w}=y;return{x:b,y:w}}},...l}=co(t,e),c={x:n,y:r},u=await Uc(e,l),d=pi(uo(o)),h=vv(d);let p=c[h],f=c[d];if(i){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",w=p+u[y],x=p-u[b];p=t0(w,p,x)}if(s){const y=d==="y"?"top":"left",b=d==="y"?"bottom":"right",w=f+u[y],x=f-u[b];f=t0(w,f,x)}const g=a.fn({...e,[h]:p,[d]:f});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:i,[d]:s}}}}}},uV=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=co(t,e),u={x:n,y:r},d=pi(o),h=vv(d);let p=u[h],f=u[d];const g=co(a,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const x=h==="y"?"height":"width",k=i.reference[h]-i.floating[x]+y.mainAxis,S=i.reference[h]+i.reference[x]-y.mainAxis;p<k?p=k:p>S&&(p=S)}if(c){var b,w;const x=h==="y"?"width":"height",k=["top","left"].includes(uo(o)),S=i.reference[d]-i.floating[x]+(k&&((b=s.offset)==null?void 0:b[d])||0)+(k?0:y.crossAxis),E=i.reference[d]+i.reference[x]+(k?0:((w=s.offset)==null?void 0:w[d])||0)-(k?y.crossAxis:0);f<S?f=S:f>E&&(f=E)}return{[h]:p,[d]:f}}}},dV=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:i,platform:s,elements:a}=e,{apply:l=()=>{},...c}=co(t,e),u=await Uc(e,c),d=uo(o),h=nl(o),p=pi(o)==="y",{width:f,height:g}=i.floating;let y,b;d==="top"||d==="bottom"?(y=d,b=h===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(b=d,y=h==="end"?"top":"bottom");const w=g-u.top-u.bottom,x=f-u.left-u.right,k=hi(g-u[y],w),S=hi(f-u[b],x),E=!e.middlewareData.shift;let T=k,j=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(j=x),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=w),E&&!h){const D=vn(u.left,0),H=vn(u.right,0),L=vn(u.top,0),G=vn(u.bottom,0);p?j=f-2*(D!==0||H!==0?D+H:vn(u.left,u.right)):T=g-2*(L!==0||G!==0?L+G:vn(u.top,u.bottom))}await l({...e,availableWidth:j,availableHeight:T});const R=await s.getDimensions(a.floating);return f!==R.width||g!==R.height?{reset:{rects:!0}}:{}}}};function Op(){return typeof window<"u"}function rl(t){return YT(t)?(t.nodeName||"").toLowerCase():"#document"}function kn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ir(t){var e;return(e=(YT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function YT(t){return Op()?t instanceof Node||t instanceof kn(t).Node:!1}function lr(t){return Op()?t instanceof Element||t instanceof kn(t).Element:!1}function jr(t){return Op()?t instanceof HTMLElement||t instanceof kn(t).HTMLElement:!1}function Bx(t){return!Op()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof kn(t).ShadowRoot}function lu(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=cr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(o)}function hV(t){return["table","td","th"].includes(rl(t))}function jp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function xv(t){const e=kv(),n=lr(t)?cr(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function pV(t){let e=fi(t);for(;jr(e)&&!qa(e);){if(xv(e))return e;if(jp(e))return null;e=fi(e)}return null}function kv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function qa(t){return["html","body","#document"].includes(rl(t))}function cr(t){return kn(t).getComputedStyle(t)}function Rp(t){return lr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function fi(t){if(rl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Bx(t)&&t.host||Ir(t);return Bx(e)?e.host:e}function QT(t){const e=fi(t);return qa(e)?t.ownerDocument?t.ownerDocument.body:t.body:jr(e)&&lu(e)?e:QT(e)}function Hc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=QT(t),i=o===((r=t.ownerDocument)==null?void 0:r.body),s=kn(o);if(i){const a=r0(s);return e.concat(s,s.visualViewport||[],lu(o)?o:[],a&&n?Hc(a):[])}return e.concat(o,Hc(o,[],n))}function r0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function XT(t){const e=cr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=jr(t),i=o?t.offsetWidth:n,s=o?t.offsetHeight:r,a=Eh(n)!==i||Eh(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function Sv(t){return lr(t)?t:t.contextElement}function Ma(t){const e=Sv(t);if(!jr(e))return Er(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:i}=XT(e);let s=(i?Eh(n.width):n.width)/r,a=(i?Eh(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const fV=Er(0);function ZT(t){const e=kn(t);return!kv()||!e.visualViewport?fV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function mV(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==kn(t)?!1:e}function ws(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),i=Sv(t);let s=Er(1);e&&(r?lr(r)&&(s=Ma(r)):s=Ma(t));const a=mV(i,n,r)?ZT(i):Er(0);let l=(o.left+a.x)/s.x,c=(o.top+a.y)/s.y,u=o.width/s.x,d=o.height/s.y;if(i){const h=kn(i),p=r&&lr(r)?kn(r):r;let f=h,g=r0(f);for(;g&&r&&p!==f;){const y=Ma(g),b=g.getBoundingClientRect(),w=cr(g),x=b.left+(g.clientLeft+parseFloat(w.paddingLeft))*y.x,k=b.top+(g.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=x,c+=k,f=kn(g),g=r0(f)}}return Nh({width:u,height:d,x:l,y:c})}function Cv(t,e){const n=Rp(t).scrollLeft;return e?e.left+n:ws(Ir(t)).left+n}function eN(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=r.left+e.scrollLeft-(n?0:Cv(t,r)),i=r.top+e.scrollTop;return{x:o,y:i}}function gV(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const i=o==="fixed",s=Ir(r),a=e?jp(e.floating):!1;if(r===s||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Er(1);const u=Er(0),d=jr(r);if((d||!d&&!i)&&((rl(r)!=="body"||lu(s))&&(l=Rp(r)),jr(r))){const p=ws(r);c=Ma(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const h=s&&!d&&!i?eN(s,l,!0):Er(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function yV(t){return Array.from(t.getClientRects())}function vV(t){const e=Ir(t),n=Rp(t),r=t.ownerDocument.body,o=vn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=vn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Cv(t);const a=-n.scrollTop;return cr(r).direction==="rtl"&&(s+=vn(e.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}function bV(t,e){const n=kn(t),r=Ir(t),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;const c=kv();(!c||c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:i,height:s,x:a,y:l}}function wV(t,e){const n=ws(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,i=jr(t)?Ma(t):Er(1),s=t.clientWidth*i.x,a=t.clientHeight*i.y,l=o*i.x,c=r*i.y;return{width:s,height:a,x:l,y:c}}function Vx(t,e,n){let r;if(e==="viewport")r=bV(t,n);else if(e==="document")r=vV(Ir(t));else if(lr(e))r=wV(e,n);else{const o=ZT(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return Nh(r)}function tN(t,e){const n=fi(t);return n===e||!lr(n)||qa(n)?!1:cr(n).position==="fixed"||tN(n,e)}function xV(t,e){const n=e.get(t);if(n)return n;let r=Hc(t,[],!1).filter(a=>lr(a)&&rl(a)!=="body"),o=null;const i=cr(t).position==="fixed";let s=i?fi(t):t;for(;lr(s)&&!qa(s);){const a=cr(s),l=xv(s);!l&&a.position==="fixed"&&(o=null),(i?!l&&!o:!l&&a.position==="static"&&o&&["absolute","fixed"].includes(o.position)||lu(s)&&!l&&tN(t,s))?r=r.filter(c=>c!==s):o=a,s=fi(s)}return e.set(t,r),r}function kV(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[...n==="clippingAncestors"?jp(e)?[]:xV(e,this._c):[].concat(n),r],s=i[0],a=i.reduce((l,c)=>{const u=Vx(e,c,o);return l.top=vn(u.top,l.top),l.right=hi(u.right,l.right),l.bottom=hi(u.bottom,l.bottom),l.left=vn(u.left,l.left),l},Vx(e,s,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function SV(t){const{width:e,height:n}=XT(t);return{width:e,height:n}}function CV(t,e,n){const r=jr(e),o=Ir(e),i=n==="fixed",s=ws(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Er(0);if(r||!r&&!i)if((rl(e)!=="body"||lu(o))&&(a=Rp(e)),r){const h=ws(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else o&&(l.x=Cv(o));const c=o&&!r&&!i?eN(o,a):Er(0),u=s.left+a.scrollLeft-l.x-c.x,d=s.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:s.width,height:s.height}}function lm(t){return cr(t).position==="static"}function Ux(t,e){if(!jr(t)||cr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ir(t)===n&&(n=n.ownerDocument.body),n}function nN(t,e){const n=kn(t);if(jp(t))return n;if(!jr(t)){let o=fi(t);for(;o&&!qa(o);){if(lr(o)&&!lm(o))return o;o=fi(o)}return n}let r=Ux(t,e);for(;r&&hV(r)&&lm(r);)r=Ux(r,e);return r&&qa(r)&&lm(r)&&!xv(r)?n:r||pV(t)||n}const EV=async function(t){const e=this.getOffsetParent||nN,n=this.getDimensions,r=await n(t.floating);return{reference:CV(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function TV(t){return cr(t).direction==="rtl"}const NV={convertOffsetParentRelativeRectToViewportRelativeRect:gV,getDocumentElement:Ir,getClippingRect:kV,getOffsetParent:nN,getElementRects:EV,getClientRects:yV,getDimensions:SV,getScale:Ma,isElement:lr,isRTL:TV};function MV(t,e){let n=null,r;const o=Ir(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:u,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const p=td(u),f=td(o.clientWidth-(c+d)),g=td(o.clientHeight-(u+h)),y=td(c),b={rootMargin:-p+"px "+-f+"px "+-g+"px "+-y+"px",threshold:vn(0,hi(1,l))||1};let w=!0;function x(k){const S=k[0].intersectionRatio;if(S!==l){if(!w)return s();S?s(!1,S):r=setTimeout(()=>{s(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(x,{...b,root:o.ownerDocument})}catch{n=new IntersectionObserver(x,b)}n.observe(t)}return s(!0),i}function _V(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Sv(t),u=o||i?[...c?Hc(c):[],...Hc(e)]:[];u.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const d=c&&a?MV(c,n):null;let h=-1,p=null;s&&(p=new ResizeObserver(b=>{let[w]=b;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let f,g=l?ws(t):null;l&&y();function y(){const b=ws(t);g&&(b.x!==g.x||b.y!==g.y||b.width!==g.width||b.height!==g.height)&&n(),g=b,f=requestAnimationFrame(y)}return n(),()=>{var b;u.forEach(w=>{o&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),d==null||d(),(b=p)==null||b.disconnect(),p=null,l&&cancelAnimationFrame(f)}}const OV=lV,jV=cV,RV=iV,PV=dV,AV=sV,Hx=oV,DV=uV,IV=(t,e,n)=>{const r=new Map,o={platform:NV,...n},i={...o.platform,_c:r};return rV(t,e,{...o,platform:i})};var Ed=typeof document<"u"?v.useLayoutEffect:v.useEffect;function Mh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Mh(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&t.$$typeof)&&!Mh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function rN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Wx(t,e){const n=rN(t);return Math.round(e*n)/n}function cm(t){const e=v.useRef(t);return Ed(()=>{e.current=t}),e}function LV(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=v.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=v.useState(r);Mh(h,r)||p(r);const[f,g]=v.useState(null),[y,b]=v.useState(null),w=v.useCallback(z=>{z!==E.current&&(E.current=z,g(z))},[]),x=v.useCallback(z=>{z!==T.current&&(T.current=z,b(z))},[]),k=i||f,S=s||y,E=v.useRef(null),T=v.useRef(null),j=v.useRef(u),R=l!=null,D=cm(l),H=cm(o),L=cm(c),G=v.useCallback(()=>{if(!E.current||!T.current)return;const z={placement:e,strategy:n,middleware:h};H.current&&(z.platform=H.current),IV(E.current,T.current,z).then(A=>{const M={...A,isPositioned:L.current!==!1};F.current&&!Mh(j.current,M)&&(j.current=M,Xc.flushSync(()=>{d(M)}))})},[h,e,n,H,L]);Ed(()=>{c===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[c]);const F=v.useRef(!1);Ed(()=>(F.current=!0,()=>{F.current=!1}),[]),Ed(()=>{if(k&&(E.current=k),S&&(T.current=S),k&&S){if(D.current)return D.current(k,S,G);G()}},[k,S,G,D,R]);const Q=v.useMemo(()=>({reference:E,floating:T,setReference:w,setFloating:x}),[w,x]),Y=v.useMemo(()=>({reference:k,floating:S}),[k,S]),se=v.useMemo(()=>{const z={position:n,left:0,top:0};if(!Y.floating)return z;const A=Wx(Y.floating,u.x),M=Wx(Y.floating,u.y);return a?{...z,transform:"translate("+A+"px, "+M+"px)",...rN(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:A,top:M}},[n,a,Y.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:G,refs:Q,elements:Y,floatingStyles:se}),[u,G,Q,Y,se])}const zV=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Hx({element:r.current,padding:o}).fn(n):{}:r?Hx({element:r,padding:o}).fn(n):{}}}},$V=(t,e)=>({...OV(t),options:[t,e]}),FV=(t,e)=>({...jV(t),options:[t,e]}),BV=(t,e)=>({...DV(t),options:[t,e]}),VV=(t,e)=>({...RV(t),options:[t,e]}),UV=(t,e)=>({...PV(t),options:[t,e]}),HV=(t,e)=>({...AV(t),options:[t,e]}),WV=(t,e)=>({...zV(t),options:[t,e]});var qV="Arrow",oN=v.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...i}=t;return m.jsx(ge.svg,{...i,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});oN.displayName=qV;var KV=oN,Ev="Popper",[iN,sN]=Tn(Ev),[JV,aN]=iN(Ev),lN=t=>{const{__scopePopper:e,children:n}=t,[r,o]=v.useState(null);return m.jsx(JV,{scope:e,anchor:r,onAnchorChange:o,children:n})};lN.displayName=Ev;var cN="PopperAnchor",uN=v.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,i=aN(cN,n),s=v.useRef(null),a=$e(e,s);return v.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:m.jsx(ge.div,{...o,ref:a})});uN.displayName=cN;var Tv="PopperContent",[GV,YV]=iN(Tv),dN=v.forwardRef((t,e)=>{var n,r,o,i,s,a;const{__scopePopper:l,side:c="bottom",sideOffset:u=0,align:d="center",alignOffset:h=0,arrowPadding:p=0,avoidCollisions:f=!0,collisionBoundary:g=[],collisionPadding:y=0,sticky:b="partial",hideWhenDetached:w=!1,updatePositionStrategy:x="optimized",onPlaced:k,...S}=t,E=aN(Tv,l),[T,j]=v.useState(null),R=$e(e,Fe=>j(Fe)),[D,H]=v.useState(null),L=bE(D),G=(L==null?void 0:L.width)??0,F=(L==null?void 0:L.height)??0,Q=c+(d!=="center"?"-"+d:""),Y=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},se=Array.isArray(g)?g:[g],z=se.length>0,A={padding:Y,boundary:se.filter(XV),altBoundary:z},{refs:M,floatingStyles:N,placement:$,isPositioned:V,middlewareData:K}=LV({strategy:"fixed",placement:Q,whileElementsMounted:(...Fe)=>_V(...Fe,{animationFrame:x==="always"}),elements:{reference:E.anchor},middleware:[$V({mainAxis:u+F,alignmentAxis:h}),f&&FV({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?BV():void 0,...A}),f&&VV({...A}),UV({...A,apply:({elements:Fe,rects:Se,availableWidth:_,availableHeight:P})=>{const{width:I,height:J}=Se.reference,q=Fe.floating.style;q.setProperty("--radix-popper-available-width",`${_}px`),q.setProperty("--radix-popper-available-height",`${P}px`),q.setProperty("--radix-popper-anchor-width",`${I}px`),q.setProperty("--radix-popper-anchor-height",`${J}px`)}}),D&&WV({element:D,padding:p}),ZV({arrowWidth:G,arrowHeight:F}),w&&HV({strategy:"referenceHidden",...A})]}),[te,re]=fN($),X=ot(k);Nr(()=>{V&&(X==null||X())},[V,X]);const me=(n=K.arrow)==null?void 0:n.x,pe=(r=K.arrow)==null?void 0:r.y,Ae=((o=K.arrow)==null?void 0:o.centerOffset)!==0,[Ne,Ve]=v.useState();return Nr(()=>{T&&Ve(window.getComputedStyle(T).zIndex)},[T]),m.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...N,transform:V?N.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[(i=K.transformOrigin)==null?void 0:i.x,(s=K.transformOrigin)==null?void 0:s.y].join(" "),...((a=K.hide)==null?void 0:a.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(GV,{scope:l,placedSide:te,onArrowChange:H,arrowX:me,arrowY:pe,shouldHideArrow:Ae,children:m.jsx(ge.div,{"data-side":te,"data-align":re,...S,ref:R,style:{...S.style,animation:V?void 0:"none"}})})})});dN.displayName=Tv;var hN="PopperArrow",QV={top:"bottom",right:"left",bottom:"top",left:"right"},pN=v.forwardRef(function(t,e){const{__scopePopper:n,...r}=t,o=YV(hN,n),i=QV[o.placedSide];return m.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:m.jsx(KV,{...r,ref:e,style:{...r.style,display:"block"}})})});pN.displayName=hN;function XV(t){return t!==null}var ZV=t=>({name:"transformOrigin",options:t,fn(e){var n,r,o;const{placement:i,rects:s,middlewareData:a}=e,l=((n=a.arrow)==null?void 0:n.centerOffset)!==0,c=l?0:t.arrowWidth,u=l?0:t.arrowHeight,[d,h]=fN(i),p={start:"0%",center:"50%",end:"100%"}[h],f=(((r=a.arrow)==null?void 0:r.x)??0)+c/2,g=(((o=a.arrow)==null?void 0:o.y)??0)+u/2;let y="",b="";return d==="bottom"?(y=l?p:`${f}px`,b=`${-u}px`):d==="top"?(y=l?p:`${f}px`,b=`${s.floating.height+u}px`):d==="right"?(y=`${-u}px`,b=l?p:`${g}px`):d==="left"&&(y=`${s.floating.width+u}px`,b=l?p:`${g}px`),{data:{x:y,y:b}}}});function fN(t){const[e,n="center"]=t.split("-");return[e,n]}var eU=lN,tU=uN,nU=dN,rU=pN,o0=["Enter"," "],oU=["ArrowDown","PageUp","Home"],mN=["ArrowUp","PageDown","End"],iU=[...oU,...mN],sU={ltr:[...o0,"ArrowRight"],rtl:[...o0,"ArrowLeft"]},aU={ltr:["ArrowLeft"],rtl:["ArrowRight"]},cu="Menu",[Wc,lU,cU]=Yh(cu),[_s,gN]=Tn(cu,[cU,sN,fp]),Pp=sN(),yN=fp(),[uU,Os]=_s(cu),[dU,uu]=_s(cu),vN=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:i,modal:s=!0}=t,a=Pp(e),[l,c]=v.useState(null),u=v.useRef(!1),d=ot(i),h=ru(o);return v.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",f,{capture:!0,once:!0}),document.addEventListener("pointermove",f,{capture:!0,once:!0})},f=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",f,{capture:!0}),document.removeEventListener("pointermove",f,{capture:!0})}},[]),m.jsx(eU,{...a,children:m.jsx(uU,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:m.jsx(dU,{scope:e,onClose:v.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:s,children:r})})})};vN.displayName=cu;var hU="MenuAnchor",Nv=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Pp(n);return m.jsx(tU,{...o,...r,ref:e})});Nv.displayName=hU;var Mv="MenuPortal",[pU,bN]=_s(Mv,{forceMount:void 0}),wN=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,i=Os(Mv,e);return m.jsx(pU,{scope:e,forceMount:n,children:m.jsx(Bt,{present:n||i.open,children:m.jsx(Xh,{asChild:!0,container:o,children:r})})})};wN.displayName=Mv;var $n="MenuContent",[fU,_v]=_s($n),xN=v.forwardRef((t,e)=>{const n=bN($n,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=Os($n,t.__scopeMenu),s=uu($n,t.__scopeMenu);return m.jsx(Wc.Provider,{scope:t.__scopeMenu,children:m.jsx(Bt,{present:r||i.open,children:m.jsx(Wc.Slot,{scope:t.__scopeMenu,children:s.modal?m.jsx(mU,{...o,ref:e}):m.jsx(gU,{...o,ref:e})})})})}),mU=v.forwardRef((t,e)=>{const n=Os($n,t.__scopeMenu),r=v.useRef(null),o=$e(e,r);return v.useEffect(()=>{const i=r.current;if(i)return XE(i)},[]),m.jsx(Ov,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:le(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),gU=v.forwardRef((t,e)=>{const n=Os($n,t.__scopeMenu);return m.jsx(Ov,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Ov=v.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,disableOutsideScroll:f,...g}=t,y=Os($n,n),b=uu($n,n),w=Pp(n),x=yN(n),k=lU(n),[S,E]=v.useState(null),T=v.useRef(null),j=$e(e,T,y.onContentChange),R=v.useRef(0),D=v.useRef(""),H=v.useRef(0),L=v.useRef(null),G=v.useRef("right"),F=v.useRef(0),Q=f?Ay:v.Fragment,Y=f?{as:us,allowPinchZoom:!0}:void 0,se=A=>{var M,N;const $=D.current+A,V=k().filter(pe=>!pe.disabled),K=document.activeElement,te=(M=V.find(pe=>pe.ref.current===K))==null?void 0:M.textValue,re=V.map(pe=>pe.textValue),X=MU(re,$,te),me=(N=V.find(pe=>pe.textValue===X))==null?void 0:N.ref.current;(function pe(Ae){D.current=Ae,window.clearTimeout(R.current),Ae!==""&&(R.current=window.setTimeout(()=>pe(""),1e3))})($),me&&setTimeout(()=>me.focus())};v.useEffect(()=>()=>window.clearTimeout(R.current),[]),UE();const z=v.useCallback(A=>{var M,N;return G.current===((M=L.current)==null?void 0:M.side)&&OU(A,(N=L.current)==null?void 0:N.area)},[]);return m.jsx(fU,{scope:n,searchRef:D,onItemEnter:v.useCallback(A=>{z(A)&&A.preventDefault()},[z]),onItemLeave:v.useCallback(A=>{var M;z(A)||((M=T.current)==null||M.focus(),E(null))},[z]),onTriggerLeave:v.useCallback(A=>{z(A)&&A.preventDefault()},[z]),pointerGraceTimerRef:H,onPointerGraceIntentChange:v.useCallback(A=>{L.current=A},[]),children:m.jsx(Q,{...Y,children:m.jsx(Py,{asChild:!0,trapped:o,onMountAutoFocus:le(i,A=>{var M;A.preventDefault(),(M=T.current)==null||M.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:m.jsx(Qh,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,children:m.jsx(A3,{asChild:!0,...x,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:E,onEntryFocus:le(l,A=>{b.isUsingKeyboardRef.current||A.preventDefault()}),preventScrollOnEntryFocus:!0,children:m.jsx(nU,{role:"menu","aria-orientation":"vertical","data-state":LN(y.open),"data-radix-menu-content":"",dir:b.dir,...w,...g,ref:j,style:{outline:"none",...g.style},onKeyDown:le(g.onKeyDown,A=>{const M=A.target.closest("[data-radix-menu-content]")===A.currentTarget,N=A.ctrlKey||A.altKey||A.metaKey,$=A.key.length===1;M&&(A.key==="Tab"&&A.preventDefault(),!N&&$&&se(A.key));const V=T.current;if(A.target!==V||!iU.includes(A.key))return;A.preventDefault();const K=k().filter(te=>!te.disabled).map(te=>te.ref.current);mN.includes(A.key)&&K.reverse(),TU(K)}),onBlur:le(t.onBlur,A=>{A.currentTarget.contains(A.target)||(window.clearTimeout(R.current),D.current="")}),onPointerMove:le(t.onPointerMove,qc(A=>{const M=A.target,N=F.current!==A.clientX;if(A.currentTarget.contains(M)&&N){const $=A.clientX>F.current?"right":"left";G.current=$,F.current=A.clientX}}))})})})})})})});xN.displayName=$n;var yU="MenuGroup",jv=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.jsx(ge.div,{role:"group",...r,ref:e})});jv.displayName=yU;var vU="MenuLabel",kN=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.jsx(ge.div,{...r,ref:e})});kN.displayName=vU;var _h="MenuItem",qx="menu.itemSelect",Ap=v.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,i=v.useRef(null),s=uu(_h,t.__scopeMenu),a=_v(_h,t.__scopeMenu),l=$e(e,i),c=v.useRef(!1),u=()=>{const d=i.current;if(!n&&d){const h=new CustomEvent(qx,{bubbles:!0,cancelable:!0});d.addEventListener(qx,p=>r==null?void 0:r(p),{once:!0}),iy(d,h),h.defaultPrevented?c.current=!1:s.onClose()}};return m.jsx(SN,{...o,ref:l,disabled:n,onClick:le(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),c.current=!0},onPointerUp:le(t.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:le(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||o0.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Ap.displayName=_h;var SN=v.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...i}=t,s=_v(_h,n),a=yN(n),l=v.useRef(null),c=$e(e,l),[u,d]=v.useState(!1),[h,p]=v.useState("");return v.useEffect(()=>{const f=l.current;f&&p((f.textContent??"").trim())},[i.children]),m.jsx(Wc.ItemSlot,{scope:n,disabled:r,textValue:o??h,children:m.jsx(D3,{asChild:!0,...a,focusable:!r,children:m.jsx(ge.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:le(t.onPointerMove,qc(f=>{r?s.onItemLeave(f):(s.onItemEnter(f),f.defaultPrevented||f.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:le(t.onPointerLeave,qc(f=>s.onItemLeave(f))),onFocus:le(t.onFocus,()=>d(!0)),onBlur:le(t.onBlur,()=>d(!1))})})})}),bU="MenuCheckboxItem",CN=v.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return m.jsx(_N,{scope:t.__scopeMenu,checked:n,children:m.jsx(Ap,{role:"menuitemcheckbox","aria-checked":Oh(n)?"mixed":n,...o,ref:e,"data-state":Pv(n),onSelect:le(o.onSelect,()=>r==null?void 0:r(Oh(n)?!0:!n),{checkForDefaultPrevented:!1})})})});CN.displayName=bU;var EN="MenuRadioGroup",[wU,xU]=_s(EN,{value:void 0,onValueChange:()=>{}}),TN=v.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,i=ot(r);return m.jsx(wU,{scope:t.__scopeMenu,value:n,onValueChange:i,children:m.jsx(jv,{...o,ref:e})})});TN.displayName=EN;var NN="MenuRadioItem",MN=v.forwardRef((t,e)=>{const{value:n,...r}=t,o=xU(NN,t.__scopeMenu),i=n===o.value;return m.jsx(_N,{scope:t.__scopeMenu,checked:i,children:m.jsx(Ap,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Pv(i),onSelect:le(r.onSelect,()=>{var s;return(s=o.onValueChange)==null?void 0:s.call(o,n)},{checkForDefaultPrevented:!1})})})});MN.displayName=NN;var Rv="MenuItemIndicator",[_N,kU]=_s(Rv,{checked:!1}),ON=v.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,i=kU(Rv,n);return m.jsx(Bt,{present:r||Oh(i.checked)||i.checked===!0,children:m.jsx(ge.span,{...o,ref:e,"data-state":Pv(i.checked)})})});ON.displayName=Rv;var SU="MenuSeparator",jN=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.jsx(ge.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});jN.displayName=SU;var CU="MenuArrow",RN=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Pp(n);return m.jsx(rU,{...o,...r,ref:e})});RN.displayName=CU;var EU="MenuSub",[fq,PN]=_s(EU),Hl="MenuSubTrigger",AN=v.forwardRef((t,e)=>{const n=Os(Hl,t.__scopeMenu),r=uu(Hl,t.__scopeMenu),o=PN(Hl,t.__scopeMenu),i=_v(Hl,t.__scopeMenu),s=v.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},u=v.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return v.useEffect(()=>u,[u]),v.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),m.jsx(Nv,{asChild:!0,...c,children:m.jsx(SN,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":LN(n.open),...t,ref:Gh(e,o.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:le(t.onPointerMove,qc(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:le(t.onPointerLeave,qc(d=>{var h,p;u();const f=(h=n.content)==null?void 0:h.getBoundingClientRect();if(f){const g=(p=n.content)==null?void 0:p.dataset.side,y=g==="right",b=y?-5:5,w=f[y?"left":"right"],x=f[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+b,y:d.clientY},{x:w,y:f.top},{x,y:f.top},{x,y:f.bottom},{x:w,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:le(t.onKeyDown,d=>{var h;const p=i.searchRef.current!=="";t.disabled||p&&d.key===" "||sU[r.dir].includes(d.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),d.preventDefault())})})})});AN.displayName=Hl;var DN="MenuSubContent",IN=v.forwardRef((t,e)=>{const n=bN($n,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=Os($n,t.__scopeMenu),s=uu($n,t.__scopeMenu),a=PN(DN,t.__scopeMenu),l=v.useRef(null),c=$e(e,l);return m.jsx(Wc.Provider,{scope:t.__scopeMenu,children:m.jsx(Bt,{present:r||i.open,children:m.jsx(Wc.Slot,{scope:t.__scopeMenu,children:m.jsx(Ov,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;s.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:le(t.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:le(t.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:le(t.onKeyDown,u=>{var d;const h=u.currentTarget.contains(u.target),p=aU[s.dir].includes(u.key);h&&p&&(i.onOpenChange(!1),(d=a.trigger)==null||d.focus(),u.preventDefault())})})})})})});IN.displayName=DN;function LN(t){return t?"open":"closed"}function Oh(t){return t==="indeterminate"}function Pv(t){return Oh(t)?"indeterminate":t?"checked":"unchecked"}function TU(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function NU(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function MU(t,e,n){const r=e.length>1&&Array.from(e).every(a=>a===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let i=NU(t,Math.max(o,0));r.length===1&&(i=i.filter(a=>a!==n));const s=i.find(a=>a.toLowerCase().startsWith(r.toLowerCase()));return s!==n?s:void 0}function _U(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i].x,l=e[i].y,c=e[s].x,u=e[s].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function OU(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return _U(n,e)}function qc(t){return e=>e.pointerType==="mouse"?t(e):void 0}var jU=vN,RU=Nv,PU=wN,AU=xN,DU=jv,IU=kN,LU=Ap,zU=CN,$U=TN,FU=MN,BU=ON,VU=jN,UU=RN,HU=AN,WU=IN,Av="DropdownMenu",[qU,mq]=Tn(Av,[gN]),Zt=gN(),[KU,zN]=qU(Av),$N=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,l=Zt(e),c=v.useRef(null),[u=!1,d]=fo({prop:o,defaultProp:i,onChange:s});return m.jsx(KU,{scope:e,triggerId:eo(),triggerRef:c,contentId:eo(),open:u,onOpenChange:d,onOpenToggle:v.useCallback(()=>d(h=>!h),[d]),modal:a,children:m.jsx(jU,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};$N.displayName=Av;var FN="DropdownMenuTrigger",BN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,i=zN(FN,n),s=Zt(n);return m.jsx(RU,{asChild:!0,...s,children:m.jsx(ge.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Gh(e,i.triggerRef),onPointerDown:le(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:le(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});BN.displayName=FN;var JU="DropdownMenuPortal",VN=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Zt(e);return m.jsx(PU,{...r,...n})};VN.displayName=JU;var UN="DropdownMenuContent",HN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=zN(UN,n),i=Zt(n),s=v.useRef(!1);return m.jsx(AU,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...r,ref:e,onCloseAutoFocus:le(t.onCloseAutoFocus,a=>{var l;s.current||(l=o.triggerRef.current)==null||l.focus(),s.current=!1,a.preventDefault()}),onInteractOutside:le(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!o.modal||u)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});HN.displayName=UN;var GU="DropdownMenuGroup",YU=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Zt(n);return m.jsx(DU,{...o,...r,ref:e})});YU.displayName=GU;var QU="DropdownMenuLabel",WN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Zt(n);return m.jsx(IU,{...o,...r,ref:e})});WN.displayName=QU;var XU="DropdownMenuItem",qN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Zt(n);return m.jsx(LU,{...o,...r,ref:e})});qN.displayName=XU;var ZU="DropdownMenuCheckboxItem",KN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Zt(n);return m.jsx(zU,{...o,...r,ref:e})});KN.displayName=ZU;var eH="DropdownMenuRadioGroup",tH=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Zt(n);return m.jsx($U,{...o,...r,ref:e})});tH.displayName=eH;var nH="DropdownMenuRadioItem",JN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Zt(n);return m.jsx(FU,{...o,...r,ref:e})});JN.displayName=nH;var rH="DropdownMenuItemIndicator",GN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Zt(n);return m.jsx(BU,{...o,...r,ref:e})});GN.displayName=rH;var oH="DropdownMenuSeparator",YN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Zt(n);return m.jsx(VU,{...o,...r,ref:e})});YN.displayName=oH;var iH="DropdownMenuArrow",sH=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Zt(n);return m.jsx(UU,{...o,...r,ref:e})});sH.displayName=iH;var aH="DropdownMenuSubTrigger",QN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Zt(n);return m.jsx(HU,{...o,...r,ref:e})});QN.displayName=aH;var lH="DropdownMenuSubContent",XN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Zt(n);return m.jsx(WU,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});XN.displayName=lH;var cH=$N,uH=BN,dH=VN,ZN=HN,eM=WN,tM=qN,nM=KN,rM=JN,oM=GN,iM=YN,sM=QN,aM=XN;const hH=cH,pH=uH,fH=v.forwardRef(({className:t,inset:e,children:n,...r},o)=>m.jsxs(sM,{ref:o,className:ve("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,m.jsx(Uj,{className:"ml-auto h-4 w-4"})]}));fH.displayName=sM.displayName;const mH=v.forwardRef(({className:t,...e},n)=>m.jsx(aM,{ref:n,className:ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));mH.displayName=aM.displayName;const lM=v.forwardRef(({className:t,sideOffset:e=4,...n},r)=>m.jsx(dH,{children:m.jsx(ZN,{ref:r,sideOffset:e,className:ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));lM.displayName=ZN.displayName;const cM=v.forwardRef(({className:t,inset:e,...n},r)=>m.jsx(tM,{ref:r,className:ve("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));cM.displayName=tM.displayName;const gH=v.forwardRef(({className:t,children:e,checked:n,...r},o)=>m.jsxs(nM,{ref:o,className:ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(oM,{children:m.jsx(rC,{className:"h-4 w-4"})})}),e]}));gH.displayName=nM.displayName;const yH=v.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(rM,{ref:r,className:ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(oM,{children:m.jsx(qj,{className:"h-2 w-2 fill-current"})})}),e]}));yH.displayName=rM.displayName;const vH=v.forwardRef(({className:t,inset:e,...n},r)=>m.jsx(eM,{ref:r,className:ve("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));vH.displayName=eM.displayName;const bH=v.forwardRef(({className:t,...e},n)=>m.jsx(iM,{ref:n,className:ve("-mx-1 my-1 h-px bg-muted",t),...e}));bH.displayName=iM.displayName;const uM=({content:t,onChange:e,onClear:n})=>{const r=BF({extensions:[HB,WB.configure({types:["heading","paragraph"],defaultAlignment:"right"}),qB,JB.configure({HTMLAttributes:{class:"max-w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity"}})],content:t,onUpdate:({editor:i})=>{e(i.getHTML())},onCreate:({editor:i})=>{t||i.commands.setContent("")},editorProps:{attributes:{class:"prose prose-lg rtl w-full min-h-[200px] overflow-y-auto p-4",dir:"rtl"}}}),o=async()=>{const i=document.createElement("input");i.type="file",i.accept="image/*",i.onchange=async()=>{var s;if(!((s=i.files)!=null&&s.length))return;const a=i.files[0];if(a.size>2*1024*1024){Ye.error("גודל הקובץ חייב להיות קטן מ-2MB");return}try{const l=a.name.split(".").pop(),c=`${`${Math.random()}.${l}`}`,{error:u}=await ue.storage.from("content_library").upload(c,a);if(u)throw u;const{data:{publicUrl:d}}=ue.storage.from("content_library").getPublicUrl(c);r&&r.chain().focus().setImage({src:d}).run(),Ye.success("התמונה הועלתה בהצלחה!")}catch(l){console.error("Error uploading image:",l),Ye.error("שגיאה בהעלאת התמונה")}},i.click()};return r?m.jsxs("div",{className:"border rounded-lg w-full",children:[m.jsxs("div",{className:"flex items-center gap-2 border-b p-3 bg-gray-50/80 flex-wrap",children:[m.jsxs(hH,{children:[m.jsx(pH,{asChild:!0,children:m.jsxs(ce,{variant:"ghost",size:"sm",className:"gap-1 text-right px-3 font-normal",children:["טקסט רגיל",m.jsx(oC,{className:"h-4 w-4 opacity-50"})]})}),m.jsx(lM,{align:"end",className:"min-w-[120px]",children:[{label:"טקסט רגיל",command:()=>r.chain().focus().setParagraph().run()},{label:"כותרת",command:()=>r.chain().focus().toggleHeading({level:1}).run()},{label:"כותרת משנית",command:()=>r.chain().focus().toggleHeading({level:2}).run()},{label:"תת-כותרת",command:()=>r.chain().focus().toggleHeading({level:3}).run()}].map(i=>m.jsx(cM,{onClick:i.command,className:"text-right px-3 py-2",children:i.label},i.label))})]}),m.jsx("div",{className:"h-4 w-[1px] bg-gray-200 mx-1"}),m.jsxs("div",{className:"flex items-center gap-0.5",children:[m.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleBold().run(),className:`px-2 ${r.isActive("bold")?"bg-gray-100":""}`,children:m.jsx(Fj,{className:"h-4 w-4"})}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleItalic().run(),className:`px-2 ${r.isActive("italic")?"bg-gray-100":""}`,children:m.jsx(Jj,{className:"h-4 w-4"})}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleUnderline().run(),className:`px-2 ${r.isActive("underline")?"bg-gray-100":""}`,children:m.jsx(iR,{className:"h-4 w-4"})})]}),m.jsx("div",{className:"h-4 w-[1px] bg-gray-200 mx-1"}),m.jsxs("div",{className:"flex items-center gap-0.5",children:[m.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleOrderedList().run(),className:`px-2 ${r.isActive("orderedList")?"bg-gray-100":""}`,children:m.jsx(Yj,{className:"h-4 w-4"})}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleBulletList().run(),className:`px-2 ${r.isActive("bulletList")?"bg-gray-100":""}`,children:m.jsx(Qj,{className:"h-4 w-4"})})]}),m.jsx("div",{className:"h-4 w-[1px] bg-gray-200 mx-1"}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:o,className:"px-2",children:m.jsx(iC,{className:"h-4 w-4"})})]}),m.jsx("div",{className:"w-full max-h-[60vh] overflow-y-auto",children:m.jsx(OF,{editor:r,className:"prose prose-lg max-w-none w-full"})})]}):null};function wH({onEntryAdded:t}){const[e,n]=v.useState(""),[r,o]=v.useState(!1),i=async(s=!1)=>{var a,l;if(!e.trim()){Ye.error("אנא הכנס תוכן ליומן");return}try{o(!0);const{data:c}=await ue.auth.getSession();if(!((l=(a=c==null?void 0:c.session)==null?void 0:a.user)!=null&&l.id)){Ye.error("יש להתחבר כדי להוסיף רשומה");return}const{error:u}=await ue.from("learning_journal").insert([{content:e,is_important:s,user_id:c.session.user.id}]);if(u)throw u;n(""),t(),Ye.success("הרשומה נוספה בהצלחה!"),TE()}catch(c){console.error("Error adding entry:",c),Ye.error("שגיאה בהוספת רשומה")}finally{o(!1)}};return m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"space-y-2",children:m.jsx(uM,{content:e,onChange:n,onClear:()=>n("")})}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx(ce,{onClick:()=>i(!1),className:"flex-1",disabled:r,children:"הוסף רשומה"}),m.jsx(ce,{onClick:()=>i(!0),variant:"secondary",className:"flex-1",disabled:r,children:"הוסף כהערה חשובה"})]})]})}function xH({isOpen:t,onClose:e,imageUrl:n}){return m.jsx(ao,{open:t,onOpenChange:e,children:m.jsx(Mr,{className:"max-w-4xl p-0 overflow-hidden",children:m.jsx("img",{src:n,alt:"Enlarged view",className:"w-full h-full object-contain",onClick:r=>r.stopPropagation()})})})}function kH(){const[t,e]=v.useState([]),[n,r]=v.useState(null),[o,i]=v.useState(!1),[s,a]=v.useState(!0),[l,c]=v.useState(null),[u,d]=v.useState(!1),[h,p]=v.useState(null),[f,g]=v.useState(!1);v.useEffect(()=>{y()},[]);const y=async()=>{var k,S;try{const{data:E}=await ue.auth.getSession();if(!((S=(k=E==null?void 0:E.session)==null?void 0:k.user)!=null&&S.id)){Ye.error("יש להתחבר כדי לצפות ביומן");return}const{data:T,error:j}=await ue.from("learning_journal").select("*").order("created_at",{ascending:!1});if(j)throw j;e(T||[])}catch(E){console.error("Error loading entries:",E),Ye.error("שגיאה בטעינת היומן")}finally{a(!1)}},b=async k=>{try{const{error:S}=await ue.from("learning_journal").delete().eq("id",k);if(S)throw S;e(t.filter(E=>E.id!==k)),Ye.success("הרשומה נמחקה בהצלחה!")}catch(S){console.error("Error deleting entry:",S),Ye.error("שגיאה במחיקת רשומה")}},w=async()=>{if(n)try{const{error:k}=await ue.from("learning_journal").update({content:n.content}).eq("id",n.id);if(k)throw k;e(t.map(S=>S.id===n.id?n:S)),i(!1),r(null),Ye.success("הרשומה עודכנה בהצלחה!")}catch(k){console.error("Error updating entry:",k),Ye.error("שגיאה בעדכון רשומה")}},x=async k=>{try{d(!0);const{data:S,error:E}=await ue.functions.invoke("summarize-journal",{body:{content:k.content}});if(E)throw E;p(S.summary),g(!0)}catch(S){console.error("Error generating summary:",S),Ye.error("שגיאה בהפקת סיכום")}finally{d(!1)}};return s?m.jsx("div",{children:"טוען..."}):m.jsxs(ct,{className:"p-6 w-full bg-background text-foreground transition-colors duration-300",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"יומן למידה"}),m.jsx(wH,{onEntryAdded:y}),m.jsx("div",{className:"mt-6 space-y-4",children:t.map(k=>m.jsxs(ct,{className:`p-4 ${k.is_important?"border-2 border-yellow-500":""}`,children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsx("div",{className:"flex items-center space-x-2",children:k.is_important&&m.jsx(_c,{variant:"secondary",children:"חשוב"})}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>x(k),disabled:u,children:m.jsx(nC,{className:"h-4 w-4"})}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>{r(k),i(!0)},children:m.jsx(nR,{className:"h-4 w-4"})}),m.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>b(k.id),children:m.jsx(ds,{className:"h-4 w-4"})})]})]}),m.jsx("div",{className:"prose prose-sm rtl dark:prose-invert",dangerouslySetInnerHTML:{__html:k.content},onClick:S=>{const E=S.target;E.tagName==="IMG"&&c(E.src)}}),m.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[new Date(k.created_at).toLocaleDateString()," ",new Date(k.created_at).toLocaleTimeString()]})]},k.id))}),m.jsx(ao,{open:o,onOpenChange:i,children:m.jsxs(Mr,{className:"w-full max-w-4xl",children:[m.jsx(ms,{children:m.jsx(gs,{children:"ערוך רשומה"})}),m.jsx("div",{className:"w-full max-h-[60vh] overflow-y-auto",children:m.jsx(uM,{content:(n==null?void 0:n.content)||"",onChange:k=>r(n?{...n,content:k}:null)})}),m.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[m.jsx(ce,{onClick:w,children:"שמור שינויים"}),m.jsx(ce,{variant:"outline",onClick:()=>{i(!1),r(null)},children:"ביטול"})]})]})}),m.jsx(ao,{open:f,onOpenChange:g,children:m.jsxs(Mr,{children:[m.jsx(ms,{children:m.jsx(gs,{children:"סיכום רשומה"})}),m.jsx("div",{className:"mt-4 whitespace-pre-wrap",children:h}),m.jsx(ce,{onClick:()=>g(!1),className:"mt-4",children:"סגור"})]})}),m.jsx(xH,{isOpen:!!l,onClose:()=>c(null),imageUrl:l||""})]})}const Kx=t=>{let e;const n=new Set,r=(a,l)=>{const c=typeof a=="function"?a(e):a;if(!Object.is(c,e)){const u=e;e=l??(typeof c!="object"||c===null)?c:Object.assign({},e,c),n.forEach(d=>d(e,u))}},o=()=>e,i={setState:r,getState:o,getInitialState:()=>s,subscribe:a=>(n.add(a),()=>n.delete(a))},s=e=t(r,o,i);return i},SH=t=>t?Kx(t):Kx,CH=t=>t;function EH(t,e=CH){const n=C.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return C.useDebugValue(n),n}const TH=t=>{const e=SH(t),n=r=>EH(e,r);return Object.assign(n,e),n},NH=t=>TH;function MH(t){const e=[/(?:youtube\.com\/watch\?v=|youtu.be\/|youtube\.com\/embed\/|youtube\.com\/v\/|youtube\.com\/\?v=)([^&\n?#]+)/];for(const n of e){const r=t.match(n);if(r&&r[1])return r[1]}return null}async function _H(t){const{data:e,error:n}=await ue.functions.invoke("get-youtube-video-details",{body:{videoId:t}});if(n)throw console.error("Error fetching video details:",n),new Error(n.message);if(!e)throw new Error("Video not found");return{title:e.title,thumbnail:e.thumbnail}}const um=t=>t.includes("API key")?"מפתח ה-API של YouTube לא מוגדר":t.includes("Invalid YouTube URL")?"פורמט כתובת URL לא חוקי של YouTube":t.includes("Failed to fetch")?"שגיאה בטעינת הסרטונים":t.includes("Failed to add")?"שגיאה בהוספת הסרטון":t.includes("Failed to delete")?"שגיאה במחיקת הסרטון":t.includes("Unauthorized")?"נא להתחבר כדי לצפות בסרטונים":"שגיאה לא צפויה",Td=NH()((t,e)=>({videos:[],isLoading:!1,error:null,fetchVideos:async()=>{console.log("Fetching videos from Supabase..."),t({isLoading:!0,error:null});try{const{data:{user:n}}=await ue.auth.getUser();if(console.log("Fetch videos - Auth state:",{isAuthenticated:!!n,userId:n==null?void 0:n.id}),!n)throw console.log("No authenticated user, cannot fetch videos"),new Error("Unauthorized");const{data:r,error:o}=await ue.from("youtube_videos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1});if(o)throw console.error("Error fetching videos:",o),o;t({videos:r||[],isLoading:!1,error:null}),console.log("Videos updated in store:",r)}catch(n){console.error("Error in fetchVideos:",n);const r=n instanceof Error?n.message:"Failed to fetch videos";t({error:um(r),isLoading:!1})}},addVideo:async n=>{t({isLoading:!0,error:null});try{const{data:{user:r}}=await ue.auth.getUser();if(!r)throw new Error("Unauthorized");const o=MH(n);if(!o)throw new Error("Invalid YouTube URL");const i=await _H(o),{error:s}=await ue.from("youtube_videos").insert({url:n,video_id:o,title:i.title,thumbnail_url:i.thumbnail,user_id:r.id});if(s)throw s;await e().fetchVideos(),t({isLoading:!1,error:null})}catch(r){console.error("Error adding video:",r);const o=r instanceof Error?r.message:"Failed to add video";throw t({error:um(o),isLoading:!1}),r}},deleteVideo:async n=>{t({isLoading:!0,error:null});try{const{data:{user:r}}=await ue.auth.getUser();if(console.log("Delete video - Auth state:",{isAuthenticated:!!r,userId:r==null?void 0:r.id}),console.log("Attempting to delete video:",{videoId:n}),!r)throw console.error("Delete video - No authenticated user"),new Error("Unauthorized");const{error:o}=await ue.functions.invoke("delete-youtube-video",{body:{videoId:n}});if(o)throw console.error("Delete video - Edge Function error:",o),o;t(i=>({videos:i.videos.filter(s=>s.id!==n),isLoading:!1,error:null})),console.log("Delete video - Success, UI updated")}catch(r){console.error("Error deleting video:",r);const o=r instanceof Error?r.message:"Failed to delete video";throw t({error:um(o),isLoading:!1}),r}}}));function OH({videoId:t,onClose:e}){return m.jsx(ao,{open:!0,onOpenChange:e,children:m.jsxs(Mr,{className:"max-w-4xl w-full p-0",children:[m.jsx(w3,{className:"sr-only",children:"YouTube video player"}),m.jsx("div",{className:"relative aspect-video",children:m.jsx("iframe",{src:`https://www.youtube.com/embed/${t}`,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})})}const jH=tp("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),dM=v.forwardRef(({className:t,variant:e,...n},r)=>m.jsx("div",{ref:r,role:"alert",className:ve(jH({variant:e}),t),...n}));dM.displayName="Alert";const RH=v.forwardRef(({className:t,...e},n)=>m.jsx("h5",{ref:n,className:ve("mb-1 font-medium leading-none tracking-tight",t),...e}));RH.displayName="AlertTitle";const hM=v.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:ve("text-sm [&_p]:leading-relaxed",t),...e}));hM.displayName="AlertDescription";function PH({isOpen:t,onClose:e}){const n=Td(c=>c.addVideo),r=Td(c=>c.error),o=Td(c=>c.isLoading),[i,s]=v.useState(""),a=async c=>{c.preventDefault();try{await n(i),s(""),e()}catch{}},l=c=>c.includes("API key")?"מפתח ה-API של YouTube לא מוגדר":c.includes("Invalid YouTube URL")?"פורמט כתובת URL לא חוקי של YouTube":"שגיאה בהוספת הסרטון";return m.jsx(ao,{open:t,onOpenChange:e,children:m.jsxs(Mr,{children:[m.jsx(ms,{children:m.jsx(gs,{children:"הוסף סרטון YouTube"})}),m.jsxs("form",{onSubmit:a,className:"space-y-4",children:[m.jsx(to,{value:i,onChange:c=>s(c.target.value),placeholder:"הכנס קישור YouTube",className:"w-full",disabled:o}),r&&m.jsx(dM,{variant:"destructive",children:m.jsx(hM,{children:l(r)})}),m.jsx(ce,{type:"submit",className:"w-full",disabled:o,children:o?m.jsxs(m.Fragment,{children:[m.jsx(Zd,{className:"mr-2 h-4 w-4 animate-spin"}),"טוען..."]}):"הוסף"})]})]})})}function AH(){const[t,e]=v.useState(null),[n,r]=v.useState(!1),[o,i]=v.useState(null),{videos:s,isLoading:a,fetchVideos:l,deleteVideo:c}=Td(),{user:u,loading:d}=Ts(),h=Jh();v.useEffect(()=>{if(!d){if(!u){console.log("No authenticated user, redirecting to login"),i("נא להתחבר כדי לצפות בסרטונים"),h("/login",{replace:!0});return}try{console.log("Fetching videos from Supabase..."),l()}catch(g){console.error("Error fetching videos:",g),i("אירעה שגיאה בטעינת הסרטונים")}}},[u,d,h,l]);const p=async()=>{await ue.auth.signOut(),h("/login",{replace:!0})},f=async g=>{try{console.log("YouTubeLibrary: Initiating video deletion for ID:",g),await c(g),console.log("YouTubeLibrary: Video deletion completed")}catch(y){console.error("YouTubeLibrary: Error deleting video:",y)}};return d?m.jsx("div",{className:"flex justify-center items-center h-screen",children:"טוען..."}):u?m.jsxs("div",{className:"space-y-6",children:[o&&m.jsx("div",{className:"text-red-500 text-center mb-4",children:o}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h2",{className:"text-2xl font-bold",children:"ספריית סרטוני YouTube"}),m.jsxs("div",{className:"space-x-2 flex flex-row-reverse",children:[m.jsx(ce,{onClick:()=>r(!0),children:"הוסף סרטון"}),m.jsx(ce,{onClick:p,children:"התנתק"})]})]}),m.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:s.map(g=>m.jsxs(ct,{className:"p-4 group relative",children:[m.jsxs("div",{className:"relative aspect-video cursor-pointer",onClick:()=>e(g.video_id),children:[m.jsx("img",{src:g.thumbnail_url,alt:g.title,className:"w-full h-full object-cover rounded"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors",children:m.jsx(aC,{className:"w-12 h-12 text-white"})})]}),m.jsx("h3",{className:"mt-2 font-medium line-clamp-2",children:g.title}),m.jsx(ce,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:y=>{y.stopPropagation(),f(g.id)},children:m.jsx(ds,{className:"h-4 w-4"})})]},g.id))}),t&&m.jsx(OH,{videoId:t,onClose:()=>e(null)}),m.jsx(PH,{isOpen:n,onClose:()=>r(!1)})]}):m.jsxs("div",{className:"flex justify-center items-center h-screen flex-col",children:[m.jsx("div",{className:"text-red-500 mb-4",children:o}),m.jsx(ce,{onClick:()=>h("/login"),children:"התחבר"})]})}function DH(){const{toast:t}=Pr(),e=Ns(),{data:n=[],isLoading:r}=Ry({queryKey:["tweets"],queryFn:async()=>{const{data:s,error:a}=await ue.from("tweets").select("*").order("created_at",{ascending:!1});return a?(t({title:"Error loading tweets",description:a.message,variant:"destructive"}),[]):s}}),o=ui({mutationFn:async({tweetId:s,url:a})=>{const{data:{user:l}}=await ue.auth.getUser();if(!l)throw new Error("User not authenticated");const{error:c}=await ue.from("tweets").insert({tweet_id:s,url:a,user_id:l.id});if(c)throw c},onSuccess:()=>{e.invalidateQueries({queryKey:["tweets"]}),t({title:"Tweet added",description:"The tweet has been added to your library"})},onError:s=>{t({title:"Error adding tweet",description:s.message,variant:"destructive"})}}),i=ui({mutationFn:async s=>{const{error:a}=await ue.from("tweets").delete().eq("id",s);if(a)throw a},onSuccess:()=>{e.invalidateQueries({queryKey:["tweets"]}),t({title:"Tweet deleted",description:"The tweet has been removed from your library"})},onError:s=>{t({title:"Error deleting tweet",description:s.message,variant:"destructive"})}});return{tweets:n,isLoading:r,addTweet:o,deleteTweet:i}}const IH=()=>window.twttr?Promise.resolve():new Promise(t=>{const e=document.createElement("script");e.src="https://platform.twitter.com/widgets.js",e.onload=()=>t(),document.head.appendChild(e)}),LH=({tweetId:t})=>{const e=C.useRef(null);return v.useEffect(()=>{e.current&&(async()=>(await IH(),e.current&&(e.current.innerHTML="",window.twttr.widgets.createTweet(t,e.current,{align:"center",conversation:"none"}))))()},[t]),m.jsx("div",{ref:e})};function zH(){const[t,e]=v.useState(""),{tweets:n,isLoading:r,addTweet:o,deleteTweet:i}=DH(),s=l=>{const c=l.match(/status\/(\d+)/);return c?c[1]:null},a=async()=>{const l=s(t);l&&(await o.mutateAsync({tweetId:l,url:t}),e(""))};return r?m.jsx(ct,{className:"p-6 bg-background text-foreground transition-colors duration-300",children:m.jsx("div",{className:"flex justify-center items-center h-32",children:m.jsx(Zd,{className:"h-6 w-6 animate-spin"})})}):m.jsx(ct,{className:"p-6 bg-background text-foreground transition-colors duration-300",children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx(to,{value:t,onChange:l=>e(l.target.value),placeholder:"הכנס קישור לציוץ",className:"flex-1"}),m.jsx(ce,{onClick:a,disabled:!t||o.isPending,children:o.isPending?m.jsx(Zd,{className:"h-4 w-4 animate-spin"}):"הוסף ציוץ"})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(l=>m.jsxs("div",{className:"relative bg-background rounded-lg shadow-sm transition-colors duration-300",children:[m.jsx(ce,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10",onClick:()=>i.mutate(l.id),disabled:i.isPending,children:m.jsx(ds,{className:"h-4 w-4"})}),m.jsx(LH,{tweetId:l.tweet_id})]},l.id))})]})})}function $H(){const{theme:t,toggleTheme:e}=ZP();return m.jsxs(ce,{variant:"ghost",size:"icon",onClick:e,className:"w-9 h-9 rounded-full",children:[m.jsx(oR,{className:`h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all ${t==="dark"?"hidden":"block"}`}),m.jsx(Zj,{className:`absolute h-[1.2rem] w-[1.2rem] rotate-90 transition-all ${t==="dark"?"block":"hidden"}`}),m.jsx("span",{className:"sr-only",children:"החלף מצב תצוגה"})]})}function FH(){return m.jsxs("div",{className:"container py-6 space-y-6 text-right",dir:"rtl",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx($H,{}),m.jsx("h1",{className:"text-2xl font-bold",children:"ברוך הבא"})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsx(_A,{}),m.jsx(yI,{})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsx(OA,{}),m.jsx(ND,{}),m.jsx(EI,{}),m.jsx(V9,{}),m.jsx(AH,{}),m.jsx(zH,{}),m.jsx(nI,{}),m.jsx(kH,{})]})]})}var Jx,ze="colors",Ht="sizes",oe="space",BH={gap:oe,gridGap:oe,columnGap:oe,gridColumnGap:oe,rowGap:oe,gridRowGap:oe,inset:oe,insetBlock:oe,insetBlockEnd:oe,insetBlockStart:oe,insetInline:oe,insetInlineEnd:oe,insetInlineStart:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,marginBlock:oe,marginBlockEnd:oe,marginBlockStart:oe,marginInline:oe,marginInlineEnd:oe,marginInlineStart:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,paddingBlock:oe,paddingBlockEnd:oe,paddingBlockStart:oe,paddingInline:oe,paddingInlineEnd:oe,paddingInlineStart:oe,top:oe,right:oe,bottom:oe,left:oe,scrollMargin:oe,scrollMarginTop:oe,scrollMarginRight:oe,scrollMarginBottom:oe,scrollMarginLeft:oe,scrollMarginX:oe,scrollMarginY:oe,scrollMarginBlock:oe,scrollMarginBlockEnd:oe,scrollMarginBlockStart:oe,scrollMarginInline:oe,scrollMarginInlineEnd:oe,scrollMarginInlineStart:oe,scrollPadding:oe,scrollPaddingTop:oe,scrollPaddingRight:oe,scrollPaddingBottom:oe,scrollPaddingLeft:oe,scrollPaddingX:oe,scrollPaddingY:oe,scrollPaddingBlock:oe,scrollPaddingBlockEnd:oe,scrollPaddingBlockStart:oe,scrollPaddingInline:oe,scrollPaddingInlineEnd:oe,scrollPaddingInlineStart:oe,fontSize:"fontSizes",background:ze,backgroundColor:ze,backgroundImage:ze,borderImage:ze,border:ze,borderBlock:ze,borderBlockEnd:ze,borderBlockStart:ze,borderBottom:ze,borderBottomColor:ze,borderColor:ze,borderInline:ze,borderInlineEnd:ze,borderInlineStart:ze,borderLeft:ze,borderLeftColor:ze,borderRight:ze,borderRightColor:ze,borderTop:ze,borderTopColor:ze,caretColor:ze,color:ze,columnRuleColor:ze,fill:ze,outline:ze,outlineColor:ze,stroke:ze,textDecorationColor:ze,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Ht,minBlockSize:Ht,maxBlockSize:Ht,inlineSize:Ht,minInlineSize:Ht,maxInlineSize:Ht,width:Ht,minWidth:Ht,maxWidth:Ht,height:Ht,minHeight:Ht,maxHeight:Ht,flexBasis:Ht,gridTemplateColumns:Ht,gridTemplateRows:Ht,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},VH=(t,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,du=()=>{const t=Object.create(null);return(e,n,...r)=>{const o=(i=>JSON.stringify(i,VH))(e);return o in t?t[o]:t[o]=n(e,...r)}},Nd=Symbol.for("sxs.internal"),Dv=(t,e)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),Gx=t=>{for(const e in t)return!0;return!1},{hasOwnProperty:UH}=Object.prototype,i0=t=>t.includes("-")?t:t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),HH=/\s+(?![^()]*\))/,Ys=t=>e=>t(...typeof e=="string"?String(e).split(HH):[e]),Yx={appearance:t=>({WebkitAppearance:t,appearance:t}),backfaceVisibility:t=>({WebkitBackfaceVisibility:t,backfaceVisibility:t}),backdropFilter:t=>({WebkitBackdropFilter:t,backdropFilter:t}),backgroundClip:t=>({WebkitBackgroundClip:t,backgroundClip:t}),boxDecorationBreak:t=>({WebkitBoxDecorationBreak:t,boxDecorationBreak:t}),clipPath:t=>({WebkitClipPath:t,clipPath:t}),content:t=>({content:t.includes('"')||t.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(t)?t:`"${t}"`}),hyphens:t=>({WebkitHyphens:t,hyphens:t}),maskImage:t=>({WebkitMaskImage:t,maskImage:t}),maskSize:t=>({WebkitMaskSize:t,maskSize:t}),tabSize:t=>({MozTabSize:t,tabSize:t}),textSizeAdjust:t=>({WebkitTextSizeAdjust:t,textSizeAdjust:t}),userSelect:t=>({WebkitUserSelect:t,userSelect:t}),marginBlock:Ys((t,e)=>({marginBlockStart:t,marginBlockEnd:e||t})),marginInline:Ys((t,e)=>({marginInlineStart:t,marginInlineEnd:e||t})),maxSize:Ys((t,e)=>({maxBlockSize:t,maxInlineSize:e||t})),minSize:Ys((t,e)=>({minBlockSize:t,minInlineSize:e||t})),paddingBlock:Ys((t,e)=>({paddingBlockStart:t,paddingBlockEnd:e||t})),paddingInline:Ys((t,e)=>({paddingInlineStart:t,paddingInlineEnd:e||t}))},dm=/([\d.]+)([^]*)/,WH=(t,e)=>t.length?t.reduce((n,r)=>(n.push(...e.map(o=>o.includes("&")?o.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(o)?`:is(${r})`:r):r+" "+o)),n),[]):e,qH=(t,e)=>t in KH&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,r,o,i)=>r+(o==="stretch"?`-moz-available${i};${i0(t)}:${r}-webkit-fill-available`:`-moz-fit-content${i};${i0(t)}:${r}fit-content`)+i):String(e),KH={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},ho=t=>t?t+"-":"",pM=(t,e,n)=>t.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,o,i,s,a)=>s=="$"==!!i?r:(o||s=="--"?"calc(":"")+"var(--"+(s==="$"?ho(e)+(a.includes("$")?"":ho(n))+a.replace(/\$/g,"-"):a)+")"+(o||s=="--"?"*"+(o||"")+(i||"1")+")":"")),JH=/\s*,\s*(?![^()]*\))/,GH=Object.prototype.toString,pa=(t,e,n,r,o)=>{let i,s,a;const l=(c,u,d)=>{let h,p;const f=g=>{for(h in g){const w=h.charCodeAt(0)===64,x=w&&Array.isArray(g[h])?g[h]:[g[h]];for(p of x){const k=/[A-Z]/.test(b=h)?b:b.replace(/-[^]/g,E=>E[1].toUpperCase()),S=typeof p=="object"&&p&&p.toString===GH&&(!r.utils[k]||!u.length);if(k in r.utils&&!S){const E=r.utils[k];if(E!==s){s=E,f(E(p)),s=null;continue}}else if(k in Yx){const E=Yx[k];if(E!==a){a=E,f(E(p)),a=null;continue}}if(w&&(y=h.slice(1)in r.media?"@media "+r.media[h.slice(1)]:h,h=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(E,T,j,R,D,H)=>{const L=dm.test(T),G=.0625*(L?-1:1),[F,Q]=L?[R,T]:[T,R];return"("+(j[0]==="="?"":j[0]===">"===L?"max-":"min-")+F+":"+(j[0]!=="="&&j.length===1?Q.replace(dm,(Y,se,z)=>Number(se)+G*(j===">"?1:-1)+z):Q)+(D?") and ("+(D[0]===">"?"min-":"max-")+F+":"+(D.length===1?H.replace(dm,(Y,se,z)=>Number(se)+G*(D===">"?-1:1)+z):H):"")+")"})),S){const E=w?d.concat(h):[...d],T=w?[...u]:WH(u,h.split(JH));i!==void 0&&o(Qx(...i)),i=void 0,l(p,T,E)}else i===void 0&&(i=[[],u,d]),h=w||h.charCodeAt(0)!==36?h:`--${ho(r.prefix)}${h.slice(1).replace(/\$/g,"-")}`,p=S?p:typeof p=="number"?p&&k in YH?String(p)+"px":String(p):pM(qH(k,p??""),r.prefix,r.themeMap[k]),i[0].push(`${w?`${h} `:`${i0(h)}:`}${p}`)}}var y,b};f(c),i!==void 0&&o(Qx(...i)),i=void 0};l(t,e,n)},Qx=(t,e,n)=>`${n.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${t.join(";")}${e.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,YH={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Xx=t=>String.fromCharCode(t+(t>25?39:97)),rs=t=>(e=>{let n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=Xx(n%52)+r;return Xx(n%52)+r})(((e,n)=>{let r=n.length;for(;r;)e=33*e^n.charCodeAt(--r);return e})(5381,JSON.stringify(t))>>>0),Wl=["themed","global","styled","onevar","resonevar","allvar","inline"],QH=t=>{if(t.href&&!t.href.startsWith(location.origin))return!1;try{return!!t.cssRules}catch{return!1}},XH=t=>{let e;const n=()=>{const{cssRules:o}=e.sheet;return[].map.call(o,(i,s)=>{const{cssText:a}=i;let l="";if(a.startsWith("--sxs"))return"";if(o[s-1]&&(l=o[s-1].cssText).startsWith("--sxs")){if(!i.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===i)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return i.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const o=Object(t).styleSheets||[];for(const a of o)if(QH(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const d=Object(c[l+1]);if(d.type!==4)continue;++l;const{cssText:h}=u;if(!h.startsWith("--sxs"))continue;const p=h.slice(14,-3).trim().split(/\s+/),f=Wl[p[0]];f&&(e||(e={sheet:a,reset:r,rules:{},toString:n}),e.rules[f]={group:d,index:l,cache:new Set(p)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,d){this.cssRules.splice(d,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:t?(t.head||t).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:n}}const{sheet:i,rules:s}=e;for(let a=Wl.length-1;a>=0;--a){const l=Wl[a];if(!s[l]){const c=Wl[a+1],u=s[c]?s[c].index:i.cssRules.length;i.insertRule("@media{}",u),i.insertRule(`--sxs{--sxs:${a}}`,u),s[l]={group:i.cssRules[u+1],index:u,cache:new Set([a])}}ZH(s[l])}};return r(),e},ZH=t=>{const e=t.group;let n=e.cssRules.length;t.apply=r=>{try{e.insertRule(r,n),++n}catch{}}},Dl=Symbol(),eW=du(),tW=(t,e)=>eW(t,()=>(...n)=>{let r={type:null,composers:new Set};for(const o of n)if(o!=null)if(o[Nd]){r.type==null&&(r.type=o[Nd].type);for(const i of o[Nd].composers)r.composers.add(i)}else o.constructor!==Object||o.$$typeof?r.type==null&&(r.type=o):r.composers.add(nW(o,t));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),rW(t,r,e)}),nW=({variants:t,compoundVariants:e,defaultVariants:n,...r},o)=>{const i=`${ho(o.prefix)}c-${rs(r)}`,s=[],a=[],l=Object.create(null),c=[];for(const h in n)l[h]=String(n[h]);if(typeof t=="object"&&t)for(const h in t){u=l,d=h,UH.call(u,d)||(l[h]="undefined");const p=t[h];for(const f in p){const g={[h]:String(f)};String(f)==="undefined"&&c.push(h);const y=p[f],b=[g,y,!Gx(y)];s.push(b)}}var u,d;if(typeof e=="object"&&e)for(const h of e){let{css:p,...f}=h;p=typeof p=="object"&&p||{};for(const y in f)f[y]=String(f[y]);const g=[f,p,!Gx(p)];a.push(g)}return[i,r,s,a,l,c]},rW=(t,e,n)=>{const[r,o,i,s]=oW(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(d=>{function h(){for(let p=0;p<h[Dl].length;p++){const[f,g]=h[Dl][p];d.rules[f].apply(g)}return h[Dl]=[],null}return h[Dl]=[],h.rules={},Wl.forEach(p=>h.rules[p]={apply:f=>h[Dl].push([p,f])}),h})(n):null,l=(a||n).rules,c=`.${r}${o.length>1?`:where(.${o.slice(1).join(".")})`:""}`,u=d=>{d=typeof d=="object"&&d||iW;const{css:h,...p}=d,f={};for(const b in i)if(delete p[b],b in d){let w=d[b];typeof w=="object"&&w?f[b]={"@initial":i[b],...w}:(w=String(w),f[b]=w!=="undefined"||s.has(b)?w:i[b])}else f[b]=i[b];const g=new Set([...o]);for(const[b,w,x,k]of e.composers){n.rules.styled.cache.has(b)||(n.rules.styled.cache.add(b),pa(w,[`.${b}`],[],t,T=>{l.styled.apply(T)}));const S=Zx(x,f,t.media),E=Zx(k,f,t.media,!0);for(const T of S)if(T!==void 0)for(const[j,R,D]of T){const H=`${b}-${rs(R)}-${j}`;g.add(H);const L=(D?n.rules.resonevar:n.rules.onevar).cache,G=D?l.resonevar:l.onevar;L.has(H)||(L.add(H),pa(R,[`.${H}`],[],t,F=>{G.apply(F)}))}for(const T of E)if(T!==void 0)for(const[j,R]of T){const D=`${b}-${rs(R)}-${j}`;g.add(D),n.rules.allvar.cache.has(D)||(n.rules.allvar.cache.add(D),pa(R,[`.${D}`],[],t,H=>{l.allvar.apply(H)}))}}if(typeof h=="object"&&h){const b=`${r}-i${rs(h)}-css`;g.add(b),n.rules.inline.cache.has(b)||(n.rules.inline.cache.add(b),pa(h,[`.${b}`],[],t,w=>{l.inline.apply(w)}))}for(const b of String(d.className||"").trim().split(/\s+/))b&&g.add(b);const y=p.className=[...g].join(" ");return{type:e.type,className:y,selector:c,props:p,toString:()=>y,deferredInjector:a}};return Dv(u,{className:r,selector:c,[Nd]:e,toString:()=>(n.rules.styled.cache.has(r)||u(),r)})},oW=t=>{let e="";const n=[],r={},o=[];for(const[i,,,,s,a]of t){e===""&&(e=i),n.push(i),o.push(...a);for(const l in s){const c=s[l];(r[l]===void 0||c!=="undefined"||a.includes(c))&&(r[l]=c)}}return[e,n,r,new Set(o)]},Zx=(t,e,n,r)=>{const o=[];e:for(let[i,s,a]of t){if(a)continue;let l,c=0,u=!1;for(l in i){const d=i[l];let h=e[l];if(h!==d){if(typeof h!="object"||!h)continue e;{let p,f,g=0;for(const y in h){if(d===String(h[y])){if(y!=="@initial"){const b=y.slice(1);(f=f||[]).push(b in n?n[b]:y.replace(/^@media ?/,"")),u=!0}c+=g,p=!0}++g}if(f&&f.length&&(s={["@media "+f.join(", ")]:s}),!p)continue e}}}(o[c]=o[c]||[]).push([r?"cv":`${l}-${i[l]}`,s,u])}return o},iW={},sW=du(),aW=(t,e)=>sW(t,()=>(...n)=>{const r=()=>{for(let o of n){o=typeof o=="object"&&o||{};let i=rs(o);if(!e.rules.global.cache.has(i)){if(e.rules.global.cache.add(i),"@import"in o){let s=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(o["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,s++);delete o["@import"]}pa(o,[],[],t,s=>{e.rules.global.apply(s)})}}return""};return Dv(r,{toString:r})}),lW=du(),cW=(t,e)=>lW(t,()=>n=>{const r=`${ho(t.prefix)}k-${rs(n)}`,o=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const i=[];pa(n,[],[],t,a=>i.push(a));const s=`@keyframes ${r}{${i.join("")}}`;e.rules.global.apply(s)}return r};return Dv(o,{get name(){return o()},toString:o})}),uW=class{constructor(t,e,n,r){this.token=t==null?"":String(t),this.value=e==null?"":String(e),this.scale=n==null?"":String(n),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+ho(this.prefix)+ho(this.scale)+this.token}toString(){return this.computedValue}},dW=du(),hW=(t,e)=>dW(t,()=>(n,r)=>{r=typeof n=="object"&&n||Object(r);const o=`.${n=(n=typeof n=="string"?n:"")||`${ho(t.prefix)}t-${rs(r)}`}`,i={},s=[];for(const l in r){i[l]={};for(const c in r[l]){const u=`--${ho(t.prefix)}${l}-${c}`,d=pM(String(r[l][c]),t.prefix,l);i[l][c]=new uW(c,d,l,t.prefix),s.push(`${u}:${d}`)}}const a=()=>{if(s.length&&!e.rules.themed.cache.has(n)){e.rules.themed.cache.add(n);const l=`${r===t.theme?":root,":""}.${n}{${s.join(";")}}`;e.rules.themed.apply(l)}return n};return{...i,get className(){return a()},selector:o,toString:a}}),pW=du(),fM=t=>{let e=!1;const n=pW(t,r=>{e=!0;const o="prefix"in(r=typeof r=="object"&&r||{})?String(r.prefix):"",i=typeof r.media=="object"&&r.media||{},s=typeof r.root=="object"?r.root||null:globalThis.document||null,a=typeof r.theme=="object"&&r.theme||{},l={prefix:o,media:i,theme:a,themeMap:typeof r.themeMap=="object"&&r.themeMap||{...BH},utils:typeof r.utils=="object"&&r.utils||{}},c=XH(s),u={css:tW(l,c),globalCss:aW(l,c),keyframes:cW(l,c),createTheme:hW(l,c),reset(){c.reset(),u.theme.toString()},theme:{},sheet:c,config:l,prefix:o,getCssText:c.toString,toString:c.toString};return String(u.theme=u.createTheme(a)),u});return e||n.reset(),n},mM=()=>Jx||(Jx=fM()),fW=(...t)=>mM().createTheme(...t),go=(...t)=>mM().css(...t),mW={default:{colors:{brand:"hsl(153 60.0% 53.0%)",brandAccent:"hsl(154 54.8% 45.1%)",brandButtonText:"white",defaultButtonBackground:"white",defaultButtonBackgroundHover:"#eaeaea",defaultButtonBorder:"lightgray",defaultButtonText:"gray",dividerBackground:"#eaeaea",inputBackground:"transparent",inputBorder:"lightgray",inputBorderHover:"gray",inputBorderFocus:"gray",inputText:"black",inputLabelText:"gray",inputPlaceholder:"darkgray",messageText:"#2b805a",messageBackground:"#e7fcf1",messageBorder:"#d0f3e1",messageTextDanger:"#ff6369",messageBackgroundDanger:"#fff8f8",messageBorderDanger:"#822025",anchorTextColor:"gray",anchorTextHoverColor:"darkgray"},space:{spaceSmall:"4px",spaceMedium:"8px",spaceLarge:"16px",labelBottomMargin:"8px",anchorBottomMargin:"4px",emailInputSpacing:"4px",socialAuthSpacing:"4px",buttonPadding:"10px 15px",inputPadding:"10px 15px"},fontSizes:{baseBodySize:"13px",baseInputSize:"14px",baseLabelSize:"14px",baseButtonSize:"14px"},fonts:{bodyFontFamily:"ui-sans-serif, sans-serif",buttonFontFamily:"ui-sans-serif, sans-serif",inputFontFamily:"ui-sans-serif, sans-serif",labelFontFamily:"ui-sans-serif, sans-serif"},borderWidths:{buttonBorderWidth:"1px",inputBorderWidth:"1px"},radii:{borderRadiusButton:"4px",buttonBorderRadius:"4px",inputBorderRadius:"4px"}},dark:{colors:{brandButtonText:"white",defaultButtonBackground:"#2e2e2e",defaultButtonBackgroundHover:"#3e3e3e",defaultButtonBorder:"#3e3e3e",defaultButtonText:"white",dividerBackground:"#2e2e2e",inputBackground:"#1e1e1e",inputBorder:"#3e3e3e",inputBorderHover:"gray",inputBorderFocus:"gray",inputText:"white",inputPlaceholder:"darkgray",messageText:"#85e0b7",messageBackground:"#072719",messageBorder:"#2b805a",messageBackgroundDanger:"#1f1315"}}},at={SIGN_IN:"sign_in",SIGN_UP:"sign_up",FORGOTTEN_PASSWORD:"forgotten_password",MAGIC_LINK:"magic_link",UPDATE_PASSWORD:"update_password",VERIFY_OTP:"verify_otp"},gW="supabase-auth-ui",yW={ROOT:"root",SIGN_IN:at.SIGN_IN,SIGN_UP:at.SIGN_UP,FORGOTTEN_PASSWORD:at.FORGOTTEN_PASSWORD,MAGIC_LINK:at.MAGIC_LINK,UPDATE_PASSWORD:at.UPDATE_PASSWORD,anchor:"ui-anchor",button:"ui-button",container:"ui-container",divider:"ui-divider",input:"ui-input",label:"ui-label",loader:"ui-loader",message:"ui-message"};function js(t,e,n){var r,o;const i=[],s=yW[t];return i.push(n!=null&&n.prependedClassName?(n==null?void 0:n.prependedClassName)+"_"+s:gW+"_"+s),(r=n==null?void 0:n.className)!=null&&r[t]&&i.push((o=n==null?void 0:n.className)==null?void 0:o[t]),((n==null?void 0:n.extend)===void 0||(n==null?void 0:n.extend)===!0)&&i.push(e),i}function s0(t,e){let n;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(Array.isArray(e))for(n=0;n<e.length;n++)t[n]=s0(t[n],e[n]);else for(n in e)t[n]=s0(t[n],e[n]);return t}return e}function hm(t,...e){let n=e.length;for(let r=0;r<n;r++)t=s0(t,e[r]);return t}function vW(t,e){return t.replace(/{{(\w+)}}/g,(n,r)=>e.hasOwnProperty(r)?e[r]:n)}var bW={sign_up:{email_label:"Email address",password_label:"Create a Password",email_input_placeholder:"Your email address",password_input_placeholder:"Your password",button_label:"Sign up",loading_button_label:"Signing up ...",social_provider_text:"Sign in with {{provider}}",link_text:"Don't have an account? Sign up",confirmation_text:"Check your email for the confirmation link"},sign_in:{email_label:"Email address",password_label:"Your Password",email_input_placeholder:"Your email address",password_input_placeholder:"Your password",button_label:"Sign in",loading_button_label:"Signing in ...",social_provider_text:"Sign in with {{provider}}",link_text:"Already have an account? Sign in"},magic_link:{email_input_label:"Email address",email_input_placeholder:"Your email address",button_label:"Send Magic Link",loading_button_label:"Sending Magic Link ...",link_text:"Send a magic link email",confirmation_text:"Check your email for the magic link"},forgotten_password:{email_label:"Email address",password_label:"Your Password",email_input_placeholder:"Your email address",button_label:"Send reset password instructions",loading_button_label:"Sending reset instructions ...",link_text:"Forgot your password?",confirmation_text:"Check your email for the password reset link"},update_password:{password_label:"New password",password_input_placeholder:"Your new password",button_label:"Update password",loading_button_label:"Updating password ...",confirmation_text:"Your password has been updated"},verify_otp:{email_input_label:"Email address",email_input_placeholder:"Your email address",phone_input_label:"Phone number",phone_input_placeholder:"Your phone number",token_input_label:"Token",token_input_placeholder:"Your Otp token",button_label:"Verify token",loading_button_label:"Signing in ..."}};const wW=go({fontFamily:"$bodyFontFamily",fontSize:"$baseBodySize",marginBottom:"$anchorBottomMargin",color:"$anchorTextColor",display:"block",textAlign:"center",textDecoration:"underline","&:hover":{color:"$anchorTextHoverColor"}}),Ji=({children:t,appearance:e,...n})=>{var r;const o=js("anchor",wW(),e);return C.createElement("a",{...n,style:(r=e==null?void 0:e.style)==null?void 0:r.anchor,className:o.join(" ")},t)},xW=go({fontFamily:"$buttonFontFamily",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"$borderRadiusButton",fontSize:"$baseButtonSize",padding:"$buttonPadding",cursor:"pointer",borderWidth:"$buttonBorderWidth",borderStyle:"solid",width:"100%",transitionProperty:"background-color",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"100ms","&:disabled":{opacity:.7,cursor:"unset"},variants:{color:{default:{backgroundColor:"$defaultButtonBackground",color:"$defaultButtonText",borderColor:"$defaultButtonBorder","&:hover:not(:disabled)":{backgroundColor:"$defaultButtonBackgroundHover"}},primary:{backgroundColor:"$brand",color:"$brandButtonText",borderColor:"$brandAccent","&:hover:not(:disabled)":{backgroundColor:"$brandAccent"}}}}}),ol=({children:t,color:e="default",appearance:n,icon:r,loading:o=!1,...i})=>{var s;const a=js("button",xW({color:e}),n);return C.createElement("button",{...i,style:(s=n==null?void 0:n.style)==null?void 0:s.button,className:a.join(" "),disabled:o},r,t)},kW=go({display:"flex",gap:"4px",variants:{direction:{horizontal:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(48px, 1fr))"},vertical:{flexDirection:"column",margin:"8px 0"}},gap:{small:{gap:"4px"},medium:{gap:"8px"},large:{gap:"16px"}}}}),Tr=({children:t,appearance:e,...n})=>{var r;const o=js("container",kW({direction:n.direction,gap:n.gap}),e);return C.createElement("div",{...n,style:(r=e==null?void 0:e.style)==null?void 0:r.container,className:o.join(" ")},t)},SW=go({background:"$dividerBackground",display:"block",margin:"16px 0",height:"1px",width:"100%"}),CW=({children:t,appearance:e,...n})=>{var r;const o=js("divider",SW(),e);return C.createElement("div",{...n,style:(r=e==null?void 0:e.style)==null?void 0:r.divider,className:o.join(" ")})},EW=go({fontFamily:"$inputFontFamily",background:"$inputBackground",borderRadius:"$inputBorderRadius",padding:"$inputPadding",cursor:"text",borderWidth:"$inputBorderWidth",borderColor:"$inputBorder",borderStyle:"solid",fontSize:"$baseInputSize",width:"100%",color:"$inputText",boxSizing:"border-box","&:hover":{borderColor:"$inputBorderHover",outline:"none"},"&:focus":{borderColor:"$inputBorderFocus",outline:"none"},"&::placeholder":{color:"$inputPlaceholder",letterSpacing:"initial"},transitionProperty:"background-color, border",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"100ms",variants:{type:{default:{letterSpacing:"0px"},password:{letterSpacing:"0px"}}}}),si=({children:t,appearance:e,...n})=>{var r;const o=js("input",EW({type:n.type==="password"?"password":"default"}),e);return C.createElement("input",{...n,style:(r=e==null?void 0:e.style)==null?void 0:r.input,className:o.join(" ")},t)},TW=go({fontFamily:"$labelFontFamily",fontSize:"$baseLabelSize",marginBottom:"$labelBottomMargin",color:"$inputLabelText",display:"block"}),ai=({children:t,appearance:e,...n})=>{var r;const o=js("label",TW(),e);return C.createElement("label",{...n,style:(r=e==null?void 0:e.style)==null?void 0:r.label,className:o.join(" ")},t)},NW=go({fontFamily:"$bodyFontFamily",fontSize:"$baseInputSize",marginBottom:"$labelBottomMargin",display:"block",textAlign:"center",borderRadius:"0.375rem",padding:"1.5rem 1rem",lineHeight:"1rem",color:"$messageText",backgroundColor:"$messageBackground",border:"1px solid $messageBorder",variants:{color:{danger:{color:"$messageTextDanger",backgroundColor:"$messageBackgroundDanger",border:"1px solid $messageBorderDanger"}}}}),Rr=({children:t,appearance:e,...n})=>{var r;const o=js("message",NW({color:n.color}),e);return C.createElement("span",{...n,style:(r=e==null?void 0:e.style)==null?void 0:r.message,className:o.join(" ")},t)};function gM({setAuthView:t=()=>{},supabaseClient:e,redirectTo:n,i18n:r,appearance:o,showLinks:i=!1}){var s;const[a,l]=v.useState(""),[c,u]=v.useState(""),[d,h]=v.useState(""),[p,f]=v.useState(!1),g=async b=>{var w,x;if(b.preventDefault(),u(""),h(""),f(!0),a.length===0){u((w=r==null?void 0:r.magic_link)==null?void 0:w.empty_email_address),f(!1);return}const{error:k}=await e.auth.signInWithOtp({email:a,options:{emailRedirectTo:n}});k?u(k.message):h((x=r==null?void 0:r.magic_link)==null?void 0:x.confirmation_text),f(!1)},y=r==null?void 0:r.magic_link;return C.createElement("form",{id:"auth-magic-link",onSubmit:g},C.createElement(Tr,{gap:"large",direction:"vertical",appearance:o},C.createElement("div",null,C.createElement(ai,{htmlFor:"email",appearance:o},y==null?void 0:y.email_input_label),C.createElement(si,{id:"email",name:"email",type:"email",autoFocus:!0,placeholder:y==null?void 0:y.email_input_placeholder,onChange:b=>{u&&u(""),l(b.target.value)},appearance:o})),C.createElement(ol,{color:"primary",type:"submit",loading:p,appearance:o},p?y==null?void 0:y.loading_button_label:y==null?void 0:y.button_label),i&&C.createElement(Ji,{href:"#auth-sign-in",onClick:b=>{b.preventDefault(),t(at.SIGN_IN)},appearance:o},(s=r==null?void 0:r.sign_in)==null?void 0:s.link_text),d&&C.createElement(Rr,{appearance:o},d),c&&C.createElement(Rr,{color:"danger",appearance:o},c)))}const Pt=go({width:"21px",height:"21px"}),MW=({provider:t})=>t=="google"?_W():t=="facebook"?OW():t=="twitter"?jW():t=="apple"?RW():t=="github"?PW():t=="gitlab"?AW():t=="bitbucket"?DW():t=="discord"?IW():t=="azure"?LW():t=="keycloak"?zW():t=="linkedin"?$W():t=="notion"?FW():t=="slack"?BW():t=="spotify"?VW():t=="twitch"?UW():t=="workos"?HW():t=="kakao"?WW():null,_W=()=>C.createElement("svg",{className:Pt(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},C.createElement("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),C.createElement("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),C.createElement("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),C.createElement("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})),OW=()=>C.createElement("svg",{className:Pt(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},C.createElement("path",{fill:"#039be5",d:"M24 5A19 19 0 1 0 24 43A19 19 0 1 0 24 5Z"}),C.createElement("path",{fill:"#fff",d:"M26.572,29.036h4.917l0.772-4.995h-5.69v-2.73c0-2.075,0.678-3.915,2.619-3.915h3.119v-4.359c-0.548-0.074-1.707-0.236-3.897-0.236c-4.573,0-7.254,2.415-7.254,7.917v3.323h-4.701v4.995h4.701v13.729C22.089,42.905,23.032,43,24,43c0.875,0,1.729-0.08,2.572-0.194V29.036z"})),jW=()=>C.createElement("svg",{className:Pt(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},C.createElement("path",{fill:"#03A9F4",d:"M42,12.429c-1.323,0.586-2.746,0.977-4.247,1.162c1.526-0.906,2.7-2.351,3.251-4.058c-1.428,0.837-3.01,1.452-4.693,1.776C34.967,9.884,33.05,9,30.926,9c-4.08,0-7.387,3.278-7.387,7.32c0,0.572,0.067,1.129,0.193,1.67c-6.138-0.308-11.582-3.226-15.224-7.654c-0.64,1.082-1,2.349-1,3.686c0,2.541,1.301,4.778,3.285,6.096c-1.211-0.037-2.351-0.374-3.349-0.914c0,0.022,0,0.055,0,0.086c0,3.551,2.547,6.508,5.923,7.181c-0.617,0.169-1.269,0.263-1.941,0.263c-0.477,0-0.942-0.054-1.392-0.135c0.94,2.902,3.667,5.023,6.898,5.086c-2.528,1.96-5.712,3.134-9.174,3.134c-0.598,0-1.183-0.034-1.761-0.104C9.268,36.786,13.152,38,17.321,38c13.585,0,21.017-11.156,21.017-20.834c0-0.317-0.01-0.633-0.025-0.945C39.763,15.197,41.013,13.905,42,12.429"})),RW=()=>C.createElement("svg",{className:Pt(),fill:"gray",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"21px",height:"21px"}," ",C.createElement("path",{d:"M 15.904297 1.078125 C 15.843359 1.06875 15.774219 1.0746094 15.699219 1.0996094 C 14.699219 1.2996094 13.600391 1.8996094 12.900391 2.5996094 C 12.300391 3.1996094 11.800781 4.1996094 11.800781 5.0996094 C 11.800781 5.2996094 11.999219 5.5 12.199219 5.5 C 13.299219 5.4 14.399609 4.7996094 15.099609 4.0996094 C 15.699609 3.2996094 16.199219 2.4 16.199219 1.5 C 16.199219 1.275 16.087109 1.10625 15.904297 1.078125 z M 16.199219 5.4003906 C 14.399219 5.4003906 13.600391 6.5 12.400391 6.5 C 11.100391 6.5 9.9003906 5.5 8.4003906 5.5 C 6.3003906 5.5 3.0996094 7.4996094 3.0996094 12.099609 C 2.9996094 16.299609 6.8 21 9 21 C 10.3 21 10.600391 20.199219 12.400391 20.199219 C 14.200391 20.199219 14.600391 21 15.900391 21 C 17.400391 21 18.500391 19.399609 19.400391 18.099609 C 19.800391 17.399609 20.100391 17.000391 20.400391 16.400391 C 20.600391 16.000391 20.4 15.600391 20 15.400391 C 17.4 14.100391 16.900781 9.9003906 19.800781 8.4003906 C 20.300781 8.1003906 20.4 7.4992188 20 7.1992188 C 18.9 6.1992187 17.299219 5.4003906 16.199219 5.4003906 z"})),PW=()=>C.createElement("svg",{className:Pt(),fill:"gray",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"21px",height:"21px"}," ",C.createElement("path",{d:"M15,3C8.373,3,3,8.373,3,15c0,5.623,3.872,10.328,9.092,11.63C12.036,26.468,12,26.28,12,26.047v-2.051 c-0.487,0-1.303,0-1.508,0c-0.821,0-1.551-0.353-1.905-1.009c-0.393-0.729-0.461-1.844-1.435-2.526 c-0.289-0.227-0.069-0.486,0.264-0.451c0.615,0.174,1.125,0.596,1.605,1.222c0.478,0.627,0.703,0.769,1.596,0.769 c0.433,0,1.081-0.025,1.691-0.121c0.328-0.833,0.895-1.6,1.588-1.962c-3.996-0.411-5.903-2.399-5.903-5.098 c0-1.162,0.495-2.286,1.336-3.233C9.053,10.647,8.706,8.73,9.435,8c1.798,0,2.885,1.166,3.146,1.481C13.477,9.174,14.461,9,15.495,9 c1.036,0,2.024,0.174,2.922,0.483C18.675,9.17,19.763,8,21.565,8c0.732,0.731,0.381,2.656,0.102,3.594 c0.836,0.945,1.328,2.066,1.328,3.226c0,2.697-1.904,4.684-5.894,5.097C18.199,20.49,19,22.1,19,23.313v2.734 c0,0.104-0.023,0.179-0.035,0.268C23.641,24.676,27,20.236,27,15C27,8.373,21.627,3,15,3z"})),AW=()=>C.createElement("svg",{className:Pt(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},C.createElement("path",{fill:"#e53935",d:"M24 43L16 20 32 20z"}),C.createElement("path",{fill:"#ff7043",d:"M24 43L42 20 32 20z"}),C.createElement("path",{fill:"#e53935",d:"M37 5L42 20 32 20z"}),C.createElement("path",{fill:"#ffa726",d:"M24 43L42 20 45 28z"}),C.createElement("path",{fill:"#ff7043",d:"M24 43L6 20 16 20z"}),C.createElement("path",{fill:"#e53935",d:"M11 5L6 20 16 20z"}),C.createElement("path",{fill:"#ffa726",d:"M24 43L6 20 3 28z"})),DW=()=>C.createElement("svg",{className:Pt(),xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 62.42 62.42"},C.createElement("defs",null,C.createElement("linearGradient",{id:"New_Gradient_Swatch_1",x1:"64.01",y1:"30.27",x2:"32.99",y2:"54.48",gradientUnits:"userSpaceOnUse"},C.createElement("stop",{offset:"0.18",stopColor:"#0052cc"}),C.createElement("stop",{offset:"1",stopColor:"#2684ff"}))),C.createElement("title",null,"Bitbucket-blue"),C.createElement("g",{id:"Layer_2","data-name":"Layer 2"},C.createElement("g",{id:"Blue",transform:"translate(0 -3.13)"},C.createElement("path",{d:"M2,6.26A2,2,0,0,0,0,8.58L8.49,60.12a2.72,2.72,0,0,0,2.66,2.27H51.88a2,2,0,0,0,2-1.68L62.37,8.59a2,2,0,0,0-2-2.32ZM37.75,43.51h-13L21.23,25.12H40.9Z",fill:"#2684ff"}),C.createElement("path",{d:"M59.67,25.12H40.9L37.75,43.51h-13L9.4,61.73a2.71,2.71,0,0,0,1.75.66H51.89a2,2,0,0,0,2-1.68Z",fill:"url(#New_Gradient_Swatch_1)"})))),IW=()=>C.createElement("svg",{className:Pt(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},C.createElement("path",{fill:"#536dfe",d:"M39.248,10.177c-2.804-1.287-5.812-2.235-8.956-2.778c-0.057-0.01-0.114,0.016-0.144,0.068	c-0.387,0.688-0.815,1.585-1.115,2.291c-3.382-0.506-6.747-0.506-10.059,0c-0.3-0.721-0.744-1.603-1.133-2.291	c-0.03-0.051-0.087-0.077-0.144-0.068c-3.143,0.541-6.15,1.489-8.956,2.778c-0.024,0.01-0.045,0.028-0.059,0.051	c-5.704,8.522-7.267,16.835-6.5,25.044c0.003,0.04,0.026,0.079,0.057,0.103c3.763,2.764,7.409,4.442,10.987,5.554	c0.057,0.017,0.118-0.003,0.154-0.051c0.846-1.156,1.601-2.374,2.248-3.656c0.038-0.075,0.002-0.164-0.076-0.194	c-1.197-0.454-2.336-1.007-3.432-1.636c-0.087-0.051-0.094-0.175-0.014-0.234c0.231-0.173,0.461-0.353,0.682-0.534	c0.04-0.033,0.095-0.04,0.142-0.019c7.201,3.288,14.997,3.288,22.113,0c0.047-0.023,0.102-0.016,0.144,0.017	c0.22,0.182,0.451,0.363,0.683,0.536c0.08,0.059,0.075,0.183-0.012,0.234c-1.096,0.641-2.236,1.182-3.434,1.634	c-0.078,0.03-0.113,0.12-0.075,0.196c0.661,1.28,1.415,2.498,2.246,3.654c0.035,0.049,0.097,0.07,0.154,0.052	c3.595-1.112,7.241-2.79,11.004-5.554c0.033-0.024,0.054-0.061,0.057-0.101c0.917-9.491-1.537-17.735-6.505-25.044	C39.293,10.205,39.272,10.187,39.248,10.177z M16.703,30.273c-2.168,0-3.954-1.99-3.954-4.435s1.752-4.435,3.954-4.435	c2.22,0,3.989,2.008,3.954,4.435C20.658,28.282,18.906,30.273,16.703,30.273z M31.324,30.273c-2.168,0-3.954-1.99-3.954-4.435	s1.752-4.435,3.954-4.435c2.22,0,3.989,2.008,3.954,4.435C35.278,28.282,33.544,30.273,31.324,30.273z"})),LW=()=>C.createElement("svg",{className:Pt(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},C.createElement("linearGradient",{id:"k8yl7~hDat~FaoWq8WjN6a",x1:"-1254.397",x2:"-1261.911",y1:"877.268",y2:"899.466",gradientTransform:"translate(1981.75 -1362.063) scale(1.5625)",gradientUnits:"userSpaceOnUse"},C.createElement("stop",{offset:"0",stopColor:"#114a8b"}),C.createElement("stop",{offset:"1",stopColor:"#0669bc"})),C.createElement("path",{fill:"url(#k8yl7~hDat~FaoWq8WjN6a)",d:"M17.634,6h11.305L17.203,40.773c-0.247,0.733-0.934,1.226-1.708,1.226H6.697 c-0.994,0-1.8-0.806-1.8-1.8c0-0.196,0.032-0.39,0.094-0.576L15.926,7.227C16.173,6.494,16.86,6,17.634,6L17.634,6z"}),C.createElement("path",{fill:"#0078d4",d:"M34.062,29.324H16.135c-0.458-0.001-0.83,0.371-0.831,0.829c0,0.231,0.095,0.451,0.264,0.608 l11.52,10.752C27.423,41.826,27.865,42,28.324,42h10.151L34.062,29.324z"}),C.createElement("linearGradient",{id:"k8yl7~hDat~FaoWq8WjN6b",x1:"-1252.05",x2:"-1253.788",y1:"887.612",y2:"888.2",gradientTransform:"translate(1981.75 -1362.063) scale(1.5625)",gradientUnits:"userSpaceOnUse"},C.createElement("stop",{offset:"0",stopOpacity:".3"}),C.createElement("stop",{offset:".071",stopOpacity:".2"}),C.createElement("stop",{offset:".321",stopOpacity:".1"}),C.createElement("stop",{offset:".623",stopOpacity:".05"}),C.createElement("stop",{offset:"1",stopOpacity:"0"})),C.createElement("path",{fill:"url(#k8yl7~hDat~FaoWq8WjN6b)",d:"M17.634,6c-0.783-0.003-1.476,0.504-1.712,1.25L5.005,39.595 c-0.335,0.934,0.151,1.964,1.085,2.299C6.286,41.964,6.493,42,6.702,42h9.026c0.684-0.122,1.25-0.603,1.481-1.259l2.177-6.416 l7.776,7.253c0.326,0.27,0.735,0.419,1.158,0.422h10.114l-4.436-12.676l-12.931,0.003L28.98,6H17.634z"}),C.createElement("linearGradient",{id:"k8yl7~hDat~FaoWq8WjN6c",x1:"-1252.952",x2:"-1244.704",y1:"876.6",y2:"898.575",gradientTransform:"translate(1981.75 -1362.063) scale(1.5625)",gradientUnits:"userSpaceOnUse"},C.createElement("stop",{offset:"0",stopColor:"#3ccbf4"}),C.createElement("stop",{offset:"1",stopColor:"#2892df"})),C.createElement("path",{fill:"url(#k8yl7~hDat~FaoWq8WjN6c)",d:"M32.074,7.225C31.827,6.493,31.141,6,30.368,6h-12.6c0.772,0,1.459,0.493,1.705,1.224 l10.935,32.399c0.318,0.942-0.188,1.963-1.13,2.281C29.093,41.968,28.899,42,28.703,42h12.6c0.994,0,1.8-0.806,1.8-1.801 c0-0.196-0.032-0.39-0.095-0.575L32.074,7.225z"})),zW=()=>C.createElement("svg",{className:Pt(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C.createElement("path",{d:"M472.136 163.959H408.584C407.401 163.959 406.218 163.327 405.666 162.3L354.651 73.6591C354.02 72.632 352.916 72 351.654 72H143.492C142.309 72 141.126 72.632 140.574 73.6591L87.5084 165.618L36.414 254.259C35.862 255.286 35.862 256.55 36.414 257.656L87.5084 346.297L140.495 438.335C141.047 439.362 142.23 440.073 143.413 439.994H351.654C352.837 439.994 354.02 439.362 354.651 438.335L405.745 349.694C406.297 348.667 407.48 347.956 408.663 348.035H472.215C474.344 348.035 476 346.297 476 344.243V167.83C475.921 165.697 474.186 163.959 472.136 163.959ZM228.728 349.694L212.721 377.345C212.485 377.74 212.091 378.135 211.696 378.372C211.223 378.609 210.75 378.767 210.198 378.767H178.422C177.318 378.767 176.293 378.214 175.82 377.187L128.431 294.787L123.779 286.65L106.748 257.498C106.511 257.103 106.353 256.629 106.432 256.076C106.432 255.602 106.59 255.049 106.827 254.654L123.937 224.949L175.899 134.886C176.451 133.938 177.476 133.306 178.501 133.306H210.198C210.75 133.306 211.302 133.464 211.854 133.701C212.248 133.938 212.643 134.254 212.879 134.728L228.886 162.537C229.359 163.485 229.28 164.67 228.728 165.539L177.397 254.654C177.16 255.049 177.081 255.523 177.081 255.918C177.081 256.392 177.239 256.787 177.397 257.182L228.728 346.218C229.438 347.403 229.359 348.667 228.728 349.694V349.694ZM388.083 257.498L371.051 286.65L366.399 294.787L319.011 377.187C318.459 378.135 317.512 378.767 316.409 378.767H284.632C284.08 378.767 283.607 378.609 283.134 378.372C282.74 378.135 282.346 377.819 282.109 377.345L266.103 349.694C265.393 348.667 265.393 347.403 266.024 346.376L317.355 257.34C317.591 256.945 317.67 256.471 317.67 256.076C317.67 255.602 317.513 255.207 317.355 254.812L266.024 165.697C265.472 164.749 265.393 163.643 265.866 162.695L281.873 134.886C282.109 134.491 282.503 134.096 282.898 133.859C283.371 133.543 283.923 133.464 284.553 133.464H316.409C317.512 133.464 318.538 134.017 319.011 135.044L370.972 225.107L388.083 254.812C388.319 255.286 388.477 255.76 388.477 256.234C388.477 256.55 388.319 257.024 388.083 257.498V257.498Z",fill:"#008AAA"})),$W=()=>C.createElement("svg",{className:Pt(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},C.createElement("path",{fill:"#0288D1",d:"M42,37c0,2.762-2.238,5-5,5H11c-2.761,0-5-2.238-5-5V11c0-2.762,2.239-5,5-5h26c2.762,0,5,2.238,5,5V37z"}),C.createElement("path",{fill:"#FFF",d:"M12 19H17V36H12zM14.485 17h-.028C12.965 17 12 15.888 12 14.499 12 13.08 12.995 12 14.514 12c1.521 0 2.458 1.08 2.486 2.499C17 15.887 16.035 17 14.485 17zM36 36h-5v-9.099c0-2.198-1.225-3.698-3.192-3.698-1.501 0-2.313 1.012-2.707 1.99C24.957 25.543 25 26.511 25 27v9h-5V19h5v2.616C25.721 20.5 26.85 19 29.738 19c3.578 0 6.261 2.25 6.261 7.274L36 36 36 36z"})),FW=()=>C.createElement("svg",{className:Pt(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px",fillRule:"evenodd",clipRule:"evenodd"},C.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.553,11.099c1.232,1.001,1.694,0.925,4.008,0.77 l21.812-1.31c0.463,0,0.078-0.461-0.076-0.538l-3.622-2.619c-0.694-0.539-1.619-1.156-3.391-1.002l-21.12,1.54 c-0.77,0.076-0.924,0.461-0.617,0.77L11.553,11.099z",clipRule:"evenodd"}),C.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M12.862,16.182v22.95c0,1.233,0.616,1.695,2.004,1.619 l23.971-1.387c1.388-0.076,1.543-0.925,1.543-1.927V14.641c0-1-0.385-1.54-1.234-1.463l-25.05,1.463 C13.171,14.718,12.862,15.181,12.862,16.182L12.862,16.182z",clipRule:"evenodd"}),C.createElement("path",{fill:"#424242",fillRule:"evenodd",d:"M11.553,11.099c1.232,1.001,1.694,0.925,4.008,0.77 l21.812-1.31c0.463,0,0.078-0.461-0.076-0.538l-3.622-2.619c-0.694-0.539-1.619-1.156-3.391-1.002l-21.12,1.54 c-0.77,0.076-0.924,0.461-0.617,0.77L11.553,11.099z M12.862,16.182v22.95c0,1.233,0.616,1.695,2.004,1.619l23.971-1.387 c1.388-0.076,1.543-0.925,1.543-1.927V14.641c0-1-0.385-1.54-1.234-1.463l-25.05,1.463C13.171,14.718,12.862,15.181,12.862,16.182 L12.862,16.182z M36.526,17.413c0.154,0.694,0,1.387-0.695,1.465l-1.155,0.23v16.943c-1.003,0.539-1.928,0.847-2.698,0.847 c-1.234,0-1.543-0.385-2.467-1.54l-7.555-11.86v11.475l2.391,0.539c0,0,0,1.386-1.929,1.386l-5.317,0.308 c-0.154-0.308,0-1.078,0.539-1.232l1.388-0.385V20.418l-1.927-0.154c-0.155-0.694,0.23-1.694,1.31-1.772l5.704-0.385l7.862,12.015 V19.493l-2.005-0.23c-0.154-0.848,0.462-1.464,1.233-1.54L36.526,17.413z M7.389,5.862l21.968-1.618 c2.698-0.231,3.392-0.076,5.087,1.155l7.013,4.929C42.614,11.176,43,11.407,43,12.33v27.032c0,1.694-0.617,2.696-2.775,2.849 l-25.512,1.541c-1.62,0.077-2.391-0.154-3.239-1.232l-5.164-6.7C5.385,34.587,5,33.664,5,32.585V8.556 C5,7.171,5.617,6.015,7.389,5.862z",clipRule:"evenodd"})),BW=()=>C.createElement("svg",{className:Pt(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},C.createElement("path",{fill:"#33d375",d:"M33,8c0-2.209-1.791-4-4-4s-4,1.791-4,4c0,1.254,0,9.741,0,11c0,2.209,1.791,4,4,4s4-1.791,4-4	C33,17.741,33,9.254,33,8z"}),C.createElement("path",{fill:"#33d375",d:"M43,19c0,2.209-1.791,4-4,4c-1.195,0-4,0-4,0s0-2.986,0-4c0-2.209,1.791-4,4-4S43,16.791,43,19z"}),C.createElement("path",{fill:"#40c4ff",d:"M8,14c-2.209,0-4,1.791-4,4s1.791,4,4,4c1.254,0,9.741,0,11,0c2.209,0,4-1.791,4-4s-1.791-4-4-4	C17.741,14,9.254,14,8,14z"}),C.createElement("path",{fill:"#40c4ff",d:"M19,4c2.209,0,4,1.791,4,4c0,1.195,0,4,0,4s-2.986,0-4,0c-2.209,0-4-1.791-4-4S16.791,4,19,4z"}),C.createElement("path",{fill:"#e91e63",d:"M14,39.006C14,41.212,15.791,43,18,43s4-1.788,4-3.994c0-1.252,0-9.727,0-10.984	c0-2.206-1.791-3.994-4-3.994s-4,1.788-4,3.994C14,29.279,14,37.754,14,39.006z"}),C.createElement("path",{fill:"#e91e63",d:"M4,28.022c0-2.206,1.791-3.994,4-3.994c1.195,0,4,0,4,0s0,2.981,0,3.994c0,2.206-1.791,3.994-4,3.994	S4,30.228,4,28.022z"}),C.createElement("path",{fill:"#ffc107",d:"M39,33c2.209,0,4-1.791,4-4s-1.791-4-4-4c-1.254,0-9.741,0-11,0c-2.209,0-4,1.791-4,4s1.791,4,4,4	C29.258,33,37.746,33,39,33z"}),C.createElement("path",{fill:"#ffc107",d:"M28,43c-2.209,0-4-1.791-4-4c0-1.195,0-4,0-4s2.986,0,4,0c2.209,0,4,1.791,4,4S30.209,43,28,43z"})),VW=()=>C.createElement("svg",{className:Pt(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C.createElement("path",{d:"M255.498 31.0034C131.513 31.0034 31 131.515 31 255.502C31 379.492 131.513 480 255.498 480C379.497 480 480 379.495 480 255.502C480 131.522 379.497 31.0135 255.495 31.0135L255.498 31V31.0034ZM358.453 354.798C354.432 361.391 345.801 363.486 339.204 359.435C286.496 327.237 220.139 319.947 141.993 337.801C134.463 339.516 126.957 334.798 125.24 327.264C123.516 319.731 128.217 312.225 135.767 310.511C221.284 290.972 294.639 299.384 353.816 335.549C360.413 339.596 362.504 348.2 358.453 354.798ZM385.932 293.67C380.864 301.903 370.088 304.503 361.858 299.438C301.512 262.345 209.528 251.602 138.151 273.272C128.893 276.067 119.118 270.851 116.309 261.61C113.521 252.353 118.74 242.597 127.981 239.782C209.512 215.044 310.87 227.026 380.17 269.612C388.4 274.68 391 285.456 385.935 293.676V293.673L385.932 293.67ZM388.293 230.016C315.935 187.039 196.56 183.089 127.479 204.055C116.387 207.42 104.654 201.159 101.293 190.063C97.9326 178.964 104.189 167.241 115.289 163.87C194.59 139.796 326.418 144.446 409.723 193.902C419.722 199.826 422.995 212.71 417.068 222.675C411.168 232.653 398.247 235.943 388.303 230.016H388.293V230.016Z",fill:"#1ED760"})),UW=()=>C.createElement("svg",{className:Pt(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C.createElement("path",{d:"M416 240L352 304H288L232 360V304H160V64H416V240Z",fill:"white"}),C.createElement("path",{d:"M144 32L64 112V400H160V480L240 400H304L448 256V32H144ZM416 240L352 304H288L232 360V304H160V64H416V240Z",fill:"#9146FF"}),C.createElement("path",{d:"M368 120H336V216H368V120Z",fill:"#9146FF"}),C.createElement("path",{d:"M280 120H248V216H280V120Z",fill:"#9146FF"})),HW=()=>C.createElement("svg",{className:Pt(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C.createElement("path",{d:"M33 256.043C33 264.556 35.3159 273.069 39.4845 280.202L117.993 415.493C126.098 429.298 138.373 440.572 153.657 445.634C183.764 455.528 214.797 442.873 229.618 417.333L248.609 384.661L173.806 256.043L252.777 119.831L271.768 87.1591C277.557 77.2654 284.968 69.4424 294 63H285.894H172.185C150.878 63 131.193 74.2742 120.54 92.6812L39.7161 231.884C35.3159 239.016 33 247.53 33 256.043Z",fill:"#6363F1"}),C.createElement("path",{d:"M480 256.058C480 247.539 477.684 239.021 473.516 231.883L393.849 94.6596C379.028 69.3331 347.995 56.4396 317.888 66.34C302.603 71.4053 290.329 82.6871 282.224 96.5015L264.391 127.354L339.194 256.058L260.223 392.131L241.232 424.825C235.443 434.495 228.032 442.553 219 449H227.106H340.815C362.122 449 381.807 437.718 392.46 419.299L473.284 280.003C477.684 272.866 480 264.577 480 256.058Z",fill:"#6363F1"})),WW=()=>C.createElement("svg",{className:Pt(),xmlns:"http://www.w3.org/2000/svg",width:"2500",height:"2500",viewBox:"0 0 256 256"},C.createElement("path",{fill:"#FFE812",d:"M256 236c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20V20C0 8.954 8.954 0 20 0h216c11.046 0 20 8.954 20 20v216z"}),C.createElement("path",{d:"M128 36C70.562 36 24 72.713 24 118c0 29.279 19.466 54.97 48.748 69.477-1.593 5.494-10.237 35.344-10.581 37.689 0 0-.207 1.762.934 2.434s2.483.15 2.483.15c3.272-.457 37.943-24.811 43.944-29.04 5.995.849 12.168 1.29 18.472 1.29 57.438 0 104-36.712 104-82 0-45.287-46.562-82-104-82z"}),C.createElement("path",{fill:"#FFE812",d:"M70.5 146.625c-3.309 0-6-2.57-6-5.73V105.25h-9.362c-3.247 0-5.888-2.636-5.888-5.875s2.642-5.875 5.888-5.875h30.724c3.247 0 5.888 2.636 5.888 5.875s-2.642 5.875-5.888 5.875H76.5v35.645c0 3.16-2.691 5.73-6 5.73zM123.112 146.547c-2.502 0-4.416-1.016-4.993-2.65l-2.971-7.778-18.296-.001-2.973 7.783c-.575 1.631-2.488 2.646-4.99 2.646a9.155 9.155 0 0 1-3.814-.828c-1.654-.763-3.244-2.861-1.422-8.52l14.352-37.776c1.011-2.873 4.082-5.833 7.99-5.922 3.919.088 6.99 3.049 8.003 5.928l14.346 37.759c1.826 5.672.236 7.771-1.418 8.532a9.176 9.176 0 0 1-3.814.827c-.001 0 0 0 0 0zm-11.119-21.056L106 108.466l-5.993 17.025h11.986zM138 145.75c-3.171 0-5.75-2.468-5.75-5.5V99.5c0-3.309 2.748-6 6.125-6s6.125 2.691 6.125 6v35.25h12.75c3.171 0 5.75 2.468 5.75 5.5s-2.579 5.5-5.75 5.5H138zM171.334 146.547c-3.309 0-6-2.691-6-6V99.5c0-3.309 2.691-6 6-6s6 2.691 6 6v12.896l16.74-16.74c.861-.861 2.044-1.335 3.328-1.335 1.498 0 3.002.646 4.129 1.772 1.051 1.05 1.678 2.401 1.764 3.804.087 1.415-.384 2.712-1.324 3.653l-13.673 13.671 14.769 19.566a5.951 5.951 0 0 1 1.152 4.445 5.956 5.956 0 0 1-2.328 3.957 5.94 5.94 0 0 1-3.609 1.211 5.953 5.953 0 0 1-4.793-2.385l-14.071-18.644-2.082 2.082v13.091a6.01 6.01 0 0 1-6.002 6.003z"}));function qW({supabaseClient:t,socialLayout:e="vertical",providers:n=["github","google","azure"],providerScopes:r,queryParams:o,redirectTo:i,onlyThirdPartyProviders:s=!0,view:a="sign_in",i18n:l,appearance:c}){const[u,d]=v.useState(!1),[h,p]=v.useState(""),f=e==="vertical",g=a==="magic_link"?"sign_in":a,y=async w=>{d(!0);const{error:x}=await t.auth.signInWithOAuth({provider:w,options:{redirectTo:i,scopes:r==null?void 0:r[w],queryParams:o}});x&&p(x.message),d(!1)};function b(w){const x=w.toLowerCase();return w.charAt(0).toUpperCase()+x.slice(1)}return C.createElement(C.Fragment,null,n&&n.length>0&&C.createElement(C.Fragment,null,C.createElement(Tr,{gap:"large",direction:"vertical",appearance:c},C.createElement(Tr,{direction:f?"vertical":"horizontal",gap:f?"small":"medium",appearance:c},n.map(w=>{var x;return C.createElement(ol,{key:w,color:"default",loading:u,onClick:()=>y(w),appearance:c},C.createElement(MW,{provider:w}),f&&vW((x=l==null?void 0:l[g])==null?void 0:x.social_provider_text,{provider:b(w)}))}))),!s&&C.createElement(CW,{appearance:c})))}function ek({authView:t="sign_in",defaultEmail:e="",defaultPassword:n="",setAuthView:r=()=>{},setDefaultEmail:o=f=>{},setDefaultPassword:i=f=>{},supabaseClient:s,showLinks:a=!1,redirectTo:l,additionalData:c,magicLink:u,i18n:d,appearance:h,children:p}){var f,g,y,b;const w=v.useRef(!0),[x,k]=v.useState(e),[S,E]=v.useState(n),[T,j]=v.useState(""),[R,D]=v.useState(!1),[H,L]=v.useState("");v.useEffect(()=>(w.current=!0,k(e),E(n),()=>{w.current=!1}),[t]);const G=async Y=>{var se;switch(Y.preventDefault(),j(""),D(!0),t){case"sign_in":const{error:z}=await s.auth.signInWithPassword({email:x,password:S});z&&j(z.message);break;case"sign_up":let A={emailRedirectTo:l};c&&(A.data=c);const{data:{user:M,session:N},error:$}=await s.auth.signUp({email:x,password:S,options:A});$?j($.message):M&&!N&&L((se=d==null?void 0:d.sign_up)==null?void 0:se.confirmation_text);break}w.current&&D(!1)},F=Y=>{o(x),i(S),r(Y)},Q=d==null?void 0:d[t];return C.createElement("form",{id:t==="sign_in"?"auth-sign-in":"auth-sign-up",onSubmit:G,autoComplete:"on",style:{width:"100%"}},C.createElement(Tr,{direction:"vertical",gap:"large",appearance:h},C.createElement(Tr,{direction:"vertical",gap:"large",appearance:h},C.createElement("div",null,C.createElement(ai,{htmlFor:"email",appearance:h},Q==null?void 0:Q.email_label),C.createElement(si,{id:"email",type:"email",name:"email",placeholder:Q==null?void 0:Q.email_input_placeholder,defaultValue:x,onChange:Y=>k(Y.target.value),autoComplete:"email",appearance:h})),C.createElement("div",null,C.createElement(ai,{htmlFor:"password",appearance:h},Q==null?void 0:Q.password_label),C.createElement(si,{id:"password",type:"password",name:"password",placeholder:Q==null?void 0:Q.password_input_placeholder,defaultValue:S,onChange:Y=>E(Y.target.value),autoComplete:t==="sign_in"?"current-password":"new-password",appearance:h})),p),C.createElement(ol,{type:"submit",color:"primary",loading:R,appearance:h},R?Q==null?void 0:Q.loading_button_label:Q==null?void 0:Q.button_label),a&&C.createElement(Tr,{direction:"vertical",gap:"small",appearance:h},t===at.SIGN_IN&&u&&C.createElement(Ji,{href:"#auth-magic-link",onClick:Y=>{Y.preventDefault(),r(at.MAGIC_LINK)},appearance:h},(f=d==null?void 0:d.magic_link)==null?void 0:f.link_text),t===at.SIGN_IN&&C.createElement(Ji,{href:"#auth-forgot-password",onClick:Y=>{Y.preventDefault(),r(at.FORGOTTEN_PASSWORD)},appearance:h},(g=d==null?void 0:d.forgotten_password)==null?void 0:g.link_text),t===at.SIGN_IN?C.createElement(Ji,{href:"#auth-sign-up",onClick:Y=>{Y.preventDefault(),F(at.SIGN_UP)},appearance:h},(y=d==null?void 0:d.sign_up)==null?void 0:y.link_text):C.createElement(Ji,{href:"#auth-sign-in",onClick:Y=>{Y.preventDefault(),F(at.SIGN_IN)},appearance:h},(b=d==null?void 0:d.sign_in)==null?void 0:b.link_text))),H&&C.createElement(Rr,{appearance:h},H),T&&C.createElement(Rr,{color:"danger",appearance:h},T))}function yM({setAuthView:t=()=>{},supabaseClient:e,redirectTo:n,i18n:r,appearance:o,showLinks:i=!1}){var s;const[a,l]=v.useState(""),[c,u]=v.useState(""),[d,h]=v.useState(""),[p,f]=v.useState(!1),g=async b=>{var w;b.preventDefault(),u(""),h(""),f(!0);const{error:x}=await e.auth.resetPasswordForEmail(a,{redirectTo:n});x?u(x.message):h((w=r==null?void 0:r.forgotten_password)==null?void 0:w.confirmation_text),f(!1)},y=r==null?void 0:r.forgotten_password;return C.createElement("form",{id:"auth-forgot-password",onSubmit:g},C.createElement(Tr,{direction:"vertical",gap:"large",appearance:o},C.createElement(Tr,{gap:"large",direction:"vertical",appearance:o},C.createElement("div",null,C.createElement(ai,{htmlFor:"email",appearance:o},y==null?void 0:y.email_label),C.createElement(si,{id:"email",name:"email",type:"email",autoFocus:!0,placeholder:y==null?void 0:y.email_input_placeholder,onChange:b=>l(b.target.value),appearance:o})),C.createElement(ol,{type:"submit",color:"primary",loading:p,appearance:o},p?y==null?void 0:y.loading_button_label:y==null?void 0:y.button_label),i&&C.createElement(Ji,{href:"#auth-sign-in",onClick:b=>{b.preventDefault(),t(at.SIGN_IN)},appearance:o},(s=r==null?void 0:r.sign_in)==null?void 0:s.link_text),d&&C.createElement(Rr,{appearance:o},d),c&&C.createElement(Rr,{color:"danger",appearance:o},c))))}function vM({supabaseClient:t,i18n:e,appearance:n}){const[r,o]=v.useState(""),[i,s]=v.useState(""),[a,l]=v.useState(""),[c,u]=v.useState(!1),d=async p=>{var f;p.preventDefault(),s(""),l(""),u(!0);const{error:g}=await t.auth.updateUser({password:r});g?s(g.message):l((f=e==null?void 0:e.update_password)==null?void 0:f.confirmation_text),u(!1)},h=e==null?void 0:e.update_password;return C.createElement("form",{id:"auth-update-password",onSubmit:d},C.createElement(Tr,{gap:"large",direction:"vertical",appearance:n},C.createElement("div",null,C.createElement(ai,{htmlFor:"password",appearance:n},h==null?void 0:h.password_label),C.createElement(si,{id:"password",name:"password",placeholder:h==null?void 0:h.password_input_placeholder,type:"password",autoFocus:!0,onChange:p=>o(p.target.value),appearance:n})),C.createElement(ol,{type:"submit",color:"primary",loading:c,appearance:n},c?h==null?void 0:h.loading_button_label:h==null?void 0:h.button_label),a&&C.createElement(Rr,{appearance:n},a),i&&C.createElement(Rr,{color:"danger",appearance:n},i)))}function KW({setAuthView:t=()=>{},supabaseClient:e,otpType:n="email",i18n:r,appearance:o,showLinks:i=!1}){var s;const[a,l]=v.useState(""),[c,u]=v.useState(""),[d,h]=v.useState(""),[p,f]=v.useState(""),[g,y]=v.useState(""),[b,w]=v.useState(!1),x=async S=>{S.preventDefault(),f(""),y(""),w(!0);let E={email:a,token:d,type:n};["sms","phone_change"].includes(n)&&(E={phone:c,token:d,type:n});const{error:T}=await e.auth.verifyOtp(E);T&&f(T.message),w(!1)},k=r==null?void 0:r.verify_otp;return C.createElement("form",{id:"auth-magic-link",onSubmit:x},C.createElement(Tr,{gap:"large",direction:"vertical",appearance:o},["sms","phone_change"].includes(n)?C.createElement("div",null,C.createElement(ai,{htmlFor:"phone",appearance:o},k==null?void 0:k.phone_input_label),C.createElement(si,{id:"phone",name:"phone",type:"text",autoFocus:!0,placeholder:k==null?void 0:k.phone_input_placeholder,onChange:S=>u(S.target.value),appearance:o})):C.createElement("div",null,C.createElement(ai,{htmlFor:"email",appearance:o},k==null?void 0:k.email_input_label),C.createElement(si,{id:"email",name:"email",type:"email",autoFocus:!0,placeholder:k==null?void 0:k.email_input_placeholder,onChange:S=>l(S.target.value),appearance:o})),C.createElement("div",null,C.createElement(ai,{htmlFor:"token",appearance:o},k==null?void 0:k.token_input_label),C.createElement(si,{id:"token",name:"token",type:"text",placeholder:k==null?void 0:k.token_input_placeholder,onChange:S=>h(S.target.value),appearance:o})),C.createElement(ol,{color:"primary",type:"submit",loading:b,appearance:o},b?k==null?void 0:k.loading_button_label:k==null?void 0:k.button_label),i&&C.createElement(Ji,{href:"#auth-sign-in",onClick:S=>{S.preventDefault(),t(at.SIGN_IN)},appearance:o},(s=r==null?void 0:r.sign_in)==null?void 0:s.link_text),g&&C.createElement(Rr,{appearance:o},g),p&&C.createElement(Rr,{color:"danger",appearance:o},p)))}const bM=v.createContext({user:null,session:null}),JW=t=>{const{supabaseClient:e}=t,[n,r]=v.useState(null),[o,i]=v.useState((n==null?void 0:n.user)??null);v.useEffect(()=>{(async()=>{var l;const{data:c}=await e.auth.getSession();r(c.session),i(((l=c.session)==null?void 0:l.user)??null)})();const{data:a}=e.auth.onAuthStateChange(async(l,c)=>{r(c),i((c==null?void 0:c.user)??null)});return()=>{a==null||a.subscription.unsubscribe()}},[]);const s={session:n,user:o};return C.createElement(bM.Provider,{value:s,...t})},GW=()=>{const t=v.useContext(bM);if(t===void 0)throw new Error("useUser must be used within a UserContextProvider.");return t};function il({supabaseClient:t,socialLayout:e="vertical",providers:n,providerScopes:r,queryParams:o,view:i="sign_in",redirectTo:s,onlyThirdPartyProviders:a=!1,magicLink:l=!1,showLinks:c=!0,appearance:u,theme:d="default",localization:h={variables:{}},otpType:p="email",additionalData:f,children:g}){const y=hm(bW,h.variables??{}),[b,w]=v.useState(i),[x,k]=v.useState(""),[S,E]=v.useState(""),T=b==="sign_in"||b==="sign_up"||b==="magic_link";v.useEffect(()=>{var D,H;fM({theme:hm(((D=u==null?void 0:u.theme)==null?void 0:D.default)??{},((H=u==null?void 0:u.variables)==null?void 0:H.default)??{})})},[u]);const j=({children:D})=>{var H;return C.createElement("div",{className:d!=="default"?fW(hm(u==null?void 0:u.theme[d],((H=u==null?void 0:u.variables)==null?void 0:H[d])??{})):""},T&&C.createElement(qW,{appearance:u,supabaseClient:t,providers:n,providerScopes:r,queryParams:o,socialLayout:e,redirectTo:s,onlyThirdPartyProviders:a,i18n:y,view:b}),!a&&D)};v.useEffect(()=>{const{data:D}=t.auth.onAuthStateChange(H=>{H==="PASSWORD_RECOVERY"?w("update_password"):H==="USER_UPDATED"&&w("sign_in")});return w(i),()=>D.subscription.unsubscribe()},[i]);const R={supabaseClient:t,setAuthView:w,defaultEmail:x,defaultPassword:S,setDefaultEmail:k,setDefaultPassword:E,redirectTo:s,magicLink:l,showLinks:c,i18n:y,appearance:u};switch(b){case at.SIGN_IN:return C.createElement(j,null,C.createElement(ek,{...R,authView:"sign_in"}));case at.SIGN_UP:return C.createElement(j,null,C.createElement(ek,{appearance:u,supabaseClient:t,authView:"sign_up",setAuthView:w,defaultEmail:x,defaultPassword:S,setDefaultEmail:k,setDefaultPassword:E,redirectTo:s,magicLink:l,showLinks:c,i18n:y,additionalData:f,children:g}));case at.FORGOTTEN_PASSWORD:return C.createElement(j,null,C.createElement(yM,{appearance:u,supabaseClient:t,setAuthView:w,redirectTo:s,showLinks:c,i18n:y}));case at.MAGIC_LINK:return C.createElement(j,null,C.createElement(gM,{appearance:u,supabaseClient:t,setAuthView:w,redirectTo:s,showLinks:c,i18n:y}));case at.UPDATE_PASSWORD:return C.createElement(vM,{appearance:u,supabaseClient:t,i18n:y});case at.VERIFY_OTP:return C.createElement(KW,{appearance:u,supabaseClient:t,otpType:p,i18n:y});default:return null}}il.ForgottenPassword=yM;il.UpdatePassword=vM;il.MagicLink=gM;il.UserContextProvider=JW;il.useUser=GW;go({borderRadius:"12px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",width:"360px",padding:"28px 32px"});function YW(){const t=Jh();return v.useEffect(()=>{ue.auth.onAuthStateChange((e,n)=>{n&&t("/")})},[t]),m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",dir:"rtl",children:m.jsxs(ct,{className:"w-full max-w-md space-y-8 p-8",children:[m.jsx("div",{children:m.jsx("h2",{className:"text-center text-3xl font-bold tracking-tight text-gray-900",children:"התחברות לקורס קריפטו"})}),m.jsx(il,{supabaseClient:ue,appearance:{theme:mW},providers:["google"],localization:{variables:{sign_in:{email_label:"אימייל",password_label:"סיסמה",button_label:"התחבר"}}}})]})})}function QW(){return m.jsx(YW,{})}const XW=new VD({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});function ZW({children:t}){const{session:e,loading:n}=Ts();return n?m.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"טוען..."}):e?m.jsx(m.Fragment,{children:t}):m.jsx(OS,{to:"/login"})}function eq(){return m.jsx(KD,{client:XW,children:m.jsx(QP,{children:m.jsx(XP,{children:m.jsx(W5,{children:m.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[m.jsxs(V5,{children:[m.jsx(fd,{path:"/login",element:m.jsx(QW,{})}),m.jsx(fd,{path:"/",element:m.jsx(ZW,{children:m.jsx(FH,{})})}),m.jsx(fd,{path:"*",element:m.jsx(OS,{to:"/",replace:!0})})]}),m.jsx(VR,{})]})})})})})}yS(document.getElementById("root")).render(m.jsx(eq,{}));export{nk as n};
